[
  {
    "id": 3207534948,
    "number": 62237,
    "title": "lightning: integration test was broken due to permission lacking",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\nRun `release-7.5` integration test.\n\n### 2. What did you expect to see? (Required)\n\nIt should success.\n\n### 3. What did you see instead (Required)\n\n```\n+ check_lightning_log_contains 'Experiencing a wait timeout while writing to tikv'\n\n/home/jenkins/agent/workspace/pingcap/tidb/release-7.5/periodics_br_integration_test/tidb/br/tests/lightning_write_timeout/run.sh: line 48: /home/jenkins/agent/workspace/pingcap/tidb/release-7.5/periodics_br_integration_test/tidb/br/tests/_utils/check_lightning_log_contains: Permission denied\n\nscript returned exit code 1\n```\n\n### 4. What is your TiDB version? (Required)\n\nrelease-7.5\n",
    "state": "open",
    "created_at": "2025-07-07T04:50:07Z",
    "updated_at": "2025-07-07T04:50:07Z",
    "closed_at": null,
    "labels": [
      "type/bug",
      "component/lightning"
    ],
    "comments_count": 0,
    "author": "YuJuncen",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "backup",
      "tikv"
    ],
    "error_patterns": [
      "permission denied"
    ],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 2
  },
  {
    "id": 3205887413,
    "number": 62230,
    "title": "an error when run test  ./run-tests.sh: line 332: kill: (86298) - No such process",
    "body": "## Enhancement\n\nwe can drop this\n\n# github.com/pingcap/tidb/cmd/tidb-server\nbuilding mysql-tester binary: ./mysql_tester\nstart tidb-server, log file: ./integration-test.out\ntidb-server(PID: 95300) started\nrecord result for case: \"executor/issues\"\n./t/executor/issues.test: ok! 465 test cases passed, take time 5.830736958 s\n\nGreat, All tests passed\n",
    "state": "closed",
    "created_at": "2025-07-06T01:25:42Z",
    "updated_at": "2025-07-07T04:00:28Z",
    "closed_at": "2025-07-07T04:00:28Z",
    "labels": [
      "type/enhancement"
    ],
    "comments_count": 0,
    "author": "yihong0618",
    "assignees": [],
    "milestone": null,
    "category": "enhancement",
    "tech_context": [
      "mysql"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 1
  },
  {
    "id": 3207432068,
    "number": 62236,
    "title": "Call `Close` of child executor in a way similiar `defer`",
    "body": "## Enhancement\n\nIn the `Close` function of the executor, once somewhere there is panic. The `Close` of the child executor may not be called. So we need a way to ensure that `Close` of the child executor must be called no matter if there is a panic.",
    "state": "open",
    "created_at": "2025-07-07T03:33:46Z",
    "updated_at": "2025-07-07T03:33:46Z",
    "closed_at": null,
    "labels": [
      "type/enhancement"
    ],
    "comments_count": 0,
    "author": "xzhangxian1008",
    "assignees": [],
    "milestone": null,
    "category": "enhancement",
    "tech_context": [],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 1
  },
  {
    "id": 2754475392,
    "number": 58447,
    "title": "Multiple digests being generated based on variation in number of elements in \"IN\" clause on binary column for semantically similar query",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\n``` \nMySQL [(none)]> use test;\nDatabase changed\nMySQL [test]> select version();\n+---------------------+\n| version()           |\n+---------------------+\n| 5.7.25-TiDB-v6.5.11 |\n+---------------------+\n1 row in set (0.00 sec)\n\nMySQL [test]> CREATE TABLE test_binary(a binary(4));\nQuery OK, 0 rows affected (0.12 sec)\n\nMySQL [test]> select * from test_binary where a in ( _binary 'A\\ufffd\\ufffd\\ufffd');\nEmpty set (0.01 sec)\n\nMySQL [test]> select s.DIGEST ,s.DIGEST_TEXT , s.QUERY_SAMPLE_TEXT , s.EXEC_COUNT , s.PLAN_DIGEST from information_schema.statements_summary s where s.DIGEST_TEXT like '%select%test_binary%'; \n+------------------------------------------------------------------+-----------------------------------------------------------+-----------------------------------------------------------------------+------------+------------------------------------------------------------------+\n| DIGEST                                                           | DIGEST_TEXT                                               | QUERY_SAMPLE_TEXT                                                     | EXEC_COUNT | PLAN_DIGEST                                                      |\n+------------------------------------------------------------------+-----------------------------------------------------------+-----------------------------------------------------------------------+------------+------------------------------------------------------------------+\n| cf7c329dfd3568dd8c79aeb783471fbef8204996f9ef5287ecfa81234d5ce8a6 | select * from `test_binary` where `a` in ( (_charset) ? ) | select * from test_binary where a in ( _binary 'A\\ufffd\\ufffd\\ufffd') |          1 | b71103cdbdd6de5ddfabb01a15604a9888fb246c09a1cf26f3e7d98a74fd14ac |\n+------------------------------------------------------------------+-----------------------------------------------------------+-----------------------------------------------------------------------+------------+------------------------------------------------------------------+\n1 row in set (0.00 sec)\n\nMySQL [test]> select * from test_binary where a in ( _binary 'A\\ufffd\\ufffd\\ufffd', _binary 'A\\ufffd\\ufffd\\uffed');\nEmpty set (0.00 sec)\n\nMySQL [test]> select s.DIGEST ,s.DIGEST_TEXT , s.QUERY_SAMPLE_TEXT , s.EXEC_COUNT , s.PLAN_DIGEST from information_schema.statements_summary s where s.DIGEST_TEXT like '%select%test_binary%'; \n+------------------------------------------------------------------+--------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+------------+------------------------------------------------------------------+\n| DIGEST                                                           | DIGEST_TEXT                                                              | QUERY_SAMPLE_TEXT                                                                                    | EXEC_COUNT | PLAN_DIGEST                                                      |\n+------------------------------------------------------------------+--------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+------------+------------------------------------------------------------------+\n| 14bfc516695c75c3345651e76ba3ce7a60fe9af5b5b4e0ae4f61fc59172c6fa3 | select * from `test_binary` where `a` in ( (_charset) ? , (_charset) ? ) | select * from test_binary where a in ( _binary 'A\\ufffd\\ufffd\\ufffd', _binary 'A\\ufffd\\ufffd\\uffed') |          1 | 4b0635a4915a1572a3ea0fd7b82ac442b8ec0298d39f71332a39758d569c3ea8 |\n| cf7c329dfd3568dd8c79aeb783471fbef8204996f9ef5287ecfa81234d5ce8a6 | select * from `test_binary` where `a` in ( (_charset) ? )                | select * from test_binary where a in ( _binary 'A\\ufffd\\ufffd\\ufffd')                                |          1 | b71103cdbdd6de5ddfabb01a15604a9888fb246c09a1cf26f3e7d98a74fd14ac |\n+------------------------------------------------------------------+--------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------+------------+------------------------------------------------------------------+\n2 rows in set (0.00 sec)\n\nMySQL [test]> select * from test_binary where a in ( _binary 'A\\ufffd\\ufffd\\ufffd', _binary 'A\\ufffd\\ufffd\\uffed', _binary 'A\\ufffd\\ufffd\\uffdd');\nEmpty set (0.00 sec)\n\nMySQL [test]> select s.DIGEST ,s.DIGEST_TEXT , s.QUERY_SAMPLE_TEXT , s.EXEC_COUNT , s.PLAN_DIGEST from information_schema.statements_summary s where s.DIGEST_TEXT like '%select%test_binary%'; \n+------------------------------------------------------------------+-----------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------+------------+------------------------------------------------------------------+\n| DIGEST                                                           | DIGEST_TEXT                                                                             | QUERY_SAMPLE_TEXT                                                                                                                   | EXEC_COUNT | PLAN_DIGEST                                                      |\n+------------------------------------------------------------------+-----------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------+------------+------------------------------------------------------------------+\n| a2c06a5975b929045cf215cf07cfc2fb3b5dfc5ee0d05163f815d4a252a61e6a | select * from `test_binary` where `a` in ( (_charset) ? , (_charset) ? , (_charset) ? ) | select * from test_binary where a in ( _binary 'A\\ufffd\\ufffd\\ufffd', _binary 'A\\ufffd\\ufffd\\uffed', _binary 'A\\ufffd\\ufffd\\uffdd') |          1 | aaf7bf0e11c5df1598811243030ab9e72b3476928807d8d0638b963692147733 |\n| 14bfc516695c75c3345651e76ba3ce7a60fe9af5b5b4e0ae4f61fc59172c6fa3 | select * from `test_binary` where `a` in ( (_charset) ? , (_charset) ? )                | select * from test_binary where a in ( _binary 'A\\ufffd\\ufffd\\ufffd', _binary 'A\\ufffd\\ufffd\\uffed')                                |          1 | 4b0635a4915a1572a3ea0fd7b82ac442b8ec0298d39f71332a39758d569c3ea8 |\n| cf7c329dfd3568dd8c79aeb783471fbef8204996f9ef5287ecfa81234d5ce8a6 | select * from `test_binary` where `a` in ( (_charset) ? )                               | select * from test_binary where a in ( _binary 'A\\ufffd\\ufffd\\ufffd')                                                               |          1 | b71103cdbdd6de5ddfabb01a15604a9888fb246c09a1cf26f3e7d98a74fd14ac |\n+------------------------------------------------------------------+-----------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------+------------+------------------------------------------------------------------+\n3 rows in set (0.00 sec)\n\nMySQL [test]> \n```\n\n### 2. What did you expect to see? (Required)\n\nA single digest should have been generated as the query is semantically same.\n\n### 3. What did you see instead (Required)\n\nDifferent digests have been generated for above 3 queries, based on variation in number of elements in \"IN\" clause.\n\n### 4. What is your TiDB version? (Required)\n\ntested on both v6.5 and v7.1, other versions should be the same.\n\n",
    "state": "closed",
    "created_at": "2024-12-22T04:01:46Z",
    "updated_at": "2025-07-07T02:32:56Z",
    "closed_at": "2025-07-03T03:55:46Z",
    "labels": [
      "type/bug",
      "sig/sql-infra",
      "compatibility-breaker",
      "severity/minor",
      "affects-6.5",
      "affects-7.1",
      "affects-7.5",
      "affects-8.1",
      "report/customer",
      "affects-8.5"
    ],
    "comments_count": 1,
    "author": "lawrence1223freenew",
    "assignees": [
      "xhebox"
    ],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "mysql"
    ],
    "error_patterns": [],
    "has_solution": true,
    "is_recent": false,
    "engagement_score": 15
  },
  {
    "id": 2782920864,
    "number": 58871,
    "title": "PD error is not checked in `waitVersionSyncedWithoutMDL`",
    "body": "## Bug Report\n\nhere error is not checked https://github.com/pingcap/tidb/blob/b74eb0f906a73215548c1cf2352c41a802ea37f9/pkg/ddl/schema_version.go#L408\n\nIf PD goes wrong here, the error is ignored and continue with `ver=0`. Then It uses `0` to create a snapshot and `latestSchemaVersion` will be `0` too and `updateGlobalVersionAndWaitSynced` will not work.\n\n### 1. Minimal reproduce step (Required)\n\n<!-- a step by step guide for reproducing the bug. -->\n\n### 2. What did you expect to see? (Required)\n\n### 3. What did you see instead (Required)\n\n### 4. What is your TiDB version? (Required)\n\nmaster\n\n",
    "state": "open",
    "created_at": "2025-01-13T03:19:39Z",
    "updated_at": "2025-07-07T02:21:38Z",
    "closed_at": null,
    "labels": [
      "type/bug",
      "type/regression",
      "affects-6.5",
      "affects-7.1",
      "component/ddl",
      "affects-7.5",
      "affects-8.1",
      "report/customer",
      "affects-8.5"
    ],
    "comments_count": 3,
    "author": "disksing",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "replication",
      "pd"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": false,
    "engagement_score": 15
  },
  {
    "id": 3200100495,
    "number": 62200,
    "title": "involvedSchemaInfo is invalid for AlterTableMode and RefreshMeta",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\n<!-- a step by step guide for reproducing the bug. -->\nthere are no explicit set or schema/table name set\nhttps://github.com/pingcap/tidb/blob/339f07ae8f2ba406abc7f4757ffcce918cc86a56/pkg/ddl/executor.go#L7076-L7084\nhttps://github.com/pingcap/tidb/blob/339f07ae8f2ba406abc7f4757ffcce918cc86a56/pkg/ddl/executor.go#L5769-L5777\n```\n[2025/07/03 16:44:33.813 +00:00] [ERROR] [wait_group_wrapper.go:178] [\"panic in the wait group\"] [recover=\"assert failed, InvolvingSchemaInfo should be like an enumerate type: model.InvolvingSchemaInfo{Database:\\\"\\\", Table:\\\"\\\", Policy:\\\"\\\", ResourceGroup:\\\"\\\", Mode:0}\"] [stack=\"github.com/pingcap/tidb/pkg/util.(*WaitGroupWrapper).RunWithLog.func1.1\n  pkg/util/wait_group_wrapper.go:178\nruntime.gopanic\n  GOROOT/src/runtime/panic.go:791\ngithub.com/pingcap/tidb/pkg/util/intest.doPanic\n  pkg/util/intest/assert_common.go:58\ngithub.com/pingcap/tidb/pkg/util/intest.doAssert\n  pkg/util/intest/assert_common.go:30\ngithub.com/pingcap/tidb/pkg/util/intest.Assert\n  pkg/util/intest/assert.go:25\ngithub.com/pingcap/tidb/pkg/ddl.(*runningJobs).checkRunnable\n  pkg/ddl/ddl_running_jobs.go:166\ngithub.com/pingcap/tidb/pkg/ddl.(*jobScheduler).loadAndDeliverJobs\n  pkg/ddl/job_scheduler.go:423\ngithub.com/pingcap/tidb/pkg/ddl.(*jobScheduler).schedule\n  pkg/ddl/job_scheduler.go:333\ngithub.com/pingcap/tidb/pkg/ddl.(*jobScheduler).scheduleLoop\n  pkg/ddl/job_scheduler.go:268\ngithub.com/pingcap/tidb/pkg/util.(*WaitGroupWrapper).RunWithLog.func1\n  pkg/util/wait_group_wrapper.go:181\"] [stack=\"github.com/pingcap/tidb/pkg/util.(*WaitGroupWrapper).RunWithLog.func1.1\n  pkg/util/wait_group_wrapper.go:178\nruntime.gopanic\n  GOROOT/src/runtime/panic.go:791\ngithub.com/pingcap/tidb/pkg/util/intest.doPanic\n  pkg/util/intest/assert_common.go:58\ngithub.com/pingcap/tidb/pkg/util/intest.doAssert\n  pkg/util/intest/assert_common.go:30\ngithub.com/pingcap/tidb/pkg/util/intest.Assert\n  pkg/util/intest/assert.go:25\ngithub.com/pingcap/tidb/pkg/ddl.(*runningJobs).checkRunnable\n  pkg/ddl/ddl_running_jobs.go:166\ngithub.com/pingcap/tidb/pkg/ddl.(*jobScheduler).loadAndDeliverJobs\n  pkg/ddl/job_scheduler.go:423\ngithub.com/pingcap/tidb/pkg/ddl.(*jobScheduler).schedule\n  pkg/ddl/job_scheduler.go:333\ngithub.com/pingcap/tidb/pkg/ddl.(*jobScheduler).scheduleLoop\n  pkg/ddl/job_scheduler.go:268\ngithub.com/pingcap/tidb/pkg/util.(*WaitGroupWrapper).RunWithLog.func1\n  pkg/util/wait_group_wrapper.go:181\"]\n```\n\n### 2. What did you expect to see? (Required)\nsuccess\n### 3. What did you see instead (Required)\nassert fail\n### 4. What is your TiDB version? (Required)\nmaster\n<!-- Paste the output of SELECT tidb_version() -->\n\n",
    "state": "open",
    "created_at": "2025-07-03T17:25:03Z",
    "updated_at": "2025-07-06T13:00:02Z",
    "closed_at": null,
    "labels": [
      "type/bug",
      "severity/major",
      "component/ddl"
    ],
    "comments_count": 6,
    "author": "D3Hunter",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "pd"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 15
  },
  {
    "id": 3168877397,
    "number": 61946,
    "title": "SELECT reports error in TiDB but not in MySQL",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\n```sql\nCREATE TABLE t0(c0 DECIMAL UNSIGNED ZEROFILL , c1 NUMERIC , c2 TEXT(310) );\nINSERT IGNORE  INTO t0(c2, c0, c1) VALUES (-837020673, 2111813582, 2111813582);\n\n\nCREATE TABLE t1(c0 decimal(10,0) unsigned zerofill,c1 text COLLATE \"utf8mb4_bin\",c2 text COLLATE \"utf8mb4_bin\");\nINSERT INTO t1 SELECT * FROM t0;\nSELECT t1.c2, t1.c0, t1.c1 FROM t1 WHERE (CASE 1339410646 WHEN CAST(EXPORT_SET(CEILING((- (t1.c2))), (~ (false)), t1.c0, 0.4071873864608775, t1.c2) AS DATETIME) THEN (CASE 0.8171327018587662 WHEN t1.c0 THEN 'e' ELSE t1.c1 END ) ELSE (('.)')OR('(')) END );\n```\n\n<!-- a step by step guide for reproducing the bug. -->\n\n### 2. What did you expect to see? (Required)\n\nSELECT executed successfully\n\n### 3. What did you see instead (Required)\n\n```sql\nERROR 1105 (HY000): strconv.Atoi: parsing \"184467440737095516150\": value out of range\n```\n\n### 4. What is your TiDB version? (Required)\n```sql\nRelease Version: v9.0.0-beta.1.pre-640-g24903d6b24\nEdition: Community\nGit Commit Hash: 24903d6b24674b9a43625ac2d05bf1b033b04407\nGit Branch: master\nUTC Build Time: 2025-04-27 01:17:32\nGoVersion: go1.23.8\nRace Enabled: false\nCheck Table Before Drop: false\nStore: tikv \n```\n\n\n\n",
    "state": "open",
    "created_at": "2025-06-23T17:12:12Z",
    "updated_at": "2025-07-06T07:02:41Z",
    "closed_at": null,
    "labels": [
      "type/bug",
      "sig/execution",
      "severity/moderate"
    ],
    "comments_count": 2,
    "author": "FullDuplexFish",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "mysql",
      "backup",
      "tikv"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 7
  },
  {
    "id": 2681482566,
    "number": 57613,
    "title": "br: add table filter for Pitr restore",
    "body": "## Feature Request\n\nRight now only snapshot backup/restore supports filter, users are asking for PiTR to support it. We only need to add filter for log restore and not log backup.\n\nNeed to consider table rename corner cases\n1. table renamed into the filter during log replay should be kept after restore\n2. table renamed out of filter range during log replay should be dropped after restore\n3. Should naturally works with insertGCRow, repairIndex and TiFlash\n4. Partitions exchanged across the filter boundary should not be supported and will error out\n\nThis issue now becomes a covering issue for multiple other functionalities including:\n1. Online filtered restore: need to refresh schema change by tables and not full load otherwise can freeze DDL op for the entire cluster.\n2. Parallel restore: to allow multiple restore tasks with disjoint filters to proceed at the same time\n3. Log backup compatibility: allow log backup turned on while doing PiTR\n4. Better scheduler control: only set on tables that are going to restore instead of all.\n\n### Tasks:\n  - [x] https://github.com/pingcap/tidb/pull/58112 \n  - [x] https://github.com/pingcap/kvproto/pull/1294\n  - [x] https://github.com/pingcap/tidb/pull/57394\n  - [x] https://github.com/pingcap/tidb/pull/59683\n  - [x] https://github.com/pingcap/tidb/pull/59678\n  - [x] https://github.com/pingcap/tidb/pull/59109\n  - [x] https://github.com/pingcap/tidb/pull/59359\n  - [x] https://github.com/pingcap/tidb/pull/59281 (depends on https://github.com/pingcap/tidb/pull/59009 and https://github.com/pingcap/tidb/pull/60837)\n  - [x] ddl support to drop tables in restore mode https://github.com/pingcap/tidb/pull/61451\n  - [x] https://github.com/pingcap/tidb/pull/61238\n  - [x] https://github.com/pingcap/tidb/pull/61278\n  - [x] https://github.com/pingcap/tidb/pull/58724\n  - [x] https://github.com/pingcap/tidb/pull/61108\n  - [x] https://github.com/pingcap/tidb/pull/61819\n  - [x] https://github.com/pingcap/tidb/pull/61977\n### Bugfixes\n  - [x] https://github.com/pingcap/tidb/pull/60023\n  - [x] https://github.com/pingcap/tidb/pull/60202\n  - [x] https://github.com/pingcap/tidb/pull/61225\n  - [x] https://github.com/pingcap/tidb/pull/61366\n  - [x] https://github.com/pingcap/tidb/pull/61631\n  - [x] https://github.com/pingcap/tidb/pull/61734\n  - [x] https://github.com/pingcap/tidb/pull/61610\n  - [x] https://github.com/pingcap/tidb/pull/61941\n  - [x] https://github.com/pingcap/tidb-operator/pull/6267\n\n",
    "state": "open",
    "created_at": "2024-11-22T01:24:10Z",
    "updated_at": "2025-07-06T06:04:45Z",
    "closed_at": null,
    "labels": [
      "type/feature-request",
      "component/br",
      "affects-8.5"
    ],
    "comments_count": 0,
    "author": "Tristan1900",
    "assignees": [],
    "milestone": null,
    "category": "other",
    "tech_context": [
      "mysql",
      "backup",
      "tiflash",
      "pd"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": false,
    "engagement_score": 3
  },
  {
    "id": 3205776267,
    "number": 62229,
    "title": "allow ALTER TABLE COMPRESSION=NONE",
    "body": "## Enhancement\n\nCurrently COPMRESSION clause in create table is parsed bug ignored.\nhttps://docs.pingcap.com/tidb/stable/sql-statement-create-table/\n\n> The following table_options are supported. Other options such as AVG_ROW_LENGTH, CHECKSUM, COMPRESSION, CONNECTION, DELAY_KEY_WRITE, ENGINE, KEY_BLOCK_SIZE, MAX_ROWS, MIN_ROWS, ROW_FORMAT and STATS_PERSISTENT are parsed but ignored.\n\nbut we restricted ALTER table clause.\nhttps://docs.pingcap.com/tidb/stable/sql-statement-alter-table/\n\n```\n: TiDB 8.1.2\nmysql> CREATE TABLE t1 (id int) COMPRESSION=\"NONE\";\nQuery OK, 0 rows affected (0.13 sec)\n\nmysql> ALTER TABLE t1 COMPRESSION=\"None\";\nERROR 8200 (HY000): This type of ALTER TABLE is currently unsupported\n```\n\nI'd like to allow only ALTER TABLE COMPRESSION=\"NONE\"\n",
    "state": "open",
    "created_at": "2025-07-05T23:14:46Z",
    "updated_at": "2025-07-05T23:15:09Z",
    "closed_at": null,
    "labels": [
      "type/enhancement"
    ],
    "comments_count": 0,
    "author": "takaidohigasi",
    "assignees": [],
    "milestone": null,
    "category": "enhancement",
    "tech_context": [
      "mysql"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 1
  },
  {
    "id": 2477521480,
    "number": 55568,
    "title": "Use \"Tencent Cloud Object Storage\" for Restore Data from S3-Compatible Storage Fail",
    "body": "## Bug Report\r\n\r\nPlease answer these questions before submitting your issue. Thanks!\r\n\r\n### 1. Minimal reproduce step (Required)\r\nUse \"Tencent Cloud Object Storage\" for Restore Data from S3-Compatible Storage Using BR\r\n\r\n<!-- a step by step guide for reproducing the bug. -->\r\n\r\n### 2. What did you expect to see? (Required)\r\nIt will be Normal\r\n\r\n### 3. What did you see instead (Required)\r\n<Code>PathStyleDomainForbidden</Code>\r\n<Message>The bucket you are attempting to access must be addressed using COS virtual-styled domain.</Message>\r\n\r\n### 4. What is your TiDB version? (Required)\r\n8.1.0\r\n\r\n### 5.How to fix\r\nbr/pkg/storage/s3.go #L175\r\nNeed add if options.Provider == \"tencent\" use options.ForcePathStyle = false\r\n",
    "state": "open",
    "created_at": "2024-08-21T09:17:03Z",
    "updated_at": "2025-07-05T21:30:13Z",
    "closed_at": null,
    "labels": [
      "type/bug",
      "help wanted",
      "severity/major",
      "component/br",
      "affects-8.1",
      "affects-8.5"
    ],
    "comments_count": 2,
    "author": "shezhangjun",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "cloud",
      "backup",
      "tikv"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": false,
    "engagement_score": 10
  },
  {
    "id": 3128949658,
    "number": 61575,
    "title": "dumpling integration test failed",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\n<!-- a step by step guide for reproducing the bug. -->\n\n### 2. What did you expect to see? (Required)\n\n### 3. What did you see instead (Required)\nneed to use the old version mc\n```\nmc: <ERROR> `config` is not a recognized command. Get help using `--help` flag.\n```\n### 4. What is your TiDB version? (Required)\n\n<!-- Paste the output of SELECT tidb_version() -->\n\n",
    "state": "open",
    "created_at": "2025-06-09T02:26:49Z",
    "updated_at": "2025-07-05T14:35:41Z",
    "closed_at": null,
    "labels": [
      "type/bug",
      "severity/minor",
      "component/dumpling"
    ],
    "comments_count": 1,
    "author": "Leavrth",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "backup"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 5
  },
  {
    "id": 1879296351,
    "number": 46609,
    "title": "Support AWS profile for S3 configuration",
    "body": "## Enhancement\n\nSupport AWS profile configuration to set aws config values (for example to limit bandwidth to upload / download)\n\n> Sessions options from Shared Config\n> https://docs.aws.amazon.com/sdk-for-go/api/aws/session/\n\n\n## Pull Request\nhttps://github.com/pingcap/tidb/pull/62199",
    "state": "open",
    "created_at": "2023-09-04T00:29:09Z",
    "updated_at": "2025-07-05T14:22:46Z",
    "closed_at": null,
    "labels": [
      "type/enhancement"
    ],
    "comments_count": 3,
    "author": "takaidohigasi",
    "assignees": [
      "takaidohigasi"
    ],
    "milestone": null,
    "category": "enhancement",
    "tech_context": [
      "cloud"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": false,
    "engagement_score": 10
  },
  {
    "id": 3174609207,
    "number": 61999,
    "title": "dumpling: Parallel processing implementation for string-type",
    "body": "## Enhancement\n\nCurrently, parallelization supports only numeric types for dumpling. so support string value.\n\n\n## related implementation\n\n* pickupPossibleField\n    https://github.com/pingcap/tidb/blob/master/dumpling/export/sql.go#L1286-L1299\n* estimateCount\n    https://github.com/pingcap/tidb/blob/master/dumpling/export/sql.go#L1301\n    https://github.com/pingcap/tidb/blob/master/dumpling/export/sql.go#L1306\n* detectEstimateRows\n    https://github.com/pingcap/tidb/blob/master/dumpling/export/sql.go#L1343\n\n## Pull Request\n\nhttps://github.com/pingcap/tidb/pull/62172",
    "state": "open",
    "created_at": "2025-06-25T07:55:26Z",
    "updated_at": "2025-07-05T14:22:11Z",
    "closed_at": null,
    "labels": [
      "type/enhancement"
    ],
    "comments_count": 1,
    "author": "takaidohigasi",
    "assignees": [
      "takaidohigasi"
    ],
    "milestone": null,
    "category": "enhancement",
    "tech_context": [
      "backup"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 6
  },
  {
    "id": 3124109881,
    "number": 61553,
    "title": "Limit the concurrent number of sst files that call ingest sst API during the `add index` period",
    "body": "## Enhancement\nrelated to https://github.com/pingcap/tidb/issues/58807 \n\ncurrently, we already have https://docs.pingcap.com/tidb/stable/system-variables/#tidb_ddl_reorg_max_write_speed-new-in-v6512-v755-and-v850 \nwhile we can not control the concurrent number of sst files, and TiKV will take the number of level0 files as the standard for rate limiting",
    "state": "closed",
    "created_at": "2025-06-06T08:50:45Z",
    "updated_at": "2025-07-05T09:30:11Z",
    "closed_at": "2025-07-05T09:30:11Z",
    "labels": [
      "type/enhancement",
      "component/ddl",
      "affects-7.5",
      "affects-8.1",
      "affects-8.5"
    ],
    "comments_count": 0,
    "author": "AndreMouche",
    "assignees": [],
    "milestone": null,
    "category": "enhancement",
    "tech_context": [
      "tikv"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 5
  },
  {
    "id": 3153435544,
    "number": 61782,
    "title": "dead chanel in UpdateNewAndDoneWatch",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\nIt started here\n\nhttps://github.com/pingcap/tidb/blob/e601725d7fd0389107e9848a5f3182e05e0b9d98/pkg/domain/runaway.go#L75-L80\n\nwill insert record into channels here\n\nhttps://github.com/pingcap/tidb/blob/6a12f31171dda2ef20ad4f81f6b2cd95bf13feab/pkg/resourcegroup/runaway/manager.go#L424-L426\nThe receive loop however is started later than the first call of `UpdateNewAndDoneWatch(RunawayRecordFlushLoop)`\n\nhttps://github.com/pingcap/tidb/blob/6a12f31171dda2ef20ad4f81f6b2cd95bf13feab/pkg/resourcegroup/runaway/manager.go#L211\n\nIf the channel exceeds the maximum(1024), it blocks.\n\nintroduced by #52283\n\n### 2. What did you expect to see? (Required)\n\nnon blocking.\n\n### 3. What did you see instead (Required)\n\n`runawayStartLoop` blocks forever\n\n### 4. What is your TiDB version? (Required)\n\nv8.1.0 and later",
    "state": "closed",
    "created_at": "2025-06-17T13:03:04Z",
    "updated_at": "2025-07-05T06:00:55Z",
    "closed_at": "2025-07-05T06:00:55Z",
    "labels": [
      "type/bug",
      "severity/major",
      "component/pd",
      "affects-8.1",
      "affects-8.5",
      "affects-9.0"
    ],
    "comments_count": 0,
    "author": "xhebox",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "pd"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 6
  },
  {
    "id": 3186172748,
    "number": 62069,
    "title": "Deadlock encountered during statistics collection",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\nStart the cluster and run ANALYZE STATISTICS commands immediately after the cluster has started.\n\n### 2. What did you expect to see? (Required)\nNo deadlock encountered during statistics collection.\n\n### 3. What did you see instead (Required)\n```log\n2025-06-26 18:15:01 (UTC+02:00)TiKV master-tikv-0.master-tikv-peer.schrddl-sql-tps-7893364-1-595.svc.cluster.local:20160[future.rs:148] [\"starting working thread\"] [worker=deadlock-detector] [thread_id=1]\n2025-06-26 18:15:01 (UTC+02:00)TiKV master-tikv-0.master-tikv-peer.schrddl-sql-tps-7893364-1-595.svc.cluster.local:20160[deadlock.rs:761] [\"became the leader of deadlock detector!\"] [self_id=1] [thread_id=131]\n2025-06-26 19:48:56 (UTC+02:00)TiKV master-tikv-0.master-tikv-peer.schrddl-sql-tps-7893364-1-595.svc.cluster.local:20160[errors.rs:480] [\"txn deadlocks\"] [err=\"Error(Txn(Error(Mvcc(Error(Deadlock { start_ts: TimeStamp(459003693925662747), lock_ts: TimeStamp(459003693820543001), lock_key: [116, 128, 0, 0, 0, 0, 0, 0, 22, 95, 114, 128, 0, 0, 0, 0, 0, 187, 197], deadlock_key_hash: 15664380848627473828, wait_chain: [txn: 459003693820543001 wait_for_txn: 459003693925662747 key_hash: 15664380848627473828 key: 7480000000000000165F69800000000000000203800000000000DE38 resource_group_tag: 0A20A8523C35A52AE0C52FA7CDAEFF7E6E816566D35C6DDD2E5E9ABD2250C0AB79DE12201A5D2F6A6290E7649C84FA3EB304291CBFC0588A0EA5629664144CCD2FE56C5518022016, txn: 459003693925662747 wait_for_txn: 459003693820543001 key_hash: 4813705967226304026 key: 7480000000000000165F72800000000000BBC5 resource_group_tag: 0A201C168B5476C4736D7F171FFBE75D3F630EBEA1D81AD7FAD14395EA47AA1AF1BF12206CD45B796EF12E7CD136A40CF561D46CB98182D75F27497674CF7ED44881A21F18012016] })))))\"] [thread_id=129]\n```\n\n```sql\nmysql> SELECT * FROM information_schema.deadlocks;\n+-------------+----------------------------+-----------+--------------------+------------------------------------------------------------------+-------------------------+----------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------+--------------------+\n| DEADLOCK_ID | OCCUR_TIME                 | RETRYABLE | TRY_LOCK_TRX_ID    | CURRENT_SQL_DIGEST                                               | CURRENT_SQL_DIGEST_TEXT | KEY                                                      | KEY_INFO                                                                                                                       | TRX_HOLDING_LOCK   |\n+-------------+----------------------------+-----------+--------------------+------------------------------------------------------------------+-------------------------+----------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------+--------------------+\n|           1 | 2025-06-27 01:48:56.258590 |         0 | 459003693820543001 | a8523c35a52ae0c52fa7cdaeff7e6e816566d35c6ddd2e5e9abd2250c0ab79de | NULL                    | 7480000000000000165F69800000000000000203800000000000DE38 | {\"db_name\":\"mysql\",\"table_name\":\"stats_meta\",\"index_name\":\"tbl\",\"index_values\":[\"56888\"],\"db_id\":1,\"table_id\":22,\"index_id\":2} | 459003693925662747 |\n|           1 | 2025-06-27 01:48:56.258590 |         0 | 459003693925662747 | 1c168b5476c4736d7f171ffbe75d3f630ebea1d81ad7fad14395ea47aa1af1bf | NULL                    | 7480000000000000165F72800000000000BBC5                   | {\"db_name\":\"mysql\",\"table_name\":\"stats_meta\",\"handle_type\":\"int\",\"handle_value\":\"48069\",\"db_id\":1,\"table_id\":22}               | 459003693820543001 |\n+-------------+----------------------------+-----------+--------------------+------------------------------------------------------------------+-------------------------+----------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------+--------------------+\n2 rows in set (0.28 sec)\n```\n\n### 4. What is your TiDB version? (Required)\n\nmaster\nrelease-8.5\n\n",
    "state": "open",
    "created_at": "2025-06-29T13:34:58Z",
    "updated_at": "2025-07-04T14:46:24Z",
    "closed_at": null,
    "labels": [
      "type/bug",
      "sig/planner",
      "component/statistics",
      "fuzz/schrddl"
    ],
    "comments_count": 1,
    "author": "0xPoe",
    "assignees": [
      "0xPoe"
    ],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "mysql",
      "tikv"
    ],
    "error_patterns": [
      "deadlock"
    ],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 9
  },
  {
    "id": 2521298236,
    "number": 56034,
    "title": "Able to set AUTO_INCREMENT to a value larger than maximum value of int",
    "body": "## Bug Report\r\n\r\nPlease answer these questions before submitting your issue. Thanks!\r\n\r\n### 1. Minimal reproduce step (Required)\r\n1. create a table with auto increment, and set AUTO_INCREMENT=2147483648, while max value for int is 2147483647 (https://docs.pingcap.com/tidb/stable/data-type-numeric#integer-type)\r\n2. insert into the value using auto increment\r\n```\r\nmysql> create table t1 (a int auto_increment) AUTO_INCREMENT=2147483648;\r\nQuery OK, 0 rows affected (0.07 sec)\r\n\r\nmysql> insert into t1 values ();\r\nERROR 1690 (22003): constant 2147483648 overflows int\r\n\r\n```\r\n\r\n### 2. What did you expect to see? (Required)\r\nCreate table should fail or user should be notified/warned in this case.\r\n\r\n### 3. What did you see instead (Required)\r\nCreate table is OK, but later insert fails.\r\n\r\n### 4. What is your TiDB version? (Required)\r\nv8.4.0-alpha\r\nEdition: Community\r\nGit Commit Hash: f9c4773ba34854cec93dec3c5cae8a625925f9e9\r\nGit Branch: heads/refs/tags/v8.4.0-alpha\r\n\r\n",
    "state": "open",
    "created_at": "2024-09-12T04:14:30Z",
    "updated_at": "2025-07-04T14:30:14Z",
    "closed_at": null,
    "labels": [
      "type/bug",
      "good first issue",
      "severity/moderate",
      "component/ddl"
    ],
    "comments_count": 9,
    "author": "fubinzh",
    "assignees": [
      "takaidohigasi",
      "adi-kmt"
    ],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "mysql",
      "backup"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": false,
    "engagement_score": 28
  },
  {
    "id": 3171446223,
    "number": 61967,
    "title": "Cleaning up unused code by enabling golangci-lint unused",
    "body": "## Enhancement\n\nThe unused code can be obtained through the following instructions:\n` golangci-lint run --no-config --disable-all --enable=unused --timeout=30m --skip-files=\".*_test\\.go\" ./pkg/...`\n\n- [x] #61959 Rows Changed: +0 \u221253\n- [x] #61924 Rows Changed: +7 \u221215\n- [x] #62000 Rows Changed: +0 \u221273\n- [x] #61936 Rows Changed: +0 \u221223\n- [x] #62004 Rows Changed: +0 \u2212139\n- [x] #62056 Rows Changed: +0 \u2212132\n\n\nRest:\n\n```\npkg/resourcemanager/poolmanager/task_manager.go:52:16: func `(*Meta).getOriginConcurrency` is unused (unused)\nfunc (m *Meta) getOriginConcurrency() int32 {\n               ^\npkg/resourcemanager/poolmanager/task_manager.go:124:23: func `(*TaskManager).hasTask` is unused (unused)\nfunc (t *TaskManager) hasTask(taskID uint64) bool {\n                      ^\npkg/util/cgroup/cgroup_cpu.go:24:5: var `errNoCPUControllerDetected` is unused (unused)\nvar errNoCPUControllerDetected = errors.New(\"no cpu controller detected\")\n    ^\npkg/sessionctx/vardef/tidb_vars.go:1804:6: func `mustParseDuration` is unused (unused)\nfunc mustParseDuration(str string) time.Duration {\n     ^\npkg/util/tiflashcompute/topo_fetcher.go:161:27: func `(*MockTopoFetcher).assureTopo` is unused (unused)\nfunc (f *MockTopoFetcher) assureTopo(nodeNum int) error {\n                          ^\npkg/store/mockstore/unistore/tikv/mvcc/tikv.go:131:5: var `errInvalidLockCFValue` is unused (unused)\nvar errInvalidLockCFValue = errors.New(\"invalid lock CF value\")\n    ^\npkg/sessionctx/stmtctx/stmtctx.go:71:6: type `jsonSQLWarn` is unused (unused)\ntype jsonSQLWarn struct {\n     ^\npkg/kv/kv.go:792:2: field `accessKey` is unused (unused)\n\taccessKey    []byte\n\t^\npkg/timer/api/store.go:50:26: func `(*OptionalVal[T]).internalPresent` is unused (unused)\nfunc (o *OptionalVal[T]) internalPresent() bool {\n                         ^\npkg/table/tables/tables.go:1469:23: func `(*TableCommon).canSkipUpdateBinlog` is unused (unused)\nfunc (t *TableCommon) canSkipUpdateBinlog(col *table.Column) bool {\n                      ^\npkg/owner/mock.go:45:2: field `retireHook` is unused (unused)\n\tretireHook   func()\n\t^\npkg/distsql/select_result.go:52:2: var `errQueryInterrupted` is unused (unused)\n\terrQueryInterrupted = dbterror.ClassExecutor.NewStd(errno.ErrQueryInterrupted)\n\t^\npkg/store/mockstore/mockstore.go:272:6: func `copyImage` is unused (unused)\nfunc copyImage() (string, error) {\n     ^\npkg/workloadlearning/handle.go:115:16: func `(*Handle).analyzeBasedOnStatementSummary` is unused (unused)\nfunc (*Handle) analyzeBasedOnStatementSummary() []*TableReadCostMetrics {\n               ^\npkg/workloadlearning/handle.go:338:6: func `checkCrossDB` is unused (unused)\nfunc checkCrossDB(sql string) (bool, error) {\n     ^\npkg/ttl/ttlworker/job.go:123:2: field `statusMutex` is unused (unused)\n\tstatusMutex sync.Mutex\n\t^\npkg/ttl/ttlworker/session.go:60:5: var `allIsolationReadEngines` is unused (unused)\nvar allIsolationReadEngines = map[kv.StoreType]struct{}{\n    ^\npkg/executor/join/hash_join_test_util.go:147:6: func `buildDataSource` is unused (unused)\nfunc buildDataSource(sortCase *testutil.SortCase, schema *expression.Schema) *testutil.MockDataSource {\n......\n```",
    "state": "open",
    "created_at": "2025-06-24T10:41:56Z",
    "updated_at": "2025-07-04T14:17:38Z",
    "closed_at": null,
    "labels": [
      "type/enhancement",
      "good first issue",
      "first-time-contributor"
    ],
    "comments_count": 2,
    "author": "zimulala",
    "assignees": [
      "kachida"
    ],
    "milestone": null,
    "category": "enhancement",
    "tech_context": [
      "docker",
      "monitoring",
      "replication",
      "tiflash",
      "tikv",
      "pd"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 10
  },
  {
    "id": 3198790110,
    "number": 62188,
    "title": "resource group: some interfaces are not correctly using keyspace",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\n<!-- a step by step guide for reproducing the bug. -->\n\n### 2. What did you expect to see? (Required)\n\n### 3. What did you see instead (Required)\n\n### 4. What is your TiDB version? (Required)\n\n<!-- Paste the output of SELECT tidb_version() -->\n\n",
    "state": "closed",
    "created_at": "2025-07-03T09:55:01Z",
    "updated_at": "2025-07-04T10:27:08Z",
    "closed_at": "2025-07-04T10:27:08Z",
    "labels": [
      "type/bug",
      "severity/minor",
      "component/pd"
    ],
    "comments_count": 2,
    "author": "lhy1024",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [],
    "error_patterns": [],
    "has_solution": true,
    "is_recent": true,
    "engagement_score": 7
  },
  {
    "id": 3174835729,
    "number": 62001,
    "title": "resource_control: support collecting and reporting cross AZ network traffic",
    "body": "## Feature Request\n\n**Is your feature request related to a problem? Please describe:**\n<!-- A clear and concise description of what the problem is. Ex. I'm always frustrated when [...] -->\n\nAs the cross AZ traffic in the cloud environment takes a significant portion of the overall cost, we want to collect the cross AZ traffic involved in user statements so it can help us optimize our pricing strategy.\n\n**Describe the feature you'd like:**\n<!-- A clear and concise description of what you want to happen. -->\n\n**Describe alternatives you've considered:**\n<!-- A clear and concise description of any alternative solutions or features you've considered. -->\n\n**Teachability, Documentation, Adoption, Migration Strategy:**\n<!-- If you can, explain some scenarios how users might use this, situations it would be helpful in. Any API designs, mockups, or diagrams are also helpful. -->\n",
    "state": "closed",
    "created_at": "2025-06-25T09:02:05Z",
    "updated_at": "2025-07-04T10:27:01Z",
    "closed_at": "2025-07-04T10:27:01Z",
    "labels": [
      "type/feature-request"
    ],
    "comments_count": 0,
    "author": "glorv",
    "assignees": [],
    "milestone": null,
    "category": "other",
    "tech_context": [
      "mysql",
      "cloud"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 1
  },
  {
    "id": 3201398973,
    "number": 62210,
    "title": "tiflash path can be seen as a kind of logical-prop to guide upper operator to generate mpp task or not",
    "body": "## Enhancement\n\n![Image](https://github.com/user-attachments/assets/e6842f97-0a9e-4738-96d1-2bbccde10bd2)\n\nwhen we are planning mpp join, we use allowMPP switch and p.canPushToCop(tiflash) to judge whether we can generate shuffleJoin or boardCast join directly, and if it is and hint is preferred, we just return them directly, while since p.canPushToCop(tiflash) may not that correct as we expected. We should postpone this kind of hint handling into attachment phase.\n\nThat means we want to lift the canPushToCop check here, while for most of the case, always generating a mpp join here and fail in the child building like ds can't find any tiflash path is quite a common and simple case which can be avoided by maintain a kind of logical property bottom-up to simply guide upper join to avoid generate mpp join if any side of its child lost the tiflash-path-prop maintained. \n\n",
    "state": "open",
    "created_at": "2025-07-04T05:26:24Z",
    "updated_at": "2025-07-04T09:26:40Z",
    "closed_at": null,
    "labels": [
      "type/enhancement",
      "sig/planner",
      "planner/cascades"
    ],
    "comments_count": 0,
    "author": "AilinKid",
    "assignees": [],
    "milestone": null,
    "category": "enhancement",
    "tech_context": [
      "docker",
      "tiflash"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 3
  },
  {
    "id": 3201891363,
    "number": 62218,
    "title": "Backoff_types field in slow_query system table may not work",
    "body": "## Bug Report\n\nFor a long time, we found our slow logs are inaccurate or has important information missing.\nThis commit: https://github.com/pingcap/tidb/commit/8c79898896455555b401cf1c093b625765cd6312 , splitted the `Backoff_types` field of the slow log files into `Prewrite_Backoff_types` and `Commit_Backoff_types`, and we expect it can give us some more fine-grained information.\n\nHowever, the `information_schema.slow_query` system table still has only the `Backoff_types` column. This might cause when querying the table by SQL and it tries to parse the slow log fiels, it might always return empty result for the `Backoff_types` column, as there's no field with matching name. And further, this affects the information shown on TiDB dashboard.\n\n\\* Note: this problem was found in code, and haven't been verified by test for now.\n\nBy the way, the other backoff related columns in the table looks have inconsistent semantics to each other. E.g., while `Backoff_types` looks only including backoffs happend during write, `Backoff_time` and `Backoff_total` looks different. There might be more problems here.\n\n### What is your TiDB version? (Required)\n\nmaster. But it should affects all LTS versions from v6.5.x.\n\n\n",
    "state": "open",
    "created_at": "2025-07-04T09:02:56Z",
    "updated_at": "2025-07-04T09:02:56Z",
    "closed_at": null,
    "labels": [
      "type/bug"
    ],
    "comments_count": 0,
    "author": "MyonKeminta",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "performance"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 1
  },
  {
    "id": 3199721449,
    "number": 62197,
    "title": "Goroutine may leak in test",
    "body": "## Enhancement\n\n```\nPASS\n[2025/07/03 03:26:49.368 +00:00] [ERROR] [subscribe.go:170] [\"Error processing events\"] [category=ddl-notifier] [error=\"session pool closed\"] [errorVerbose=\"session pool closed\\ngithub.com/pingcap/errors.Trace\\n\\texternal/com_github_pingcap_errors/juju_adaptor.go:15\\ngithub.com/pingcap/tidb/pkg/ddl/notifier.(*DDLNotifier).processEvents\\n\\tpkg/ddl/notifier/subscribe.go:183\\ngithub.com/pingcap/tidb/pkg/ddl/notifier.(*DDLNotifier).start\\n\\tpkg/ddl/notifier/subscribe.go:163\\ngithub.com/pingcap/tidb/pkg/util.(*WaitGroupWrapper).RunWithRecover.func1\\n\\tpkg/util/wait_group_wrapper.go:189\\nruntime.goexit\\n\\tsrc/runtime/asm_amd64.s:1700\"] [stack=\"github.com/pingcap/tidb/pkg/ddl/notifier.(*DDLNotifier).start\\n\\tpkg/ddl/notifier/subscribe.go:170\\ngithub.com/pingcap/tidb/pkg/util.(*WaitGroupWrapper).RunWithRecover.func1\\n\\tpkg/util/wait_group_wrapper.go:189\"]\ncoverage: 9.3% of statements\n[2025/07/03 03:26:50.368 +00:00] [ERROR] [subscribe.go:170] [\"Error processing events\"] [category=ddl-notifier] [error=\"session pool closed\"] [errorVerbose=\"session pool closed\\ngithub.com/pingcap/errors.Trace\\n\\texternal/com_github_pingcap_errors/juju_adaptor.go:15\\ngithub.com/pingcap/tidb/pkg/ddl/notifier.(*DDLNotifier).processEvents\\n\\tpkg/ddl/notifier/subscribe.go:183\\ngithub.com/pingcap/tidb/pkg/ddl/notifier.(*DDLNotifier).start\\n\\tpkg/ddl/notifier/subscribe.go:163\\ngithub.com/pingcap/tidb/pkg/util.(*WaitGroupWrapper).RunWithRecover.func1\\n\\tpkg/util/wait_group_wrapper.go:189\\nruntime.goexit\\n\\tsrc/runtime/asm_amd64.s:1700\"] [stack=\"github.com/pingcap/tidb/pkg/ddl/notifier.(*DDLNotifier).start\\n\\tpkg/ddl/notifier/subscribe.go:170\\ngithub.com/pingcap/tidb/pkg/util.(*WaitGroupWrapper).RunWithRecover.func1\\n\\tpkg/util/wait_group_wrapper.go:189\"]\ngoleak: Errors on successful test run: found unexpected goroutines:\n[Goroutine 28119 in state select, with github.com/pingcap/tidb/pkg/ddl/notifier.(*DDLNotifier).start on top of the stack:\ngithub.com/pingcap/tidb/pkg/ddl/notifier.(*DDLNotifier).start(0xc00964ecc0)\n\tpkg/ddl/notifier/subscribe.go:159 +0x1e5\ngithub.com/pingcap/tidb/pkg/util.(*WaitGroupWrapper).RunWithRecover.func1()\n\tpkg/util/wait_group_wrapper.go:189 +0x6b\ncreated by github.com/pingcap/tidb/pkg/util.(*WaitGroupWrapper).RunWithRecover in goroutine 28460\n\tpkg/util/wait_group_wrapper.go:181 +0x99\n Goroutine 28460 in state select, with github.com/pingcap/tidb/pkg/util/timeutil.Sleep on top of the stack:\ngithub.com/pingcap/tidb/pkg/util/timeutil.Sleep({0x73c7c78, 0xc009e686e0}, 0xc0068f9ee0?)\n\tpkg/util/timeutil/time.go:28 +0xcb\ngithub.com/pingcap/tidb/pkg/owner.(*mockManager).CampaignOwner.func1()\n\tpkg/owner/mock.go:159 +0x345\ncreated by github.com/pingcap/tidb/pkg/owner.(*mockManager).CampaignOwner in goroutine 131\n\tpkg/owner/mock.go:138 +0x6c\n]\n```\n\nSometimes the stats owner manager is not closed when the test is complete. It may fail the leak detection.",
    "state": "closed",
    "created_at": "2025-07-03T15:05:54Z",
    "updated_at": "2025-07-04T09:01:49Z",
    "closed_at": "2025-07-04T09:01:49Z",
    "labels": [
      "type/enhancement"
    ],
    "comments_count": 0,
    "author": "tangenta",
    "assignees": [],
    "milestone": null,
    "category": "enhancement",
    "tech_context": [],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 1
  },
  {
    "id": 3201776312,
    "number": 62216,
    "title": "stats: analyze panic with error \"index out of range [10] with length 10\" include virtual column",
    "body": "## Bug Report\n\nIf the first column of index is a **virtual column** , when analyze table, it will throw \"\"index out of range [10] with length 10\" panic error.\n\n### 1. Minimal reproduce step (Required)\n\n1. create table with virtual column as index first column\n\n```\nCREATE TABLE `job` (\n  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'id',\n  `uuid` char(36) GENERATED ALWAYS AS (json_unquote(json_extract(`job_parameter`, _utf8mb4'$.jobUuid'))) VIRTUAL COMMENT 'uuid',\n  `agent_uuid` char(36) GENERATED ALWAYS AS (json_unquote(json_extract(`job_parameter`, _utf8mb4'$.agentUuid'))) VIRTUAL COMMENT 'agent uuid',\n  `status` varchar(16) GENERATED ALWAYS AS (json_unquote(json_extract(`job_output`, _utf8mb4'$.status'))) VIRTUAL COMMENT 'xxx',\n  `start_time` datetime DEFAULT NULL COMMENT 'xxx',\n  `end_time` datetime DEFAULT NULL COMMENT 'xxx',\n  `job_parameter` json DEFAULT NULL COMMENT 'xxx',\n  `job_output` json DEFAULT NULL COMMENT 'xxx',\n  `job_callback` json DEFAULT NULL COMMENT 'xxx',\n  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'xxx',\n  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'xxx',\n  PRIMARY KEY (`id`) /*T![clustered_index] NONCLUSTERED */,\n  UNIQUE KEY `uk_uuid` (`uuid`),\n  KEY `idx_agent_uuid` (`agent_uuid`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin AUTO_INCREMENT=8001 /*T![auto_id_cache] AUTO_ID_CACHE=1 */ COMMENT='xxx';\n```\n\n2. insert into some data\n\n3. analyze table\n```\nanalyze table job;\n```\n\n### 2. What did you expect to see? (Required)\n\nwithout any error\n\n### 3. What did you see instead (Required)\n\n```\nmysql> analyze table job;\nERROR 1105 (HY000): runtime error: index out of range [10] with length 10\n```\n\npanic log\n```\n[2025/07/04 15:59:46.782 +08:00] [ERROR] [analyze.go:520] [\"analyze worker panicked\"] [recover=\"runtime error: index out of r\nange [10] with length 10\"] [stack=\"github.com/pingcap/tidb/pkg/executor.(*AnalyzeExec).analyzeWorker.func1\\n\\t/Users/pingcap/\nworkspace/bp-tidb-release-darwin-arm64-k5m6z-build-binaries/source/tidb/pkg/executor/analyze.go:520\\nruntime.gopanic\\n\\t/usr/\nlocal/go1.21/src/runtime/panic.go:914\\nruntime.goPanicIndex\\n\\t/usr/local/go1.21/src/runtime/panic.go:114\\ngithub.com/pingcap\n/tidb/pkg/util/chunk.Row.IsNull\\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin-arm64-k5m6z-build-binaries/source/tidb/pkg\n/util/chunk/row.go:218\\ngithub.com/pingcap/tidb/pkg/expression.(*Column).EvalJSON\\n\\t/Users/pingcap/workspace/bp-tidb-release\n-darwin-arm64-k5m6z-build-binaries/source/tidb/pkg/expression/column.go:502\\ngithub.com/pingcap/tidb/pkg/expression.(*builtin\nJSONExtractSig).evalJSON\\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin-arm64-k5m6z-build-binaries/source/tidb/pkg/expres\nsion/builtin_json.go:174\\ngithub.com/pingcap/tidb/pkg/expression.(*ScalarFunction).EvalJSON\\n\\t/Users/pingcap/workspace/bp-ti\ndb-release-darwin-arm64-k5m6z-build-binaries/source/tidb/pkg/expression/scalar_function.go:487\\ngithub.com/pingcap/tidb/pkg/e\nxpression.(*builtinCastJSONAsStringSig).evalString\\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin-arm64-k5m6z-build-binar\nies/source/tidb/pkg/expression/builtin_cast.go:1908\\ngithub.com/pingcap/tidb/pkg/expression.(*ScalarFunction).EvalString\\n\\t/\nUsers/pingcap/workspace/bp-tidb-release-darwin-arm64-k5m6z-build-binaries/source/tidb/pkg/expression/scalar_function.go:472\\n\ngithub.com/pingcap/tidb/pkg/expression.(*builtinJSONUnquoteSig).evalString\\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin\n-arm64-k5m6z-build-binaries/source/tidb/pkg/expression/builtin_json.go:239\\ngithub.com/pingcap/tidb/pkg/expression.(*ScalarFu\nnction).EvalString\\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin-arm64-k5m6z-build-binaries/source/tidb/pkg/expression/s\ncalar_function.go:472\\ngithub.com/pingcap/tidb/pkg/expression.(*ScalarFunction).Eval\\n\\t/Users/pingcap/workspace/bp-tidb-rele\nase-darwin-arm64-k5m6z-build-binaries/source/tidb/pkg/expression/scalar_function.go:431\\ngithub.com/pingcap/tidb/pkg/expressi\non.(*Column).EvalVirtualColumn\\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin-arm64-k5m6z-build-binaries/source/tidb/pkg/\nexpression/column.go:701\\ngithub.com/pingcap/tidb/pkg/table.FillVirtualColumnValue\\n\\t/Users/pingcap/workspace/bp-tidb-releas\ne-darwin-arm64-k5m6z-build-binaries/source/tidb/pkg/table/column.go:746\\ngithub.com/pingcap/tidb/pkg/executor.(*AnalyzeColumn\nsExecV2).decodeSampleDataWithVirtualColumn\\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin-arm64-k5m6z-build-binaries/sour\nce/tidb/pkg/executor/analyze_col_v2.go:171\\ngithub.com/pingcap/tidb/pkg/executor.(*AnalyzeColumnsExecV2).buildSamplingStats\\n\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin-arm64-k5m6z-build-binaries/source/tidb/pkg/executor/analyze_col_v2.go:309\\n\ngithub.com/pingcap/tidb/pkg/executor.(*AnalyzeColumnsExecV2).analyzeColumnsPushDownV2\\n\\t/Users/pingcap/workspace/bp-tidb-rel\nease-darwin-arm64-k5m6z-build-binaries/source/tidb/pkg/executor/analyze_col_v2.go:107\\ngithub.com/pingcap/tidb/pkg/executor.a\nnalyzeColumnsPushDownEntry\\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin-arm64-k5m6z-build-binaries/source/tidb/pkg/exec\nutor/analyze_col.go:69\\ngithub.com/pingcap/tidb/pkg/executor.(*AnalyzeExec).analyzeWorker\\n\\t/Users/pingcap/workspace/bp-tidb\n-release-darwin-arm64-k5m6z-build-binaries/source/tidb/pkg/executor/analyze.go:547\\ngithub.com/pingcap/tidb/pkg/executor.(*An\nalyzeExec).Next.func1\\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin-arm64-k5m6z-build-binaries/source/tidb/pkg/executor/\nanalyze.go:118\\ngithub.com/pingcap/tidb/pkg/util.(*WaitGroupWrapper).Run.func1\\n\\t/Users/pingcap/workspace/bp-tidb-release-da\nrwin-arm64-k5m6z-build-binaries/source/tidb/pkg/util/wait_group_wrapper.go:156\"]\n```\n\n### 4. What is your TiDB version? (Required)\n\nv7.5.6\n\n<!-- Paste the output of SELECT tidb_version() -->\n\n",
    "state": "open",
    "created_at": "2025-07-04T08:18:50Z",
    "updated_at": "2025-07-04T08:58:47Z",
    "closed_at": null,
    "labels": [
      "type/bug",
      "sig/planner",
      "severity/major",
      "may-affects-6.5",
      "may-affects-7.1",
      "may-affects-7.5",
      "may-affects-8.1",
      "may-affects-8.5"
    ],
    "comments_count": 0,
    "author": "elsa0520",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "mysql",
      "pd"
    ],
    "error_patterns": [
      "error:"
    ],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 8
  },
  {
    "id": 3201730145,
    "number": 62215,
    "title": "br: cross-version restore throws unexpected error",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\n<!-- a step by step guide for reproducing the bug. -->\nuse v8.1 to restore to v7.5 cluster from a backup against v6.5 cluster\n\n### 2. What did you expect to see? (Required)\nrestore succeed\n\n### 3. What did you see instead (Required)\n\n<img width=\"1363\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/620283d3-2841-440a-9333-c98744726176\" />\n\n### 4. What is your TiDB version? (Required)\n\n<!-- Paste the output of SELECT tidb_version() -->\n\n",
    "state": "open",
    "created_at": "2025-07-04T07:58:53Z",
    "updated_at": "2025-07-04T08:00:04Z",
    "closed_at": null,
    "labels": [
      "type/bug",
      "severity/moderate",
      "component/br"
    ],
    "comments_count": 0,
    "author": "BornChanger",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "docker",
      "backup"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 3
  },
  {
    "id": 3201518609,
    "number": 62212,
    "title": "SQL with join failed to build executor",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\nFound from instance plan cache test\n\n```SQL\ndrop table t1, t2 if exists;\n\ncreate table t1 (c0 int, c1 int);\n\ncreate table t2 (c0 int, c1 int);\n\nselect * from t1 join t2 on t1.c0 = t2.c0\n\twhere t2.c1 = null or t2.c1 > 0 and t1.c1 > 0;\n```\n\n<!-- a step by step guide for reproducing the bug. -->\n\n### 2. What did you expect to see? (Required)\n\nsucceed\n\n### 3. What did you see instead (Required)\n\n```sql\nERROR 8118 (HY000): Failed to build executor   \n```\n\n### 4. What is your TiDB version? (Required)\n\n 15fe8f1be9789b9d21e9ba6ac8bc7e20b338c2fa\n\n<!-- Paste the output of SELECT tidb_version() -->\n\n",
    "state": "open",
    "created_at": "2025-07-04T06:30:52Z",
    "updated_at": "2025-07-04T07:39:52Z",
    "closed_at": null,
    "labels": [
      "type/bug",
      "sig/planner",
      "severity/major"
    ],
    "comments_count": 0,
    "author": "joechenrh",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 3
  },
  {
    "id": 3187229891,
    "number": 62080,
    "title": "OOM record will increase the non-GC STW latency",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\n1. Submit big queries to TiDB, and the memory grows to near `tidb_memory_usage_alarm_ratio`.\n\n### 2. What did you expect to see? (Required)\n\nThe query latency / TSO Wait duration is not affected.\n\n### 3. What did you see instead (Required)\n\n1. The P999 TSO wait duration increased to 1~2 seconds, while the metrics of PD looks fine.\n2. The log keep printing `[memoryusagealarm.go:215] [\"tidb-server has the risk of OOM because of memory usage exceeds alarm ratio. Running SQLs and heap profile will be recorded in record path\"] [\"is tidb_server_memory_limit set\"=true]`, which means it's collecting record at a high frequency.\n3. The P999 non-GC STW latency is always high in runtime grafana panel.\n\n### 4. What is your TiDB version? (Required)\n\n<!-- Paste the output of SELECT tidb_version() -->\n\n",
    "state": "open",
    "created_at": "2025-06-30T05:46:31Z",
    "updated_at": "2025-07-04T06:54:41Z",
    "closed_at": null,
    "labels": [
      "type/bug",
      "sig/sql-infra",
      "severity/minor"
    ],
    "comments_count": 4,
    "author": "YangKeao",
    "assignees": [
      "YangKeao"
    ],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "monitoring",
      "performance",
      "pd"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 14
  },
  {
    "id": 3198962009,
    "number": 62192,
    "title": "cannot remove the selection with the table dual",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\n```\nCREATE TABLE t43fc4f8a (\n  col_48 date NOT NULL DEFAULT '1991-09-25',\n  col_49 smallint unsigned NOT NULL DEFAULT '14803',\n  col_50 char(87) COLLATE utf8mb4_unicode_ci DEFAULT 'GhnCJw~(RZ!i#ZxgC',\n  col_51 date DEFAULT NULL,\n  UNIQUE KEY idx_7 (col_51)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\nPARTITION BY LIST COLUMNS(col_51)\n(PARTITION p0 VALUES IN ('1970-09-10','1982-04-21','1990-08-27','1990-10-22','1996-02-27','2018-06-05','2027-05-18'),\n PARTITION p1 VALUES IN ('1972-01-21','1974-11-21','1994-02-23','1996-11-08','2000-04-05','2000-09-01','2005-12-17','2014-09-24','2016-12-01','2024-07-27','2025-02-14','2029-06-22','2036-04-30'));\n\n\n CREATE TABLE tlcf30036b (\n  col_71 varbinary(257) NOT NULL,\n  col_72 timestamp NULL DEFAULT NULL,\n  col_73 time NOT NULL,\n  PRIMARY KEY (col_71(2)) /*T![clustered_index] CLUSTERED */,\n  UNIQUE KEY idx_14 (col_72,col_71) /*!80000 INVISIBLE */\n) ENGINE=InnoDB DEFAULT CHARSET=gbk COLLATE=gbk_chinese_ci;\n\n\nselect   /*+   */ /*+ NO_HASH_JOIN( t43fc4f8a , st_57 */ avg( distinct  st_57.r1 ) as r0 from t43fc4f8a , ( select  /*+ use_index( tlcf30036b ) */ /*+ agg_to_cop()  */  elt(2, tlcf30036b.col_72 , tlcf30036b.col_72 ) as r0 , bit_or( tlcf30036b.col_71 ) as r1 from tlcf30036b where IsNull( tlcf30036b.col_71 ) and not( tlcf30036b.col_72 in ( '1980-08-05' ,'2033-10-20' ,'2030-06-22' ,'1972-04-20' ) ) group by tlcf30036b.col_72  having tlcf30036b.col_72 in ( '2004-03-24' ,'2006-02-04' ,'1993-06-20' ,null ) and not( tlcf30036b.col_72 < '2026-03-29' ) order by r0,r1 ) st_57 where st_57.r1 in ( 13307631398032338238 ,10696905560280898882 ,5314440087685082217 ,17229250596274672311 ) group by t43fc4f8a.col_51,t43fc4f8a.col_49  having t43fc4f8a.col_49 <=> 11261 order by r0 limit 562300838\n```\n<!-- a step by step guide for reproducing the bug. -->\n\n### 2. What did you expect to see? (Required)\n\n```\n\"TopN_23 8.00 root  Column#13, offset:0, count:562300838\",\n\"\u2514\u2500HashAgg_28 8.00 root  group by:Column#18, Column#19, funcs:avg(distinct Column#17)->Column#13\",\n\"  \u2514\u2500Projection_55 8.00 root  cast(Column#9, decimal(20,0) UNSIGNED BINARY)->Column#17, test.t43fc4f8a.col_51->Column#18, test.t43fc4f8a.col_49->Column#19\",\n\"    \u2514\u2500Projection_29 8.00 root  test.t43fc4f8a.col_49, test.t43fc4f8a.col_51, Column#9\",\n\"      \u2514\u2500HashJoin_43 8.00 root  CARTESIAN inner join\",\n\"        \u251c\u2500Selection_44(Build) 0.80 root  in(Column#9, 13307631398032338238, 10696905560280898882, 5314440087685082217, 17229250596274672311)\",\n\"        \u2502 \u2514\u2500HashAgg_45 1.00 root  group by:Column#16, funcs:bit_or(Column#15)->Column#9\",\n\"        \u2502   \u2514\u2500Projection_54 0.00 root  cast(test.tlcf30036b.col_71, bigint(257) BINARY)->Column#15, test.tlcf30036b.col_72->Column#16\",\n\"        \u2502     \u2514\u2500TableDual_46 0.00 root  rows:0\",\n\"        \u2514\u2500TableReader_53(Probe) 10.00 root partition:all data:Selection_52\",\n\"          \u2514\u2500Selection_52 10.00 cop[tikv]  nulleq(test.t43fc4f8a.col_49, 11261)\",\n\"            \u2514\u2500TableFullScan_51 10000.00 cop[tikv] table:t43fc4f8a keep order:false, stats:pseudo\",\n```\n### 3. What did you see instead (Required)\n\n```\n+---------------------------------+----------+-----------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| id                              | estRows  | task      | access object   | operator info                                                                                                                                                                                                                                      |\n+---------------------------------+----------+-----------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| TopN_24                         | 8.00     | root      |                 | Column#13, offset:0, count:562300838                                                                                                                                                                                                               |\n| \u2514\u2500HashAgg_29                    | 8.00     | root      |                 | group by:Column#18, Column#19, funcs:avg(distinct Column#17)->Column#13                                                                                                                                                                            |\n|   \u2514\u2500Projection_59               | 8.00     | root      |                 | cast(Column#9, decimal(20,0) UNSIGNED BINARY)->Column#17, test.t43fc4f8a.col_51->Column#18, test.t43fc4f8a.col_49->Column#19                                                                                                                       |\n|     \u2514\u2500Projection_30             | 8.00     | root      |                 | test.t43fc4f8a.col_49, test.t43fc4f8a.col_51, Column#9                                                                                                                                                                                             |\n|       \u2514\u2500HashJoin_44             | 8.00     | root      |                 | CARTESIAN inner join                                                                                                                                                                                                                               |\n|         \u251c\u2500Selection_45(Build)   | 0.80     | root      |                 | in(Column#9, 13307631398032338238, 10696905560280898882, 5314440087685082217, 17229250596274672311)                                                                                                                                                |\n|         \u2502 \u2514\u2500HashAgg_46          | 1.00     | root      |                 | group by:Column#16, funcs:bit_or(Column#15)->Column#9                                                                                                                                                                                              |\n|         \u2502   \u2514\u2500Projection_58     | 0.00     | root      |                 | cast(test.tlcf30036b.col_71, bigint BINARY)->Column#15, test.tlcf30036b.col_72->Column#16                                                                                                                                                          |\n|         \u2502     \u2514\u2500Selection_47    | 0.00     | root      |                 | not(lt(test.tlcf30036b.col_72, 2026-03-29 00:00:00.000000)), or(or(eq(test.tlcf30036b.col_72, 2004-03-24 00:00:00.000000), eq(test.tlcf30036b.col_72, 2006-02-04 00:00:00.000000)), or(eq(test.tlcf30036b.col_72, 1993-06-20 00:00:00.000000), 0)) |\n|         \u2502       \u2514\u2500TableDual_48  | 0.00     | root      |                 | rows:0                                                                                                                                                                                                                                             |\n|         \u2514\u2500TableReader_57(Probe) | 10.00    | root      | partition:all   | data:Selection_56                                                                                                                                                                                                                                  |\n|           \u2514\u2500Selection_56        | 10.00    | cop[tikv] |                 | nulleq(test.t43fc4f8a.col_49, 11261)                                                                                                                                                                                                               |\n|             \u2514\u2500TableFullScan_55  | 10000.00 | cop[tikv] | table:t43fc4f8a | keep order:false, stats:pseudo                                                                                                                                                                                                                     |\n+---------------------------------+----------+-----------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n\n```\n### 4. What is your TiDB version? (Required)\n\n<!-- Paste the output of SELECT tidb_version() -->\n\n",
    "state": "closed",
    "created_at": "2025-07-03T10:56:06Z",
    "updated_at": "2025-07-04T06:13:07Z",
    "closed_at": "2025-07-04T06:13:07Z",
    "labels": [
      "type/bug",
      "sig/planner",
      "severity/moderate",
      "fuzz/randomtest"
    ],
    "comments_count": 0,
    "author": "hawkingrei",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "tikv"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 4
  },
  {
    "id": 3151903020,
    "number": 61766,
    "title": "Restore telemetry functionality using logging instead of network reporting",
    "body": "## Enhancement\nIn version 7.5, we removed the telemetry-related code by https://github.com/pingcap/tidb/pull/51202. It's due to concerns that network transmission of usage data might cause confusion or misunderstanding for users. This was a proactive decision to prioritize user trust and transparency.\n\nHowever, we still have a legitimate need to analyze feature usage in our cloud environment for the purposes of improving product quality and user experience. Therefore, we propose to restore the telemetry functionality, with the following important changes:\n\nNo network reporting: Telemetry data will no longer be transmitted over the public network.\n\nLogging-based only: Usage data will be recorded locally via logs.\n\nCloud default: The telemetry feature will be enabled by default in cloud deployments. Users will be able to manually disable telemetry logging if they choose to.",
    "state": "closed",
    "created_at": "2025-06-17T03:18:46Z",
    "updated_at": "2025-07-04T05:25:35Z",
    "closed_at": "2025-07-04T05:19:58Z",
    "labels": [
      "type/bug",
      "type/enhancement",
      "sig/sql-infra",
      "affects-8.1",
      "affects-8.5"
    ],
    "comments_count": 0,
    "author": "Defined2014",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "cloud",
      "backup"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 5
  },
  {
    "id": 3195739191,
    "number": 62153,
    "title": "instanceplancache\u2018s test takes too much time.",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\n![Image](https://github.com/user-attachments/assets/93c9e21e-b564-446d-a898-32d9ec70e114)\n\n```\n    testkit.go:246: \n        \tError Trace:\t/Users/weizhenwang/devel/opensource/tidb/pkg/testkit/testkit.go:246\n        \t            \t\t\t\t/Users/weizhenwang/devel/opensource/tidb/pkg/testkit/testkit.go:181\n        \t            \t\t\t\t/Users/weizhenwang/devel/opensource/tidb/pkg/planner/core/casetest/instanceplancache/main_test.go:220\n        \t            \t\t\t\t/opt/homebrew/Cellar/go/1.24.4/libexec/src/runtime/asm_arm64.s:1223\n        \tError:      \tReceived unexpected error:\n        \t            \t[executor:8118]Failed to build executor\n        \t            \tjoin's inner condition should be empty\n        \t            \tgithub.com/pingcap/tidb/pkg/executor.(*executorBuilder).buildHashJoinV2FromChildExecs\n        \t            \t\t/Users/weizhenwang/devel/opensource/tidb/pkg/executor/builder.go:1647\n        \t            \tgithub.com/pingcap/tidb/pkg/executor.(*executorBuilder).buildHashJoinV2\n        \t            \t\t/Users/weizhenwang/devel/opensource/tidb/pkg/executor/builder.go:1594\n        \t            \tgithub.com/pingcap/tidb/pkg/executor.(*executorBuilder).buildHashJoin\n        \t            \t\t/Users/weizhenwang/devel/opensource/tidb/pkg/executor/builder.go:1761\n        \t            \tgithub.com/pingcap/tidb/pkg/executor.(*executorBuilder).build\n        \t            \t\t/Users/weizhenwang/devel/opensource/tidb/pkg/executor/builder.go:263\n        \t            \tgithub.com/pingcap/tidb/pkg/executor.(*executorBuilder).buildProjection\n        \t            \t\t/Users/weizhenwang/devel/opensource/tidb/pkg/executor/builder.go:2095\n        \t            \tgithub.com/pingcap/tidb/pkg/executor.(*executorBuilder).build\n        \t            \t\t/Users/weizhenwang/devel/opensource/tidb/pkg/executor/builder.go:279\n        \t            \tgithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).buildExecutor\n        \t            \t\t/Users/weizhenwang/devel/opensource/tidb/pkg/executor/adapter.go:1240\n        \t            \tgithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).Exec\n        \t            \t\t/Users/weizhenwang/devel/opensource/tidb/pkg/executor/adapter.go:581\n        \t            \tgithub.com/pingcap/tidb/pkg/session.runStmt\n        \t            \t\t/Users/weizhenwang/devel/opensource/tidb/pkg/session/session.go:2337\n        \t            \tgithub.com/pingcap/tidb/pkg/session.(*session).ExecuteStmt\n        \t            \t\t/Users/weizhenwang/devel/opensource/tidb/pkg/session/session.go:2199\n        \t            \tgithub.com/pingcap/tidb/pkg/testkit.(*TestKit).ExecWithContext\n        \t            \t\t/Users/weizhenwang/devel/opensource/tidb/pkg/testkit/testkit.go:414\n        \t            \tgithub.com/pingcap/tidb/pkg/testkit.(*TestKit).MustQueryWithContext\n        \t            \t\t/Users/weizhenwang/devel/opensource/tidb/pkg/testkit/testkit.go:245\n        \t            \tgithub.com/pingcap/tidb/pkg/testkit.(*TestKit).MustQuery\n        \t            \t\t/Users/weizhenwang/devel/opensource/tidb/pkg/testkit/testkit.go:181\n        \t            \tgithub.com/pingcap/tidb/pkg/planner/core/casetest/instanceplancache.executeWorker\n        \t            \t\t/Users/weizhenwang/devel/opensource/tidb/pkg/planner/core/casetest/instanceplancache/main_test.go:220\n        \t            \truntime.goexit\n        \t            \t\t/opt/homebrew/Cellar/go/1.24.4/libexec/src/runtime/asm_arm64.s:1223\n        \tTest:       \tTestInstancePlanCache\n```\n\n<!-- a step by step guide for reproducing the bug. -->\n\n### 2. What did you expect to see? (Required)\n\n### 3. What did you see instead (Required)\n\n### 4. What is your TiDB version? (Required)\n\n<!-- Paste the output of SELECT tidb_version() -->\n\n",
    "state": "open",
    "created_at": "2025-07-02T12:26:30Z",
    "updated_at": "2025-07-04T03:26:06Z",
    "closed_at": null,
    "labels": [
      "type/bug",
      "sig/planner",
      "component/test",
      "severity/moderate"
    ],
    "comments_count": 1,
    "author": "hawkingrei",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "docker",
      "backup"
    ],
    "error_patterns": [
      "error:"
    ],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 6
  },
  {
    "id": 2995458813,
    "number": 60576,
    "title": "release: v8.1.3",
    "body": "**Disclaimer**\nThe dates published in this issue are for planning purposes only. It is intended solely to help you plan your projects. A date that exists in the future should not be considered a firm release date as the release and timing of releases are subject to change at any time and are at PingCAP's sole discretion.\n\n**Candidate SHA:**\nTBD\n\nWorking Tags: TBD\n\n**Check the diff in the current version:**\nSee the difference from the commit perspective:\nTBD\n\n\n**Release process checklist**\n\n- [ ] 0. Announce the release plan.\n \n- [ ] 1. Code freeze and RC build: TBD\n\n- [ ] 2. Qualifying the release.\n\n- [ ] 3. Docs preparing for release.\n\n- [ ] 4. The release qualified.\n\n- [ ] 5. Docs are ready for release.\n\n**Release date: TBD**\n\nDo not proceed below until the release date.\n\n- [ ] 6. Publish TiDB Release\n\n> - [ ] fill in Candidate SHA above\n> \n> - [ ] fill in the release tag\n\n- [ ] 7. Update docs\n\n- [ ] 8. Update the official website",
    "state": "open",
    "created_at": "2025-04-15T07:34:07Z",
    "updated_at": "2025-07-04T01:23:58Z",
    "closed_at": null,
    "labels": [],
    "comments_count": 1,
    "author": "EmmaDuDu",
    "assignees": [],
    "milestone": null,
    "category": "other",
    "tech_context": [
      "pd"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 2
  },
  {
    "id": 3026851012,
    "number": 60924,
    "title": "tablemode need RefreshMeta interface to reload tidb schema diff when BR log restore occur exchange partition",
    "body": "## Enhancement\nWhen BR uses Tablemode, which is expected to be set to RestoreMode when full restore batch crate tables, including tables created during log backup. However, if an exchange partition occurs during log backup, the table will still be a partition during full restore. In log restoring, the table ID will exchange with partition ID, which exchange by `meta kv` directly instead of infoschema, so the table mode cannot be modified for the table(since the new table ID is not store in infoschema).",
    "state": "closed",
    "created_at": "2025-04-29T02:56:50Z",
    "updated_at": "2025-07-03T17:28:50Z",
    "closed_at": "2025-05-15T13:59:10Z",
    "labels": [
      "type/enhancement"
    ],
    "comments_count": 1,
    "author": "River2000i",
    "assignees": [],
    "milestone": null,
    "category": "enhancement",
    "tech_context": [
      "backup"
    ],
    "error_patterns": [],
    "has_solution": true,
    "is_recent": true,
    "engagement_score": 3
  },
  {
    "id": 3141298933,
    "number": 61715,
    "title": "Failed to build executor",
    "body": "## Bug Report\n\n### 1. Minimal reproduce step (Required)\n\n```sql\ncreate table t0(vkey integer, c3 varchar(0));\ncreate table t1(vkey integer, c10 integer);\ncreate table t2(c12 integer, c13 integer, c14 varchar(0), c15 double);\ncreate table t3(vkey varchar(0), c20 integer);\nselect 0 from t2 join(t3 join t0 a on 0) left join(t1 b left join t1 c on 0) on(c20 = b.vkey) on(c13 = a.vkey) join(select c14 d from(t2 join t3 on c12 = vkey)) e on(c3 = d) where nullif(c15, case when(c.c10) then 0 end); -- ERROR 8118 (HY000) at line 1: Failed to build executor\n```\n\n\n### 2. What did you expect to see? (Required)\nNo error\n\n### 3. What did you see instead (Required)\n\n\n### 4. What is your TiDB version? (Required)\n\n`tiup playground nightly --host 0.0.0.0 --kv 3 --tiflash 3`\n```bash\n8.0.11-TiDB-v9.0.0-beta.1.pre-554-gb1a5536a64-dirty\n```\n\n\n",
    "state": "open",
    "created_at": "2025-06-12T19:07:42Z",
    "updated_at": "2025-07-03T16:30:20Z",
    "closed_at": null,
    "labels": [
      "type/bug",
      "sig/planner",
      "severity/major",
      "fuzz/sqlancer",
      "may-affects-6.5",
      "may-affects-7.1",
      "may-affects-7.5",
      "may-affects-8.1",
      "may-affects-8.5"
    ],
    "comments_count": 1,
    "author": "bajinsheng",
    "assignees": [
      "hawkingrei"
    ],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "tiflash"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 14
  },
  {
    "id": 3198258982,
    "number": 62180,
    "title": "Accelerate TTL through the index on TTL column",
    "body": "## Enhancement\n\n## Background\n\nFor the current implementation, if the TTL choose to use the index on TTL column, the performance will even be worse. It's because TTL using the index will scan much more rows than scanning the table directly:\n\n### Duplicate Scan caused by Split Scan Range\n\nThe scan task is split by primary key, then the query SQLs are like:\n\n```sql\nSELECT LOW_PRIORITY SQL_NO_CACHE `id` FROM `test`.`t` WHERE `id` >= ? AND `id` < ? AND `created_time` < FROM_UNIXTIME(?) ORDER BY `id` ASC LIMIT ?;\n```\n\nIf using the index, it'll scan the index but only get the data within id range. If we have 64 tasks, the range of index will at least be scanned 64 times.\n\n### Duplicate Scan caused by Scan Batch\n\n\nThe scan is batched / paged according to the primary key, which makes it much worse:\n\n```sql\nSELECT LOW_PRIORITY SQL_NO_CACHE `id` FROM `test`.`t` WHERE `id` >= ? AND `id` < ? AND `created_time` < FROM_UNIXTIME(?) ORDER BY `id` ASC LIMIT ?;\nSELECT LOW_PRIORITY SQL_NO_CACHE `id` FROM `test`.`t` WHERE `id` > ? AND `id` < ? AND `created_time` < FROM_UNIXTIME(?) ORDER BY `id` ASC LIMIT ?;\n```\n\nEvery single scan will only get 500 rows (tidb_ttl_scan_batch_size). When scanning the index, all expired data will be scanned to properly sort according to id. Therefore, the index range will be repeatedly scanned for `EXPIRED_DATA_ROWS_WITHIN_RANGE / 500` times.\n\nIn conclusion, the index will be scanned for `EXPIRED_DATA_ROWS / 500` times. Usually, we can estimate the `EXPIRED_DATA_ROWS` by `TTL_JOB_INTERVAL / DATA_LIFE_TIME * TABLE_SIZE`. Then using index will scan totally `(TTL_JOB_INTERVAL / DATA_LIFE_TIME * TABLE_SIZE)^2 / 500` rows, and using table scan will scan TABLE_SIZE rows in total. Therefore, if `(TTL_JOB_INTERVAL / DATA_LIFE_TIME)^2 * TABLE_SIZE` is greater than 1, using index will scan more rows.\n\n## Proposal\n\nTTL should identify the index which contains the TTL column automatically. The index should meet the following condition:\n\n1. The index should contain the TTL column.\n2. If the index is a composite index, it must have the TTL column as prefix.\n\nThe TTL process has to make the following changes:\n\n1. The scan batch SQL will need to ORDER BY the TTL column, and add a hint to use the index to ensure that the performance is stable.\n\n```sql\nSELECT LOW_PRIORITY SQL_NO_CACHE `id` FROM `test`.`t` force index(xxx) WHERE `created_time` < FROM_UNIXTIME(?) ORDER BY `created_time` ASC, `id` ASC LIMIT ?;\nSELECT LOW_PRIORITY SQL_NO_CACHE `id` FROM `test`.`t` force index(xxx) WHERE ((created_time, id) > (FROM_UNIXTIME(?), ?)) AND `created_time` < FROM_UNIXTIME(?) ORDER BY `created_time` ASC, `id` ASC LIMIT ?;\n```\n \n2. Split the subtasks by TTL column, but not primary.  \n    1. Add a new column split_by to the mysql.tidb_ttl_task table to represent the secondary index id. If no index is selected, the column should be NULL to represent that this table is split by row id or clustered primary key.  \n    2. If the worker / manager finds that the index doesn't exist, they should report an error for the task.\n\nEven only with the first modification, using index can be faster than scanning table if `64 * TTL_JOB_INTERVAL / DATA_LIFE_TIME` is smaller than 1, because the index will only be repeatedly scanned 64 times.\nWe can also try to make 64 configurable, like adding a `TTL_TASK_CNT` so that the user can configure the task counts by themselves. The current task count is set as `min(tableRegionCount, max(64, tikvStoreCount))`,",
    "state": "open",
    "created_at": "2025-07-03T06:53:24Z",
    "updated_at": "2025-07-03T16:23:10Z",
    "closed_at": null,
    "labels": [
      "type/enhancement"
    ],
    "comments_count": 1,
    "author": "YangKeao",
    "assignees": [
      "YangKeao"
    ],
    "milestone": null,
    "category": "enhancement",
    "tech_context": [
      "mysql",
      "performance",
      "tikv"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 6
  },
  {
    "id": 3199688574,
    "number": 62196,
    "title": "wrong RegardNULLAsPoint value in the interal sql",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\nadd assertion like \n\n<img width=\"1093\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/8d19860d-19e0-4b53-9ee9-11466f7ff1e2\" />\n\n<!-- a step by step guide for reproducing the bug. -->\n\n### 2. What did you expect to see? (Required)\nsuccess to run.\n### 3. What did you see instead (Required)\n\nfail to run \n\n```\n--- FAIL: TestGetOracleTime (35.78s)\npanic: assert failed [recovered]\n\tpanic: assert failed [recovered]\n\tpanic: assert failed\ngoroutine 122 [running]:\ntesting.tRunner.func1.2({0x8f63d40, 0xc0089bced0})\n\tGOROOT/src/testing/testing.go:1632 +0x3fc\ntesting.tRunner.func1()\n\tGOROOT/src/testing/testing.go:1635 +0x6b6\npanic({0x8f63d40?, 0xc0089bced0?})\n\tGOROOT/src/runtime/panic.go:791 +0x132\ngithub.com/pingcap/tidb/pkg/executor.(*Compiler).Compile.func1()\n\tpkg/executor/compiler.go:59 +0x5a5\npanic({0x8f63d40?, 0xc0089bced0?})\n\tGOROOT/src/runtime/panic.go:791 +0x132\ngithub.com/pingcap/tidb/pkg/util/intest.doPanic({0x0, 0x0}, {0x0, 0x0, 0x0})\n\tpkg/util/intest/assert_common.go:58 +0x79\ngithub.com/pingcap/tidb/pkg/util/intest.doAssert(0x0, {0x0, 0x0, 0x0})\n\tpkg/util/intest/assert_common.go:30 +0x6e\ngithub.com/pingcap/tidb/pkg/util/intest.Assert(0x0, {0x0, 0x0, 0x0})\n\tpkg/util/intest/assert.go:25 +0x9e\ngithub.com/pingcap/tidb/pkg/util/ranger.getPotentialEqOrInColOffset(0xc00867aee0, {0xa6e1c60, 0xc00867aaf0}, {0xc00b624108, 0x1, 0x1})\n\tpkg/util/ranger/detacher.go:141 +0x87d\ngithub.com/pingcap/tidb/pkg/util/ranger.ExtractEqAndInCondition(0xc00867aee0, {0xc006bb3580, 0x2, 0x2}, {0xc00b624108, 0x1, 0x1}, {0xc008702038, 0x1, 0x1})\n\tpkg/util/ranger/detacher.go:735 +0x22a\ngithub.com/pingcap/tidb/pkg/util/ranger.(*rangeDetacher).detachCNFCondAndBuildRangeForIndex(0xc006cd86d0, {0xc006bb3580, 0x2, 0x2}, {0xc00b624118, 0x1, 0x1}, 0x1)\n\tpkg/util/ranger/detacher.go:401 +0x1ab\ngithub.com/pingcap/tidb/pkg/util/ranger.(*rangeDetacher).detachCondAndBuildRangeForCols(0xc006cd86d0)\n\tpkg/util/ranger/detacher.go:1097 +0x45b\ngithub.com/pingcap/tidb/pkg/util/ranger.DetachCondAndBuildRangeForIndex(0xc00867aee0, {0xc006bb3580, 0x2, 0x2}, {0xc00b624108, 0x1, 0x1}, {0xc008702038, 0x1, 0x1}, ...)\n\tpkg/util/ranger/detacher.go:1032 +0x185\ngithub.com/pingcap/tidb/pkg/planner/core.detachCondAndBuildRangeForPath({0xa6a0058, 0xc005f94af0}, 0xc007f60d80, {0xc006bb3580, 0x2, 0x2}, 0xc0091a1920)\n\tpkg/planner/core/stats.go:397 +0x2a5\ngithub.com/pingcap/tidb/pkg/planner/core.fillIndexPath(0xc00655b508, 0xc007f60d80, {0xc006bb3580, 0x2, 0x2})\n\tpkg/planner/core/stats.go:205 +0xa25\ngithub.com/pingcap/tidb/pkg/planner/core.deriveStats4DataSource({0xa6de968, 0xc00655b508})\n\tpkg/planner/core/stats.go:141 +0xaa5\ngithub.com/pingcap/tidb/pkg/planner/core/operator/logicalop.(*DataSource).DeriveStats(0xc00655b508, {0x22c16ac?, 0x22c72f5?, 0x1?}, 0x8?, {0x8?, 0xc006cd8d40?, 0x224ffeb?}, {0xfc31300, 0x0, ...})\n\tpkg/planner/core/operator/logicalop/logical_datasource.go:308 +0x52\ngithub.com/pingcap/tidb/pkg/planner/core/operator/logicalop.(*BaseLogicalPlan).RecursiveDeriveStats(0xc00655b528, {0x0, 0x0, 0x0})\n\tpkg/planner/core/operator/logicalop/base_logical_plan.go:235 +0x56f\ngithub.com/pingcap/tidb/pkg/planner/core/operator/logicalop.(*BaseLogicalPlan).RecursiveDeriveStats(0xc006738620, {0x0, 0x0, 0x0})\n\tpkg/planner/core/operator/logicalop/base_logical_plan.go:226 +0x2b8\ngithub.com/pingcap/tidb/pkg/planner/core/operator/logicalop.(*BaseLogicalPlan).RecursiveDeriveStats(0xc006bace20, {0x0, 0x0, 0x0})\n\tpkg/planner/core/operator/logicalop/base_logical_plan.go:226 +0x2b8\ngithub.com/pingcap/tidb/pkg/planner/core.physicalOptimize({0xa6de688, 0xc006bace00}, 0xc0087cffa8)\n\tpkg/planner/core/optimizer.go:1133 +0x1f9\ngithub.com/pingcap/tidb/pkg/planner/core.VolcanoOptimize({0xa642e10, 0xc0098a8e10}, {0xa6a0058, 0xc005f94af0}, 0x61002, {0xa6de688, 0xc006bace00})\n\tpkg/planner/core/optimizer.go:362 +0x245\ngithub.com/pingcap/tidb/pkg/planner/core.doOptimize({0xa642e10, 0xc0098a8e10}, {0xa6a0058, 0xc005f94af0}, 0x61002, {0xa6de688, 0xc006bace00})\n\tpkg/planner/core/optimizer.go:286 +0x1b5\ngithub.com/pingcap/tidb/pkg/planner/core.DoOptimize({0xa642e10, 0xc0098a8e10}, {0xa6a0058, 0xc005f94af0}, 0x61002, {0xa6de688, 0xc006bace00})\n\tpkg/planner/core/optimizer.go:411 +0x1f6\ngithub.com/pingcap/tidb/pkg/planner/core.(*PlanBuilder).buildUpdate(0xc0071d90e0, {0xa642e10, 0xc0098a8e10}, 0xc00bd98210)\n\tpkg/planner/core/logical_plan_builder.go:5604 +0x1a5b\ngithub.com/pingcap/tidb/pkg/planner/core.(*PlanBuilder).Build(0xc0071d90e0, {0xa642e10, 0xc0098a8e10}, 0xc006cda668)\n\tpkg/planner/core/planbuilder.go:549 +0xa25\ngithub.com/pingcap/tidb/pkg/planner.buildLogicalPlan({0xa642e10, 0xc0098a8e10}, {0xa6a0058, 0xc005f94af0}, 0xc006cda668, 0xc0071d90e0)\n\tpkg/planner/optimize.go:571 +0x365\ngithub.com/pingcap/tidb/pkg/planner.optimize({0xa642e10, 0xc0098a8e10}, {0xa6a0058, 0xc005f94af0}, 0xc006cda668, {0xa6a3470, 0xc00919e840})\n\tpkg/planner/optimize.go:490 +0x7da\ngithub.com/pingcap/tidb/pkg/planner.optimizeNoCache({0xa642e10, 0xc0098a8e10}, {0xa6e6b28, 0xc001b61b88}, 0xc006d5bc50, {0xa6a3470, 0xc00919e840})\n\tpkg/planner/optimize.go:357 +0x1cd0\ngithub.com/pingcap/tidb/pkg/planner.Optimize({0xa642e10, 0xc0098a8e10}, {0xa6e6b28, 0xc001b61b88}, 0xc006d5bc50, {0xa6a3470, 0xc00919e840})\n\tpkg/planner/optimize.go:206 +0xc47\ngithub.com/pingcap/tidb/pkg/executor.(*Compiler).Compile(0xc006cdb000, {0xa642e10, 0xc0098a8e10}, {0xa661d88, 0xc00bd98210})\n\tpkg/executor/compiler.go:102 +0x951\ngithub.com/pingcap/tidb/pkg/session.(*session).ExecuteStmt(0xc001b61b88, {0xa642e10, 0xc0098a8e10}, {0xa661d88, 0xc00bd98210})\n\tpkg/session/session.go:2146 +0x12e5\ngithub.com/pingcap/tidb/pkg/session.(*session).ExecuteInternal(0xc001b61b88, {0xa642e10, 0xc0098a8e10}, {0x9b2e4ad, 0x51}, {0xc006c025c0, 0x4, 0x4})\n\tpkg/session/session.go:1571 +0x3f2\ngithub.com/pingcap/tidb/pkg/session.mustExecute({0xa6fbdd0, 0xc001b61b88}, {0x9b2e4ad, 0x51}, {0xc006c025c0, 0x4, 0x4})\n\tpkg/session/bootstrap.go:1321 +0x143\ngithub.com/pingcap/tidb/pkg/session.writeStmtSummaryVars({0xa6fbdd0, 0xc001b61b88})\n\tpkg/session/upgrade.go:992 +0x19f\ngithub.com/pingcap/tidb/pkg/session.doDMLWorks({0xa6fbdd0, 0xc001b61b88})\n\tpkg/session/bootstrap.go:1294 +0xc71\ngithub.com/pingcap/tidb/pkg/session.bootstrap({0xa6fbdd0, 0xc001b61b88})\n\tpkg/session/bootstrap.go:840 +0x50f\ngithub.com/pingcap/tidb/pkg/session.runInBootstrapSession({0xa694a88, 0xc0021af860}, 0x0)\n\tpkg/session/session.go:3792 +0x7c8\ngithub.com/pingcap/tidb/pkg/session.bootstrapSessionImpl({0xa642c50, 0xfc31300}, {0xa694a88, 0xc0021af860}, 0x9be9220)\n\tpkg/session/session.go:3529 +0x634\ngithub.com/pingcap/tidb/pkg/session.BootstrapSession({0xa694a88, 0xc0021af860})\n\tpkg/session/session.go:3465 +0x5a\ngithub.com/pingcap/tidb/pkg/store/gcworker.bootstrap({0xa690a50, 0xc0012dad00}, {0xa694a88, 0xc0021af860}, 0xa7a358200)\n\tpkg/store/gcworker/gc_worker_test.go:1690 +0x70\ngithub.com/pingcap/tidb/pkg/store/gcworker.createGCWorkerSuiteWithStoreType(0xc0012dad00, 0x1, 0xa7a358200)\n\tpkg/store/gcworker/gc_worker_test.go:177 +0x4da\ngithub.com/pingcap/tidb/pkg/store/gcworker.createGCWorkerSuite(0xc0012dad00)\n\tpkg/store/gcworker/gc_worker_test.go:149 +0x47\ngithub.com/pingcap/tidb/pkg/store/gcworker.TestGetOracleTime(0xc0012dad00)\n\tpkg/store/gcworker/gc_worker_test.go:303 +0x4a\ntesting.tRunner(0xc0012dad00, 0x9be84c0)\n\tGOROOT/src/testing/testing.go:1690 +0x227\ncreated by testing.(*T).Run in goroutine 1\n\tGOROOT/src/testing/testing.go:1743 +0x826\n```\n\n### 4. What is your TiDB version? (Required)\n\n<!-- Paste the output of SELECT tidb_version() -->\n\n",
    "state": "open",
    "created_at": "2025-07-03T14:56:04Z",
    "updated_at": "2025-07-03T15:35:14Z",
    "closed_at": null,
    "labels": [
      "type/bug",
      "sig/planner",
      "severity/major",
      "affects-7.5",
      "affects-8.1",
      "affects-8.5"
    ],
    "comments_count": 0,
    "author": "hawkingrei",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "docker",
      "pd"
    ],
    "error_patterns": [
      "panic:"
    ],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 6
  },
  {
    "id": 2856518185,
    "number": 59567,
    "title": "Indexed and without indexed queries return inconsistency results after network partition inject and recovery.",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\n<!-- a step by step guide for reproducing the bug. -->\n\nDeploy 5 tikv nodes, 3 pd nodes and 1 tidb node in K8S.\n\n1. running transaction workload.\n2. some online DDL threads randomly add index or drop index.\n3. network partition: [basic-tikv-0], [basic-tikv-1, basic-tikv-2, basic-tikv-3, basic-tikv-4]\n4. network partition recovery before the transaction workload finish.\n5. admin check table but failed.\n\n\n\nThe admin check failed statements happen after network partition recovery.\n\n\n\nmore details can get from the following files.\n\n[index_inconsistency.zip](https://github.com/user-attachments/files/18819578/index_inconsistency.zip)\n\nin zip:\n\n> - schema_and_init_data: initial schema, state and data. \n> - transaction_workload: execute concurrently.\n> - ddl_sequence: DDL threads execute during transaction workload.\n> - fault_injection: inject network partition.\n> - tidb_logs: tidb and tikv logs.\n\n\n\ntable4 schema:\n\n```sql\nMysql > show create table table4;\nCREATE TABLE `table4` (\n  `pkId` int(11) DEFAULT NULL,\n  `pkAttr0` int(11) NOT NULL,\n  `commonAttr0_0` double(18,6) DEFAULT NULL,\n  `commonAttr1_0` decimal(10,2) DEFAULT NULL,\n  `commonAttr2_0` varchar(10) DEFAULT NULL,\n  `commonAttr3_0` int(11) DEFAULT NULL,\n  `commonAttr4_0` double(14,4) DEFAULT NULL,\n  PRIMARY KEY (`pkAttr0`) /*T![clustered_index] NONCLUSTERED */,\n  KEY `table4index_pk` (`pkAttr0`),\n  KEY `table4index_commAttr4` (`commonAttr4_0`),\n  KEY `table4index_commAttr0` (`commonAttr0_0`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin\nPARTITION BY HASH (`pkAttr0`) PARTITIONS 2\n```\n\n\n\n### 2. What did you expect to see? (Required)\n\nAfter network partition recovery and all transaction workload done:\n\n```sql\nmysql> admin check table table4;\n-- ok\n\nmysql> admin check index table4 table4index_commAttr4;\n-- ok\n\nmysql> select count(*) from table4;\n+----------+\n| count(*) |\n+----------+\n|       30 |\n+----------+\n1 row in set (0.00 sec)\n\nmysql> select count(*) from table4 force index(table4index_commAttr4);\n+----------+\n| count(*) |\n+----------+\n|       30 |\n+----------+\n1 row in set (0.00 sec)\n```\n\n\n\n\n\n### 3. What did you see instead (Required)\n\nAfter network partition recovery and all transaction workload done:\n\n```sql\nmysql> admin check table table4;\nERROR 8003 (HY000): table4 err:[admin:8223]index:<nil> != record:&admin.RecordData{Handle:8, Values:[]types.Datum{types.Datum{k:0x0, decimal:0x0, length:0x0, i:0, collation:\"\", b:[]uint8(nil), x:interface {}(nil)}}}\n\nmysql> admin check index table4 table4index_commAttr4;\nERROR 8003 (HY000): table count 30 != index(table4index_commAttr4) count 16\n\nmysql> select count(*) from table4;\n+----------+\n| count(*) |\n+----------+\n|       30 |\n+----------+\n1 row in set (0.00 sec)\n\nmysql> select count(*) from table4 force index(table4index_commAttr4);\n+----------+\n| count(*) |\n+----------+\n|       16 |\n+----------+\n1 row in set (0.00 sec)\n```\n\n\n\nThe number of rows return from indexed and without indexed queries is inconsistent.\n\n\n\n### 4. What is your TiDB version? (Required)\n\n<!-- Paste the output of SELECT tidb_version() -->\n\nTiDB v5.4\n\nRelease Version: v5.4.0\nEdition: Community\nGit Commit Hash: 55f3b24c1c9f506bd652ef1d162283541e428872\nGit Branch: heads/refs/tags/v5.4.0\nUTC Build Time: 2022-01-25 08:39:26\nGoVersion: go1.16.4\nRace Enabled: false\nTiKV Min Version: v3.0.0-60965b006877ca7234adaced7890d7b029ed1306\nCheck Table Before Drop: false\n\n\n\n\n\n\n\n\n\n",
    "state": "closed",
    "created_at": "2025-02-17T01:54:15Z",
    "updated_at": "2025-07-03T12:34:18Z",
    "closed_at": "2025-07-03T12:34:18Z",
    "labels": [
      "type/bug",
      "severity/critical",
      "affects-5.4",
      "may-affects-6.1",
      "may-affects-6.5",
      "may-affects-7.1",
      "component/ddl",
      "may-affects-7.5",
      "may-affects-8.1",
      "may-affects-8.5",
      "affects-9.0"
    ],
    "comments_count": 4,
    "author": "yanghy233",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "kubernetes",
      "mysql",
      "backup",
      "tikv",
      "pd"
    ],
    "error_patterns": [],
    "has_solution": true,
    "is_recent": false,
    "engagement_score": 19
  },
  {
    "id": 3174263101,
    "number": 61989,
    "title": "flaky test TestTiFlashLateMaterialization",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\n<!-- a step by step guide for reproducing the bug. -->\n\n### 2. What did you expect to see? (Required)\n\n### 3. What did you see instead (Required)\n\n```\n    plan_test.go:40: \n        \tError Trace:\tpkg/planner/core/casetest/plan_test.go:40\n        \t            \t\t\t\tpkg/planner/core/casetest/tiflash_predicate_push_down_test.go:81\n        \tError:      \tNot equal: \n        \t            \texpected: 3\n        \t            \tactual  : 4\n        \tTest:       \tTestTiFlashLateMaterialization\n```\n### 4. What is your TiDB version? (Required)\n\n<!-- Paste the output of SELECT tidb_version() -->\n\n",
    "state": "open",
    "created_at": "2025-06-25T05:34:36Z",
    "updated_at": "2025-07-03T11:44:03Z",
    "closed_at": null,
    "labels": [
      "type/bug",
      "sig/planner",
      "component/test",
      "severity/moderate"
    ],
    "comments_count": 2,
    "author": "hawkingrei",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "tiflash"
    ],
    "error_patterns": [
      "error:"
    ],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 8
  },
  {
    "id": 3076458712,
    "number": 61210,
    "title": "Update self version failure causes DDL to get stuck while MDL is disabled",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\nSimilar to https://github.com/pingcap/tidb/issues/43755, the difference is that MDL was disabled, and DDL job got stuck when tidb server failed to update schema version:\n\n```\n[2025/05/13 08:02:06.117 +08:00] [Info] [domain.go:215] [\"diff load InfoSchema success\"] [currentSchemaVersion=1217026] [neededSchemaVersion=1217027] [\"start time\"=14.630741ms] [phyTblIDs=\"[1398997,1399737]\"] [actionTypes=\"[2048,2048]\"]\n[2025/05/13 08:02:08.118 +08:00] [Warn] [util.go:299] [\"[ddl] etcd-cli put kv failed\"] [key=/tidb/ddl/all_schema_versions/037a5fde-1b5e-4ad1-a2a0-dfa583e6bd5e] [value=1217027] [error=\"context deadline exceeded\"] [retryCnt=0]\n[2025/05/13 08:02:08.148 +08:00] [Info] [domain.go:517] [\"update self version failed\"] [oldSchemaVersion=1217026] [neededSchemaVersion=1217027] [error=\"context deadline exceeded\"]\n```\nAnd DDL owner was continuously checking for unsynced versions\n\n```\n[2025/05/13 08:02:11.951 +08:00] [Info] [syncer.go:352] [\"[ddl] syncer check all versions, someone is not synced, continue checking\"] [ddl=/tidb/ddl/all_schema_versions/4e3becf5-9448-4cd6-9208-d845b0679638] [currentVer=1217026] [latestVer=1217027]\n...\n[2025/05/13 10:47:23.830 +08:00] [Info] [syncer.go:352] [\"[ddl] syncer check all versions, someone is not synced, continue checking\"] [ddl=/tidb/ddl/all_schema_versions/4e3becf5-9448-4cd6-9208-d845b0679638] [currentVer=1217026] [latestVer=1217027]\n```\n\n### 2. What did you expect to see? (Required)\n\nDDL can update version after recovering from write failure.\n\n### 3. What did you see instead (Required)\n\nDDL execution is stuck, however, the workaround is simple, just execute another DDL.\n\n### 4. What is your TiDB version? (Required)\n\nv6.5.6\n",
    "state": "open",
    "created_at": "2025-05-20T10:07:19Z",
    "updated_at": "2025-07-03T10:04:24Z",
    "closed_at": null,
    "labels": [
      "type/bug",
      "severity/major",
      "affects-6.1",
      "affects-6.5",
      "affects-7.1",
      "component/ddl",
      "affects-7.5",
      "affects-8.1",
      "report/customer",
      "affects-8.5"
    ],
    "comments_count": 1,
    "author": "pcqz",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "replication",
      "pd"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 12
  },
  {
    "id": 3016203945,
    "number": 60804,
    "title": "Rebase auto increment not executed after second restore",
    "body": "## Bug Report\nIn the restore process, if the first restore fails but leaves partial table structures in the cluster, and the second restore uses OnExistIgnore, those pre-existing tables will be skipped.\n\nAs a result, row_id rebase is not executed for these tables, leading to incorrect auto-increment behavior.\n\nThe root cause is that batchCreateTables is not atomic.\nhttps://github.com/pingcap/tidb/blob/287f27ea0e5b7be6d75bd4c6fc9982f9d80e4cf7/pkg/ddl/table.go#L231\nSome table could become public while the whole `Create Tables` job still on going.\n\n### 1. Minimal reproduce step (Required)\n1. doing a restore with batch tables.\n2. random kill restore process, try to make createTables partial succeed.\n\n<!-- a step by step guide for reproducing the bug. -->\n\n### 2. What did you expect to see? (Required)\nAll tables in the createTables batch should either be created successfully together or fail entirely \u2014 there should be no partial success.\n### 3. What did you see instead (Required)\nAfter the restore process exited, some tables from the batch were still present, indicating a partial creation.\n### 4. What is your TiDB version? (Required)\n\n<!-- Paste the output of SELECT tidb_version() -->\nv7.5.5\n",
    "state": "open",
    "created_at": "2025-04-24T06:52:28Z",
    "updated_at": "2025-07-03T08:57:49Z",
    "closed_at": null,
    "labels": [
      "type/bug",
      "severity/major",
      "may-affects-6.1",
      "may-affects-6.5",
      "may-affects-7.1",
      "component/ddl",
      "may-affects-7.5",
      "may-affects-8.1",
      "may-affects-8.5"
    ],
    "comments_count": 1,
    "author": "3pointer",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "backup"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 11
  },
  {
    "id": 3171836739,
    "number": 61971,
    "title": "Support Pinning Owner Processes (analyze, ddl) to Specific TiDB Instances",
    "body": "## Feature Request\n\n**Is your feature request related to a problem? Please describe:**\nCurrently, owner tasks (analyze, ddl, etc.) can be randomly assigned to any TiDB server. In a mixed environment where the same servers handle both OLTP traffic and owner tasks, this can cause load imbalances. The TiDB instance acting as the owner may consume significantly more memory and CPU resources, creating bottlenecks that affect overall cluster performance.\n\nThis is a example (Owners is on tidb-7): \n![Image](https://github.com/user-attachments/assets/d3c4c090-6b31-4328-92fa-df38e1535783)\n![Image](https://github.com/user-attachments/assets/af3f4771-9b5f-4230-a270-3ac672c962b0)\n\n**Describe the feature you'd like:**\nAdd a mechanism to pin owner roles (analyze, ddl, etc.) to a designated group of TiDB instances.\nFor example:\n\t\u2022\tUse a special label (e.g., owner=true) to mark TiDB instances intended for owner roles.\n\t\u2022\tOwner roles would then only be assigned to instances with this label, allowing OLTP instances to remain dedicated to transaction processing.\n\nThis feature would help isolate background tasks and optimize resource usage across the TiDB cluster.\n\n**Describe alternatives you've considered:**\nRestart the onwer tidb-server(but it is not a good idea).\n\n**Teachability, Documentation, Adoption, Migration Strategy:**\nN/A",
    "state": "open",
    "created_at": "2025-06-24T12:34:56Z",
    "updated_at": "2025-07-03T08:33:31Z",
    "closed_at": null,
    "labels": [
      "type/feature-request"
    ],
    "comments_count": 1,
    "author": "dulao5",
    "assignees": [],
    "milestone": null,
    "category": "other",
    "tech_context": [
      "docker",
      "mysql",
      "performance"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 3
  },
  {
    "id": 3178586318,
    "number": 62020,
    "title": "query information_schema.tables too slow",
    "body": "## Bug Report\n\nsee https://asktug.com/t/topic/1043776\n\nPlease answer these questions before submitting your issue. Thanks!\n\nbefore upgrade in v7.5.6\n\n<img width=\"1559\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/8187a949-31d8-4511-95bd-15abe0e82f91\" />\n\nafter upgrade in v8.5.2\n\n<img width=\"1533\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/8e918af8-0c08-4dbb-8d33-13c1e36f2073\" />\n\n\n\n<img width=\"2967\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/7f78b34b-3381-481e-a222-2eb3cdd4e27f\" />\n\n### 1. Minimal reproduce step (Required)\n\n<!-- a step by step guide for reproducing the bug. -->\n\n### 2. What did you expect to see? (Required)\n\n### 3. What did you see instead (Required)\n\n### 4. What is your TiDB version? (Required)\n\n<!-- Paste the output of SELECT tidb_version() -->\n\nv8.5.2\n\n",
    "state": "open",
    "created_at": "2025-06-26T10:09:40Z",
    "updated_at": "2025-07-03T08:02:09Z",
    "closed_at": null,
    "labels": [
      "type/enhancement",
      "component/ddl",
      "affects-8.5"
    ],
    "comments_count": 1,
    "author": "crazycs520",
    "assignees": [],
    "milestone": null,
    "category": "enhancement",
    "tech_context": [
      "docker",
      "performance"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 5
  },
  {
    "id": 3136873112,
    "number": 61680,
    "title": "The multi-schema change DDL gets stuck while MDL is disabled",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\n\n```\nmysql> select @@tidb_enable_metadata_lock;\n+-----------------------------+\n| @@tidb_enable_metadata_lock |\n+-----------------------------+\n|                           1 |\n+-----------------------------+\n1 row in set (0.00 sec)\n\nmysql> create table t(col1 int, col2 int, col3 int);\nQuery OK, 0 rows affected (0.11 sec)\n\nmysql> set global tidb_enable_metadata_lock=off;\nQuery OK, 0 rows affected (0.02 sec)\n\nmysql> alter table t drop column col1, drop column col2;\n```\n\n\n### 2. What did you expect to see? (Required)\n\nThe alter statement returns quickly.\n### 3. What did you see instead (Required)\n\nThe statement is stuck.\n### 4. What is your TiDB version? (Required)\n\nv6.5.12\n\n",
    "state": "open",
    "created_at": "2025-06-11T13:38:48Z",
    "updated_at": "2025-07-03T07:27:33Z",
    "closed_at": null,
    "labels": [
      "type/bug",
      "severity/major",
      "affects-6.5",
      "affects-7.1",
      "component/ddl",
      "affects-7.5",
      "affects-8.1",
      "affects-8.5"
    ],
    "comments_count": 1,
    "author": "pcqz",
    "assignees": [
      "tangenta"
    ],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "mysql"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 13
  },
  {
    "id": 3144347849,
    "number": 61735,
    "title": "slice bounds out of range",
    "body": "## Bug Report\n\n### 1. Minimal reproduce step (Required)\n\n```sql\nselect distinct avg(nullif(77.15, PI())); --runtime error: slice bounds out of range [:1] with capacity 0\n```\n\n\n### 2. What did you expect to see? (Required)\nNo error\n\n### 3. What did you see instead (Required)\n\n\n### 4. What is your TiDB version? (Required)\n\n`tiup playground nightly --host 0.0.0.0 --kv 3 --tiflash 3`\n```bash\n8.0.11-TiDB-v9.0.0-beta.1.pre-554-gb1a5536a64-dirty\n```\n\n\n",
    "state": "closed",
    "created_at": "2025-06-13T18:08:36Z",
    "updated_at": "2025-07-03T06:55:08Z",
    "closed_at": "2025-07-03T06:55:08Z",
    "labels": [
      "type/bug",
      "sig/execution",
      "type/regression",
      "severity/major",
      "fuzz/sqlancer",
      "affects-8.1",
      "impact/panic",
      "affects-8.5"
    ],
    "comments_count": 4,
    "author": "bajinsheng",
    "assignees": [
      "YangKeao"
    ],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "tiflash"
    ],
    "error_patterns": [
      "error:"
    ],
    "has_solution": true,
    "is_recent": true,
    "engagement_score": 19
  },
  {
    "id": 2674229574,
    "number": 57530,
    "title": "runtime error: select * from  TIKV_REGION_STATUS where table_id = 81920",
    "body": "## Bug Report\r\n\r\nPlease answer these questions before submitting your issue. Thanks!\r\n\r\n### 1. Minimal reproduce step (Required)\r\n\r\n<!-- a step by step guide for reproducing the bug. -->\r\n\r\nStart a tidb cluster, the following query:\r\n\r\n```\r\nmysql> select * from  TIKV_REGION_STATUS where table_id = 81920;\r\nERROR 1105 (HY000): runtime error: invalid memory address or nil pointer dereference\r\n```\r\n\r\n### 2. What did you expect to see? (Required)\r\n\r\nno error\r\n\r\n### 3. What did you see instead (Required)\r\n\r\n```\r\nmysql> select * from  TIKV_REGION_STATUS where table_id = 81920;\r\nERROR 1105 (HY000): runtime error: invalid memory address or nil pointer dereference\r\n```\r\n\r\nHere is the error stack:\r\n\r\n```\r\n[2024/11/20 11:32:02.391 +08:00] [INFO] [conn.go:1184] [\"command dispatched failed\"] [conn=1524629508] [session_alias=] [connInfo=\"id:1524629508, addr:127.0.0.1:38948 status:10, collation:utf8mb4_0900_ai_ci, user:root\"] [command=Query] [status=\"inTxn:0, autocommit:1\"] [sql=\"select * from  TIKV_REGION_STATUS where table_id = 81920\"] [txn_mode=PESSIMISTIC] [timestamp=0] [err=\"runtime error: invalid memory address or nil pointer dereference\r\ngithub.com/pingcap/errors.AddStack\r\n\t/home/genius/go/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20240318064555-6bd07397691f/errors.go:178\r\ngithub.com/pingcap/errors.Trace\r\n\t/home/genius/go/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20240318064555-6bd07397691f/juju_adaptor.go:15\r\ngithub.com/pingcap/tidb/pkg/util.GetRecoverError\r\n\t/home/genius/project/src/github.com/pingcap/tidb/pkg/util/util.go:288\r\ngithub.com/pingcap/tidb/pkg/executor/internal/exec.Next.func1\r\n\t/home/genius/project/src/github.com/pingcap/tidb/pkg/executor/internal/exec/executor.go:440\r\nruntime.gopanic\r\n\t/home/genius/project/go/src/runtime/panic.go:785\r\nruntime.panicmem\r\n\t/home/genius/project/go/src/runtime/panic.go:262\r\nruntime.sigpanic\r\n\t/home/genius/project/go/src/runtime/signal_unix.go:900\r\ngithub.com/pingcap/tidb/pkg/store/helper.(*Helper).GetRegionsTableInfo\r\n\t/home/genius/project/src/github.com/pingcap/tidb/pkg/store/helper/helper.go:684\r\ngithub.com/pingcap/tidb/pkg/executor.(*memtableRetriever).setDataForTiKVRegionStatus\r\n\t/home/genius/project/src/github.com/pingcap/tidb/pkg/executor/infoschema_reader.go:1975\r\ngithub.com/pingcap/tidb/pkg/executor.(*memtableRetriever).retrieve\r\n\t/home/genius/project/src/github.com/pingcap/tidb/pkg/executor/infoschema_reader.go:164\r\ngithub.com/pingcap/tidb/pkg/executor.(*MemTableReaderExec).Next\r\n\t/home/genius/project/src/github.com/pingcap/tidb/pkg/executor/memtable_reader.go:120\r\ngithub.com/pingcap/tidb/pkg/executor/internal/exec.Next\r\n\t/home/genius/project/src/github.com/pingcap/tidb/pkg/executor/internal/exec/executor.go:456\r\ngithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).next\r\n\t/home/genius/project/src/github.com/pingcap/tidb/pkg/executor/adapter.go:1266\r\ngithub.com/pingcap/tidb/pkg/executor.(*recordSet).Next\r\n\t/home/genius/project/src/github.com/pingcap/tidb/pkg/executor/adapter.go:172\r\ngithub.com/pingcap/tidb/pkg/server/internal/resultset.(*tidbResultSet).Next\r\n\t/home/genius/project/src/github.com/pingcap/tidb/pkg/server/internal/resultset/resultset.go:72\r\ngithub.com/pingcap/tidb/pkg/server.(*clientConn).writeChunks\r\n\t/home/genius/project/src/github.com/pingcap/tidb/pkg/server/conn.go:2319\r\ngithub.com/pingcap/tidb/pkg/server.(*clientConn).writeResultSet\r\n\t/home/genius/project/src/github.com/pingcap/tidb/pkg/server/conn.go:2262\r\ngithub.com/pingcap/tidb/pkg/server.(*clientConn).handleStmt\r\n\t/home/genius/project/src/github.com/pingcap/tidb/pkg/server/conn.go:2065\r\ngithub.com/pingcap/tidb/pkg/server.(*clientConn).handleQuery\r\n\t/home/genius/project/src/github.com/pingcap/tidb/pkg/server/conn.go:1779\r\ngithub.com/pingcap/tidb/pkg/server.(*clientConn).dispatch\r\n\t/home/genius/project/src/github.com/pingcap/tidb/pkg/server/conn.go:1378\r\ngithub.com/pingcap/tidb/pkg/server.(*clientConn).Run\r\n\t/home/genius/project/src/github.com/pingcap/tidb/pkg/server/conn.go:1147\r\ngithub.com/pingcap/tidb/pkg/server.(*Server).onConn\r\n\t/home/genius/project/src/github.com/pingcap/tidb/pkg/server/server.go:741\r\nruntime.goexit\r\n\t/home/genius/project/go/src/runtime/asm_amd64.s:\r\n1700\"]\r\n```\r\n\r\n### 4. What is your TiDB version? (Required)\r\n\r\n<!-- Paste the output of SELECT tidb_version() -->\r\n\r\n",
    "state": "closed",
    "created_at": "2024-11-20T03:38:14Z",
    "updated_at": "2025-07-03T06:38:28Z",
    "closed_at": "2024-11-20T13:41:40Z",
    "labels": [
      "type/bug",
      "sig/sql-infra",
      "severity/major",
      "affects-6.5",
      "affects-7.1",
      "affects-7.5",
      "affects-8.1",
      "impact/panic",
      "affects-8.5"
    ],
    "comments_count": 0,
    "author": "tiancaiamao",
    "assignees": [
      "tiancaiamao"
    ],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "mysql",
      "backup",
      "tikv"
    ],
    "error_patterns": [
      "error:"
    ],
    "has_solution": false,
    "is_recent": false,
    "engagement_score": 12
  },
  {
    "id": 2057297443,
    "number": 49859,
    "title": "Performance jitter in 11D statements of Join Order Benchmark",
    "body": "## Bug Report\r\n\r\nPlease answer these questions before submitting your issue. Thanks!\r\n\r\n### 1. Minimal reproduce step (Required)\r\n\r\n<!-- a step by step guide for reproducing the bug. -->\r\n1. deploy cluster with 1 tidb +3 tikv\r\n2. run join order benchmark - 11D\r\n```\r\nSELECT\r\n\tMIN(cn.name) AS from_company,\r\n\tMIN(mc.note) AS production_note,\r\n\tMIN(t.title) AS movie_based_on_book\r\nFROM\r\n\tcompany_name AS cn,\r\n\tcompany_type AS ct,\r\n\tkeyword AS k,\r\n\tlink_type AS lt,\r\n\tmovie_companies AS mc,\r\n\tmovie_keyword AS mk,\r\n\tmovie_link AS ml,\r\n\ttitle AS t\r\nWHERE\r\n\tcn.country_code != '[pl]'\r\n\tAND ct.kind != 'production companies'\r\n\tand ct.kind is not NULL\r\n\tAND k.keyword in ('sequel', 'revenge', 'based-on-novel')\r\n\tAND mc.note is not NULL\r\n\tAND t.production_year > 1950\r\n\tAND lt.id = ml.link_type_id\r\n\tAND ml.movie_id = t.id\r\n\tAND t.id = mk.movie_id\r\n\tAND mk.keyword_id = k.id\r\n\tAND t.id = mc.movie_id\r\n\tAND mc.company_type_id = ct.id\r\n\tAND mc.company_id = cn.id\r\n\tAND ml.movie_id = mk.movie_id\r\n\tAND ml.movie_id = mc.movie_id\r\n\tAND mk.movie_id = mc.movie_id;\r\n\r\n```\r\n### 2. What did you expect to see? (Required)\r\n\r\n```\r\nBaseline Execution Plans\r\nPlan_Digest: 6df5d21ab577975303577b1283c20ef0 Elapsed_Time (s): 162.3 \r\n\r\n+------------------------------------------+------------+------------+-----------+---------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------+---------+\r\n| ID                                       | ESTROWS    | ACTROWS    | TASK      | ACCESS OBJECT                               | EXECUTION INFO                                                                                                                                                                                                                                                                                                                                                                                                                                   | OPERATOR INFO                                                                                                                                                                               | MEMORY    | DISK    |\r\n+------------------------------------------+------------+------------+-----------+---------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------+---------+\r\n| HashAgg_35                               | 1.00       | 1          | root      |                                             | time:2m42.3s, loops:2, RU:20581.276319, partial_worker:{wall_time:2m42.287510425s, concurrency:5, task_num:9009, tot_wait:13m30.05205941s, tot_exec:1.383332707s, tot_time:13m31.437332833s, max:2m42.287490326s, p95:2m42.287490326s}, final_worker:{wall_time:2m42.287533312s, concurrency:5, task_num:5, tot_wait:13m31.437519239s, tot_exec:41.425\u00b5s, tot_time:13m31.437563769s, max:2m42.287521969s, p95:2m42.287521969s}                   | funcs:min(imdb.company_name.name)->Column#39, funcs:min(imdb.movie_companies.note)->Column#40, funcs:min(imdb.title.title)->Column#41                                                       | 2.41 MB   | N/A     |\r\n| \u2514\u2500Projection_37                          | 4911.99    | 9221275    | root      |                                             | time:2m42.3s, loops:9010, Concurrency:5                                                                                                                                                                                                                                                                                                                                                                                                          | imdb.company_name.name, imdb.movie_companies.note, imdb.title.title                                                                                                                         | 2.25 MB   | N/A     |\r\n|   \u2514\u2500HashJoin_50                          | 4911.99    | 9221275    | root      |                                             | time:2m42.3s, loops:9010, build_hash_table:{total:4.4ms, fetch:4.39ms, build:12.2\u00b5s}, probe:{concurrency:5, total:13m31.4s, max:2m42.3s, probe:2m54.1s, fetch:10m37.4s}                                                                                                                                                                                                                                                                          | inner join, equal:[eq(imdb.movie_keyword.keyword_id, imdb.keyword.id)]                                                                                                                      | 25.7 KB   | 0 Bytes |\r\n|     \u251c\u2500IndexLookUp_233(Build)             | 137.38     | 3          | root      |                                             | time:4.36ms, loops:2, index_task: {total_time: 689.5\u00b5s, fetch_handle: 685.2\u00b5s, build: 1.34\u00b5s, wait: 2.92\u00b5s}, table_task: {total_time: 3.59ms, num: 1, concurrency: 5}, next: {wait_index: 751.3\u00b5s, wait_table_lookup_build: 174.3\u00b5s, wait_table_lookup_resp: 3.41ms}                                                                                                                                                                             |                                                                                                                                                                                             | 13.0 KB   | N/A     |\r\n|     \u2502 \u251c\u2500IndexRangeScan_230(Build)        | 137.38     | 258        | cop[tikv] | table:k, index:keyword_idx_keyword(keyword) | time:665.2\u00b5s, loops:3, cop_task: {num: 1, max: 589.3\u00b5s, proc_keys: 258, tot_proc: 202.9\u00b5s, tot_wait: 27.5\u00b5s, rpc_num: 1, rpc_time: 571.2\u00b5s, copr_cache_hit_ratio: 0.00, build_task_duration: 14.7\u00b5s, max_distsql_concurrency: 1}, tikv_task:{time:0s, loops:4}, scan_detail: {total_process_keys: 258, total_process_keys_size: 11868, total_keys: 261, get_snapshot_time: 10\u00b5s, rocksdb: {key_skipped_count: 258, block: {cache_hit_count: 6}}} | range:[\"based\",\"based\"], [\"reven\",\"reven\"], [\"seque\",\"seque\"], keep order:false                                                                                                             | N/A       | N/A     |\r\n|     \u2502 \u2514\u2500Selection_232(Probe)             | 137.38     | 3          | cop[tikv] |                                             | time:3.39ms, loops:2, cop_task: {num: 1, max: 3.28ms, proc_keys: 258, tot_proc: 2.39ms, tot_wait: 37.4\u00b5s, rpc_num: 1, rpc_time: 3.25ms, copr_cache_hit_ratio: 0.00, build_task_duration: 32.7\u00b5s, max_distsql_concurrency: 1}, tikv_task:{time:3ms, loops:4}, scan_detail: {total_process_keys: 258, total_process_keys_size: 16408, total_keys: 265, get_snapshot_time: 18\u00b5s, rocksdb: {key_skipped_count: 14, block: {cache_hit_count: 448}}}   | in(imdb.keyword.keyword, \"sequel\", \"revenge\", \"based-on-novel\")                                                                                                                             | N/A       | N/A     |\r\n|     \u2502   \u2514\u2500TableRowIDScan_231             | 137.38     | 258        | cop[tikv] | table:k                                     | tikv_task:{time:3ms, loops:4}                                                                                                                                                                                                                                                                                                                                                                                                                    | keep order:false                                                                                                                                                                            | N/A       | N/A     |\r\n|     \u2514\u2500HashJoin_64(Probe)                 | 8378871.38 | 2581940039 | root      |                                             | time:2m39.8s, loops:2521430, build_hash_table:{total:5s, fetch:1.89s, build:3.11s}, probe:{concurrency:5, total:13m18.8s, max:2m42.3s, probe:12m53.7s, fetch:25.1s}                                                                                                                                                                                                                                                                              | inner join, equal:[eq(imdb.movie_companies.movie_id, imdb.movie_keyword.movie_id) eq(imdb.movie_link.movie_id, imdb.movie_keyword.movie_id) eq(imdb.title.id, imdb.movie_keyword.movie_id)] | 2.34 GB   | 0 Bytes |\r\n|       \u251c\u2500HashJoin_75(Build)               | 2585150.00 | 17625104   | root      |                                             | time:2s, loops:17214, build_hash_table:{total:77.7\u00b5s, fetch:57.3\u00b5s, build:20.4\u00b5s}, probe:{concurrency:5, total:25s, max:5s, probe:15.9s, fetch:9.11s}                                                                                                                                                                                                                                                                                            | inner join, equal:[eq(imdb.movie_link.link_type_id, imdb.link_type.id)]                                                                                                                     | 9.46 KB   | 0 Bytes |\r\n|       \u2502 \u251c\u2500TableReader_225(Build)         | 18.00      | 18         | root      |                                             | time:36.7\u00b5s, loops:2, cop_task: {num: 1, max: 298.8\u00b5s, proc_keys: 18, tot_proc: 47.5\u00b5s, tot_wait: 19.7\u00b5s, rpc_num: 1, rpc_time: 284\u00b5s, copr_cache_hit_ratio: 0.00, build_task_duration: 1.9\u00b5s, max_distsql_concurrency: 1}                                                                                                                                                                                                                       | data:TableFullScan_224                                                                                                                                                                      | 385 Bytes | N/A     |\r\n|       \u2502 \u2502 \u2514\u2500TableFullScan_224            | 18.00      | 18         | cop[tikv] | table:lt                                    | tikv_task:{time:0s, loops:1}, scan_detail: {total_process_keys: 18, total_process_keys_size: 486, total_keys: 19, get_snapshot_time: 7.34\u00b5s, rocksdb: {key_skipped_count: 18, block: {cache_hit_count: 2}}}                                                                                                                                                                                                                                      | keep order:false                                                                                                                                                                            | N/A       | N/A     |\r\n|       \u2502 \u2514\u2500HashJoin_88(Probe)             | 2585150.00 | 17625104   | root      |                                             | time:1.84s, loops:17215, build_hash_table:{total:1.03s, fetch:678.3ms, build:352.6ms}, probe:{concurrency:5, total:25s, max:5s, probe:16s, fetch:9.02s}                                                                                                                                                                                                                                                                                          | inner join, equal:[eq(imdb.movie_companies.movie_id, imdb.movie_link.movie_id) eq(imdb.title.id, imdb.movie_link.movie_id)]                                                                 | 96.6 MB   | 0 Bytes |\r\n|       \u2502   \u251c\u2500TableReader_223(Build)       | 2585150.00 | 2585150    | root      |                                             | time:677ms, loops:2528, cop_task: {num: 3, max: 862.1ms, min: 365.6\u00b5s, avg: 449.6ms, p95: 862.1ms, max_proc_keys: 1280000, p95_proc_keys: 1280000, tot_proc: 1.3s, tot_wait: 58.3\u00b5s, rpc_num: 3, rpc_time: 1.35s, copr_cache_hit_ratio: 0.33, build_task_duration: 7.09\u00b5s, max_distsql_concurrency: 3}                                                                                                                                           | data:TableFullScan_222                                                                                                                                                                      | 32.9 MB   | N/A     |\r\n|       \u2502   \u2502 \u2514\u2500TableFullScan_222          | 2585150.00 | 2585150    | cop[tikv] | table:ml                                    | tikv_task:{proc max:783ms, min:438ms, avg: 587.3ms, p80:783ms, p95:783ms, iters:2539, tasks:3}, scan_detail: {total_process_keys: 2156027, total_process_keys_size: 109946493, total_keys: 2156029, get_snapshot_time: 18.4\u00b5s, rocksdb: {key_skipped_count: 2156027, block: {cache_hit_count: 4198}}}                                                                                                                                            | keep order:false                                                                                                                                                                            | N/A       | N/A     |\r\n|       \u2502   \u2514\u2500HashJoin_102(Probe)          | 2307846.25 | 1714499    | root      |                                             | time:1.81s, loops:1678, build_hash_table:{total:1.8s, fetch:356.6ms, build:1.44s}, probe:{concurrency:5, total:24.8s, max:4.97s, probe:15.8s, fetch:9.01s}                                                                                                                                                                                                                                                                                       | inner join, equal:[eq(imdb.movie_companies.movie_id, imdb.title.id)]                                                                                                                        | 402.8 MB  | 0 Bytes |\r\n|       \u2502     \u251c\u2500TableReader_218(Build)     | 4247586.00 | 4247643    | root      |                                             | time:359.5ms, loops:4507, cop_task: {num: 6, max: 917.6ms, min: 344.9ms, avg: 603.2ms, p95: 917.6ms, max_proc_keys: 1107917, p95_proc_keys: 1107917, tot_proc: 3.37s, tot_wait: 120.8\u00b5s, rpc_num: 6, rpc_time: 3.62s, copr_cache_hit_ratio: 0.00, build_task_duration: 11.4\u00b5s, max_distsql_concurrency: 6}                                                                                                                                       | data:Selection_217                                                                                                                                                                          | 102.4 MB  | N/A     |\r\n|       \u2502     \u2502 \u2514\u2500Selection_217            | 4247586.00 | 4247643    | cop[tikv] |                                             | tikv_task:{proc max:764ms, min:288ms, avg: 493.8ms, p80:700ms, p95:764ms, iters:4653, tasks:6}, scan_detail: {total_process_keys: 4736508, total_process_keys_size: 524795377, total_keys: 4736514, get_snapshot_time: 39.8\u00b5s, rocksdb: {key_skipped_count: 4736611, block: {cache_hit_count: 17914}}}                                                                                                                                           | gt(imdb.title.production_year, 1950)                                                                                                                                                        | N/A       | N/A     |\r\n|       \u2502     \u2502   \u2514\u2500TableFullScan_216      | 4736508.00 | 4736508    | cop[tikv] | table:t                                     | tikv_task:{proc max:734ms, min:283ms, avg: 473ms, p80:664ms, p95:734ms, iters:4653, tasks:6}                                                                                                                                                                                                                                                                                                                                                     | keep order:false                                                                                                                                                                            | N/A       | N/A     |\r\n|       \u2502     \u2514\u2500HashJoin_146(Probe)        | 2288639.00 | 1954290    | root      |                                             | time:582.4ms, loops:1911, build_hash_table:{total:515.5ms, fetch:433.2ms, build:82.3ms}, probe:{concurrency:5, total:24.6s, max:4.94s, probe:21.7s, fetch:2.9s}                                                                                                                                                                                                                                                                                  | inner join, equal:[eq(imdb.movie_companies.company_id, imdb.company_name.id)]                                                                                                               | 38.1 MB   | 0 Bytes |\r\n|       \u2502       \u251c\u2500TableReader_215(Build)   | 337886.00  | 337601     | root      |                                             | time:433.1ms, loops:355, cop_task: {num: 1, max: 433.2ms, proc_keys: 362131, tot_proc: 414.1ms, tot_wait: 353\u00b5s, rpc_num: 1, rpc_time: 433.2ms, copr_cache_hit_ratio: 0.00, build_task_duration: 5.25\u00b5s, max_distsql_concurrency: 1}                                                                                                                                                                                                             | data:Selection_214                                                                                                                                                                          | 14.9 MB   | N/A     |\r\n|       \u2502       \u2502 \u2514\u2500Selection_214          | 337886.00  | 337601     | cop[tikv] |                                             | tikv_task:{time:363ms, loops:358}, scan_detail: {total_process_keys: 362131, total_process_keys_size: 40171508, total_keys: 362132, get_snapshot_time: 336.5\u00b5s, rocksdb: {key_skipped_count: 362131, block: {cache_hit_count: 1373}}}                                                                                                                                                                                                            | ne(imdb.company_name.country_code, \"[pl]\")                                                                                                                                                  | N/A       | N/A     |\r\n|       \u2502       \u2502   \u2514\u2500TableFullScan_213    | 362131.00  | 362131     | cop[tikv] | table:cn                                    | tikv_task:{time:323ms, loops:358}                                                                                                                                                                                                                                                                                                                                                                                                                | keep order:false                                                                                                                                                                            | N/A       | N/A     |\r\n|       \u2502       \u2514\u2500HashJoin_194(Probe)      | 2288639.00 | 1980874    | root      |                                             | time:582.8ms, loops:1938, build_hash_table:{total:63.3\u00b5s, fetch:58\u00b5s, build:5.29\u00b5s}, probe:{concurrency:5, total:24.5s, max:4.91s, probe:21.6s, fetch:2.89s}                                                                                                                                                                                                                                                                                     | inner join, equal:[eq(imdb.company_type.id, imdb.movie_companies.company_type_id)]                                                                                                          | 25.7 KB   | 0 Bytes |\r\n|       \u2502         \u251c\u2500TableReader_205(Build) | 3.20       | 3          | root      |                                             | time:27.1\u00b5s, loops:2, cop_task: {num: 1, max: 662.9\u00b5s, proc_keys: 4, tot_proc: 51.8\u00b5s, tot_wait: 356.1\u00b5s, rpc_num: 1, rpc_time: 649.2\u00b5s, copr_cache_hit_ratio: 0.00, build_task_duration: 4.85\u00b5s, max_distsql_concurrency: 1}                                                                                                                                                                                                                    | data:Selection_204                                                                                                                                                                          | 381 Bytes | N/A     |\r\n|       \u2502         \u2502 \u2514\u2500Selection_204        | 3.20       | 3          | cop[tikv] |                                             | tikv_task:{time:0s, loops:1}, scan_detail: {total_process_keys: 4, total_process_keys_size: 224, total_keys: 5, get_snapshot_time: 340.6\u00b5s, rocksdb: {key_skipped_count: 4, block: {cache_hit_count: 2}}}                                                                                                                                                                                                                                        | ne(imdb.company_type.kind, \"production companies\"), not(isnull(imdb.company_type.kind))                                                                                                     | N/A       | N/A     |\r\n|       \u2502         \u2502   \u2514\u2500TableFullScan_203  | 4.00       | 4          | cop[tikv] | table:ct                                    | tikv_task:{time:0s, loops:1}                                                                                                                                                                                                                                                                                                                                                                                                                     | keep order:false                                                                                                                                                                            | N/A       | N/A     |\r\n|       \u2502         \u2514\u2500TableReader_212(Probe) | 2288639.00 | 2288639    | root      |                                             | time:585.1ms, loops:2306, cop_task: {num: 5, max: 1.04s, min: 621.4\u00b5s, avg: 472.5ms, p95: 1.04s, max_proc_keys: 1185298, p95_proc_keys: 1185298, tot_proc: 2.19s, tot_wait: 1.76ms, rpc_num: 5, rpc_time: 2.36s, copr_cache_hit_ratio: 0.40, build_task_duration: 9.46\u00b5s, max_distsql_concurrency: 5}                                                                                                                                            | data:Selection_211                                                                                                                                                                          | 110.8 MB  | N/A     |\r\n|       \u2502           \u2514\u2500Selection_211        | 2288639.00 | 2288639    | cop[tikv] |                                             | tikv_task:{proc max:809ms, min:463ms, avg: 673.6ms, p80:809ms, p95:809ms, iters:4864, tasks:5}, scan_detail: {total_process_keys: 2969382, total_process_keys_size: 202617625, total_keys: 2969385, get_snapshot_time: 1.68ms, rocksdb: {key_skipped_count: 2969383, block: {cache_hit_count: 7347}}}                                                                                                                                            | not(isnull(imdb.movie_companies.note))                                                                                                                                                      | N/A       | N/A     |\r\n|       \u2502             \u2514\u2500TableFullScan_210  | 4958296.00 | 4958296    | cop[tikv] | table:mc                                    | tikv_task:{proc max:741ms, min:399ms, avg: 619.6ms, p80:741ms, p95:741ms, iters:4864, tasks:5}                                                                                                                                                                                                                                                                                                                                                   | keep order:false                                                                                                                                                                            | N/A       | N/A     |\r\n|       \u2514\u2500TableReader_229(Probe)           | 7480087.00 | 7480087    | root      |                                             | time:44.2ms, loops:7311, cop_task: {num: 10, max: 669.9ms, min: 258.7\u00b5s, avg: 336.6ms, p95: 669.9ms, max_proc_keys: 960000, p95_proc_keys: 960000, tot_proc: 3.24s, tot_wait: 219\u00b5s, rpc_num: 10, rpc_time: 3.37s, copr_cache_hit_ratio: 0.40, build_task_duration: 17.8\u00b5s, max_distsql_concurrency: 10}                                                                                                                                         | data:TableFullScan_228                                                                                                                                                                      | 114.3 MB  | N/A     |\r\n|         \u2514\u2500TableFullScan_228              | 7480087.00 | 7480087    | cop[tikv] | table:mk                                    | tikv_task:{proc max:604ms, min:343ms, avg: 486.2ms, p80:599ms, p95:604ms, iters:7350, tasks:10}, scan_detail: {total_process_keys: 5307746, total_process_keys_size: 240613872, total_keys: 5307752, get_snapshot_time: 73.9\u00b5s, rocksdb: {key_skipped_count: 5307746, block: {cache_hit_count: 9408}}}                                                                                                                                           | keep order:false                                                                                                                                                                            | N/A       | N/A     |\r\n+------------------------------------------+------------+------------+-----------+---------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------+---------+\r\n\r\n```\r\n\r\n### 3. What did you see instead (Required)\r\nThe elapsed time of 11D ranges from 162s to 195s\r\n![image](https://github.com/pingcap/tidb/assets/84501897/e3681f03-4eaa-4d53-a965-b5bb5837c671)\r\n```\r\nOlap_Detail_Log_ID: 6295290   Plan_Digest: 6df5d21ab577975303577b1283c20ef0 Elapsed_Time (s): 195.5 \r\n\r\n+------------------------------------------+------------+------------+-----------+---------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------+---------+\r\n| ID                                       | ESTROWS    | ACTROWS    | TASK      | ACCESS OBJECT                               | EXECUTION INFO                                                                                                                                                                                                                                                                                                                                                                                                                                    | OPERATOR INFO                                                                                                                                                                               | MEMORY    | DISK    |\r\n+------------------------------------------+------------+------------+-----------+---------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------+---------+\r\n| HashAgg_35                               | 1.00       | 1          | root      |                                             | time:3m15.5s, loops:2, RU:21598.602762, partial_worker:{wall_time:3m15.526680121s, concurrency:5, task_num:9008, tot_wait:16m15.894038691s, tot_exec:1.736775085s, tot_time:16m17.632883533s, max:3m15.526652138s, p95:3m15.526652138s}, final_worker:{wall_time:3m15.526689401s, concurrency:5, task_num:20, tot_wait:16m17.633273823s, tot_exec:11.254\u00b5s, tot_time:16m17.633290392s, max:3m15.5266614s, p95:3m15.5266614s}                      | funcs:min(imdb.company_name.name)->Column#39, funcs:min(imdb.movie_companies.note)->Column#40, funcs:min(imdb.title.title)->Column#41                                                       | 2.40 MB   | N/A     |\r\n| \u2514\u2500Projection_37                          | 4946.92    | 9221275    | root      |                                             | time:3m15.5s, loops:9009, Concurrency:5                                                                                                                                                                                                                                                                                                                                                                                                           | imdb.company_name.name, imdb.movie_companies.note, imdb.title.title                                                                                                                         | 2.25 MB   | N/A     |\r\n|   \u2514\u2500HashJoin_50                          | 4946.92    | 9221275    | root      |                                             | time:3m15.5s, loops:9009, build_hash_table:{total:4.04ms, fetch:4.03ms, build:5.19\u00b5s}, probe:{concurrency:5, total:16m17.6s, max:3m15.5s, probe:3m18.9s, fetch:12m58.7s}                                                                                                                                                                                                                                                                          | inner join, equal:[eq(imdb.movie_keyword.keyword_id, imdb.keyword.id)]                                                                                                                      | 25.7 KB   | 0 Bytes |\r\n|     \u251c\u2500IndexLookUp_233(Build)             | 138.35     | 3          | root      |                                             | time:3.97ms, loops:2, index_task: {total_time: 857.2\u00b5s, fetch_handle: 853.4\u00b5s, build: 1.32\u00b5s, wait: 2.47\u00b5s}, table_task: {total_time: 3.01ms, num: 1, concurrency: 5}, next: {wait_index: 944.5\u00b5s, wait_table_lookup_build: 319.4\u00b5s, wait_table_lookup_resp: 2.67ms}                                                                                                                                                                              |                                                                                                                                                                                             | 13.0 KB   | N/A     |\r\n|     \u2502 \u251c\u2500IndexRangeScan_230(Build)        | 138.35     | 258        | cop[tikv] | table:k, index:keyword_idx_keyword(keyword) | time:830.9\u00b5s, loops:3, cop_task: {num: 1, max: 742\u00b5s, proc_keys: 258, tot_proc: 325.6\u00b5s, tot_wait: 23.9\u00b5s, rpc_num: 1, rpc_time: 725.2\u00b5s, copr_cache_hit_ratio: 0.00, build_task_duration: 15.5\u00b5s, max_distsql_concurrency: 1}, tikv_task:{time:1ms, loops:4}, scan_detail: {total_process_keys: 258, total_process_keys_size: 11868, total_keys: 261, get_snapshot_time: 8.81\u00b5s, rocksdb: {key_skipped_count: 258, block: {cache_hit_count: 6}}} | range:[\"based\",\"based\"], [\"reven\",\"reven\"], [\"seque\",\"seque\"], keep order:false                                                                                                             | N/A       | N/A     |\r\n|     \u2502 \u2514\u2500Selection_232(Probe)             | 138.35     | 3          | cop[tikv] |                                             | time:2.65ms, loops:2, cop_task: {num: 1, max: 2.56ms, proc_keys: 258, tot_proc: 1.67ms, tot_wait: 25\u00b5s, rpc_num: 1, rpc_time: 2.53ms, copr_cache_hit_ratio: 0.00, build_task_duration: 77.5\u00b5s, max_distsql_concurrency: 1}, tikv_task:{time:2ms, loops:4}, scan_detail: {total_process_keys: 258, total_process_keys_size: 16408, total_keys: 265, get_snapshot_time: 8.6\u00b5s, rocksdb: {key_skipped_count: 14, block: {cache_hit_count: 448}}}     | in(imdb.keyword.keyword, \"sequel\", \"revenge\", \"based-on-novel\")                                                                                                                             | N/A       | N/A     |\r\n|     \u2502   \u2514\u2500TableRowIDScan_231             | 138.35     | 258        | cop[tikv] | table:k                                     | tikv_task:{time:1ms, loops:4}                                                                                                                                                                                                                                                                                                                                                                                                                     | keep order:false                                                                                                                                                                            | N/A       | N/A     |\r\n|     \u2514\u2500HashJoin_64(Probe)                 | 8378871.38 | 2581940039 | root      |                                             | time:3m12.9s, loops:2521429, build_hash_table:{total:4.95s, fetch:1.96s, build:2.99s}, probe:{concurrency:5, total:16m6.3s, max:3m15.5s, probe:15m41.4s, fetch:24.8s}                                                                                                                                                                                                                                                                             | inner join, equal:[eq(imdb.movie_companies.movie_id, imdb.movie_keyword.movie_id) eq(imdb.movie_link.movie_id, imdb.movie_keyword.movie_id) eq(imdb.title.id, imdb.movie_keyword.movie_id)] | 2.34 GB   | 0 Bytes |\r\n|       \u251c\u2500HashJoin_75(Build)               | 2585150.00 | 17625104   | root      |                                             | time:2.09s, loops:17216, build_hash_table:{total:57.7\u00b5s, fetch:49\u00b5s, build:8.75\u00b5s}, probe:{concurrency:5, total:24.8s, max:4.95s, probe:15.3s, fetch:9.48s}                                                                                                                                                                                                                                                                                       | inner join, equal:[eq(imdb.movie_link.link_type_id, imdb.link_type.id)]                                                                                                                     | 9.46 KB   | 0 Bytes |\r\n|       \u2502 \u251c\u2500TableReader_225(Build)         | 18.00      | 18         | root      |                                             | time:28.6\u00b5s, loops:2, cop_task: {num: 1, max: 312.5\u00b5s, proc_keys: 18, tot_proc: 42.3\u00b5s, tot_wait: 21.1\u00b5s, rpc_num: 1, rpc_time: 296.4\u00b5s, copr_cache_hit_ratio: 0.00, build_task_duration: 1.94\u00b5s, max_distsql_concurrency: 1}                                                                                                                                                                                                                     | data:TableFullScan_224                                                                                                                                                                      | 385 Bytes | N/A     |\r\n|       \u2502 \u2502 \u2514\u2500TableFullScan_224            | 18.00      | 18         | cop[tikv] | table:lt                                    | tikv_task:{time:0s, loops:1}, scan_detail: {total_process_keys: 18, total_process_keys_size: 486, total_keys: 19, get_snapshot_time: 6.18\u00b5s, rocksdb: {key_skipped_count: 18, block: {cache_hit_count: 2}}}                                                                                                                                                                                                                                       | keep order:false                                                                                                                                                                            | N/A       | N/A     |\r\n|       \u2502 \u2514\u2500HashJoin_88(Probe)             | 2585150.00 | 17625104   | root      |                                             | time:1.93s, loops:17216, build_hash_table:{total:1.07s, fetch:718.2ms, build:353.3ms}, probe:{concurrency:5, total:24.7s, max:4.95s, probe:15.3s, fetch:9.34s}                                                                                                                                                                                                                                                                                    | inner join, equal:[eq(imdb.movie_companies.movie_id, imdb.movie_link.movie_id) eq(imdb.title.id, imdb.movie_link.movie_id)]                                                                 | 96.6 MB   | 0 Bytes |\r\n|       \u2502   \u251c\u2500TableReader_223(Build)       | 2585150.00 | 2585150    | root      |                                             | time:717.1ms, loops:2528, cop_task: {num: 3, max: 893.9ms, min: 302.5\u00b5s, avg: 534.2ms, p95: 893.9ms, max_proc_keys: 1280000, p95_proc_keys: 1280000, tot_proc: 1.55s, tot_wait: 63.7\u00b5s, rpc_num: 3, rpc_time: 1.6s, copr_cache_hit_ratio: 0.33, build_task_duration: 6.8\u00b5s, max_distsql_concurrency: 3}                                                                                                                                           | data:TableFullScan_222                                                                                                                                                                      | 32.9 MB   | N/A     |\r\n|       \u2502   \u2502 \u2514\u2500TableFullScan_222          | 2585150.00 | 2585150    | cop[tikv] | table:ml                                    | tikv_task:{proc max:820ms, min:241ms, avg: 569.3ms, p80:820ms, p95:820ms, iters:2539, tasks:3}, scan_detail: {total_process_keys: 2156027, total_process_keys_size: 109946493, total_keys: 2156029, get_snapshot_time: 20.2\u00b5s, rocksdb: {key_skipped_count: 2156027, block: {cache_hit_count: 4198}}}                                                                                                                                             | keep order:false                                                                                                                                                                            | N/A       | N/A     |\r\n|       \u2502   \u2514\u2500HashJoin_102(Probe)          | 2307846.25 | 1714499    | root      |                                             | time:1.87s, loops:1678, build_hash_table:{total:1.86s, fetch:440.9ms, build:1.42s}, probe:{concurrency:5, total:24.5s, max:4.91s, probe:15.1s, fetch:9.33s}                                                                                                                                                                                                                                                                                       | inner join, equal:[eq(imdb.movie_companies.movie_id, imdb.title.id)]                                                                                                                        | 402.8 MB  | 0 Bytes |\r\n|       \u2502     \u251c\u2500TableReader_218(Build)     | 4196105.00 | 4247643    | root      |                                             | time:444ms, loops:4507, cop_task: {num: 6, max: 1.04s, min: 326.9ms, avg: 691.4ms, p95: 1.04s, max_proc_keys: 1107917, p95_proc_keys: 1107917, tot_proc: 3.88s, tot_wait: 132.5\u00b5s, rpc_num: 6, rpc_time: 4.15s, copr_cache_hit_ratio: 0.00, build_task_duration: 9.78\u00b5s, max_distsql_concurrency: 6}                                                                                                                                              | data:Selection_217                                                                                                                                                                          | 102.4 MB  | N/A     |\r\n|       \u2502     \u2502 \u2514\u2500Selection_217            | 4196105.00 | 4247643    | cop[tikv] |                                             | tikv_task:{proc max:870ms, min:261ms, avg: 575.5ms, p80:808ms, p95:870ms, iters:4653, tasks:6}, scan_detail: {total_process_keys: 4736508, total_process_keys_size: 524795377, total_keys: 4736514, get_snapshot_time: 42.9\u00b5s, rocksdb: {key_skipped_count: 4736611, block: {cache_hit_count: 17914}}}                                                                                                                                            | gt(imdb.title.production_year, 1950)                                                                                                                                                        | N/A       | N/A     |\r\n|       \u2502     \u2502   \u2514\u2500TableFullScan_216      | 4736508.00 | 4736508    | cop[tikv] | table:t                                     | tikv_task:{proc max:841ms, min:250ms, avg: 554.3ms, p80:771ms, p95:841ms, iters:4653, tasks:6}                                                                                                                                                                                                                                                                                                                                                    | keep order:false                                                                                                                                                                            | N/A       | N/A     |\r\n|       \u2502     \u2514\u2500HashJoin_146(Probe)        | 2288639.00 | 1954290    | root      |                                             | time:700.2ms, loops:1912, build_hash_table:{total:457.8ms, fetch:362.7ms, build:95.1ms}, probe:{concurrency:5, total:24.2s, max:4.85s, probe:20.7s, fetch:3.48s}                                                                                                                                                                                                                                                                                  | inner join, equal:[eq(imdb.movie_companies.company_id, imdb.company_name.id)]                                                                                                               | 38.1 MB   | 0 Bytes |\r\n|       \u2502       \u251c\u2500TableReader_215(Build)   | 337882.00  | 337601     | root      |                                             | time:362.4ms, loops:355, cop_task: {num: 1, max: 362.5ms, proc_keys: 362131, tot_proc: 332.9ms, tot_wait: 247.2\u00b5s, rpc_num: 1, rpc_time: 362.5ms, copr_cache_hit_ratio: 0.00, build_task_duration: 1.9\u00b5s, max_distsql_concurrency: 1}                                                                                                                                                                                                             | data:Selection_214                                                                                                                                                                          | 14.9 MB   | N/A     |\r\n|       \u2502       \u2502 \u2514\u2500Selection_214          | 337882.00  | 337601     | cop[tikv] |                                             | tikv_task:{time:294ms, loops:358}, scan_detail: {total_process_keys: 362131, total_process_keys_size: 40171508, total_keys: 362132, get_snapshot_time: 229.2\u00b5s, rocksdb: {key_skipped_count: 362131, block: {cache_hit_count: 1373}}}                                                                                                                                                                                                             | ne(imdb.company_name.country_code, \"[pl]\")                                                                                                                                                  | N/A       | N/A     |\r\n|       \u2502       \u2502   \u2514\u2500TableFullScan_213    | 362131.00  | 362131     | cop[tikv] | table:cn                                    | tikv_task:{time:266ms, loops:358}                                                                                                                                                                                                                                                                                                                                                                                                                 | keep order:false                                                                                                                                                                            | N/A       | N/A     |\r\n|       \u2502       \u2514\u2500HashJoin_194(Probe)      | 2288639.00 | 1980874    | root      |                                             | time:699.5ms, loops:1937, build_hash_table:{total:121.9\u00b5s, fetch:114\u00b5s, build:7.88\u00b5s}, probe:{concurrency:5, total:24.1s, max:4.83s, probe:20.6s, fetch:3.47s}                                                                                                                                                                                                                                                                                    | inner join, equal:[eq(imdb.company_type.id, imdb.movie_companies.company_type_id)]                                                                                                          | 25.7 KB   | 0 Bytes |\r\n|       \u2502         \u251c\u2500TableReader_205(Build) | 3.20       | 3          | root      |                                             | time:58.7\u00b5s, loops:2, cop_task: {num: 1, max: 694.1\u00b5s, proc_keys: 4, tot_proc: 53.2\u00b5s, tot_wait: 255.1\u00b5s, rpc_num: 1, rpc_time: 668.3\u00b5s, copr_cache_hit_ratio: 0.00, build_task_duration: 6.2\u00b5s, max_distsql_concurrency: 1}                                                                                                                                                                                                                      | data:Selection_204                                                                                                                                                                          | 381 Bytes | N/A     |\r\n|       \u2502         \u2502 \u2514\u2500Selection_204        | 3.20       | 3          | cop[tikv] |                                             | tikv_task:{time:0s, loops:1}, scan_detail: {total_process_keys: 4, total_process_keys_size: 224, total_keys: 5, get_snapshot_time: 242.8\u00b5s, rocksdb: {key_skipped_count: 4, block: {cache_hit_count: 2}}}                                                                                                                                                                                                                                         | ne(imdb.company_type.kind, \"production companies\"), not(isnull(imdb.company_type.kind))                                                                                                     | N/A       | N/A     |\r\n|       \u2502         \u2502   \u2514\u2500TableFullScan_203  | 4.00       | 4          | cop[tikv] | table:ct                                    | tikv_task:{time:0s, loops:1}                                                                                                                                                                                                                                                                                                                                                                                                                      | keep order:false                                                                                                                                                                            | N/A       | N/A     |\r\n|       \u2502         \u2514\u2500TableReader_212(Probe) | 2288639.00 | 2288639    | root      |                                             | time:702.5ms, loops:2307, cop_task: {num: 5, max: 1.15s, min: 263.2\u00b5s, avg: 515.8ms, p95: 1.15s, max_proc_keys: 1185298, p95_proc_keys: 1185298, tot_proc: 2.41s, tot_wait: 584.9\u00b5s, rpc_num: 5, rpc_time: 2.58s, copr_cache_hit_ratio: 0.40, build_task_duration: 12.8\u00b5s, max_distsql_concurrency: 5}                                                                                                                                            | data:Selection_211                                                                                                                                                                          | 110.8 MB  | N/A     |\r\n|       \u2502           \u2514\u2500Selection_211        | 2288639.00 | 2288639    | cop[tikv] |                                             | tikv_task:{proc max:908ms, min:565ms, avg: 672.6ms, p80:908ms, p95:908ms, iters:4864, tasks:5}, scan_detail: {total_process_keys: 2969382, total_process_keys_size: 202617625, total_keys: 2969385, get_snapshot_time: 507.9\u00b5s, rocksdb: {key_skipped_count: 2969383, block: {cache_hit_count: 7347}}}                                                                                                                                            | not(isnull(imdb.movie_companies.note))                                                                                                                                                      | N/A       | N/A     |\r\n|       \u2502             \u2514\u2500TableFullScan_210  | 4958296.00 | 4958296    | cop[tikv] | table:mc                                    | tikv_task:{proc max:813ms, min:514ms, avg: 617ms, p80:813ms, p95:813ms, iters:4864, tasks:5}                                                                                                                                                                                                                                                                                                                                                      | keep order:false                                                                                                                                                                            | N/A       | N/A     |\r\n|       \u2514\u2500TableReader_229(Probe)           | 7480087.00 | 7480087    | root      |                                             | time:51ms, loops:7311, cop_task: {num: 10, max: 867.7ms, min: 196.6\u00b5s, avg: 420.3ms, p95: 867.7ms, max_proc_keys: 960000, p95_proc_keys: 960000, tot_proc: 4.05s, tot_wait: 223.5\u00b5s, rpc_num: 10, rpc_time: 4.2s, copr_cache_hit_ratio: 0.30, build_task_duration: 22.7\u00b5s, max_distsql_concurrency: 10}                                                                                                                                           | data:TableFullScan_228                                                                                                                                                                      | 114.3 MB  | N/A     |\r\n|         \u2514\u2500TableFullScan_228              | 7480087.00 | 7480087    | cop[tikv] | table:mk                                    | tikv_task:{proc max:796ms, min:313ms, avg: 482.9ms, p80:717ms, p95:796ms, iters:7350, tasks:10}, scan_detail: {total_process_keys: 5957358, total_process_keys_size: 270050336, total_keys: 5957365, get_snapshot_time: 64.9\u00b5s, rocksdb: {key_skipped_count: 5957358, block: {cache_hit_count: 10560}}}                                                                                                                                           | keep order:false                                                                                                                                                                            | N/A       | N/A     |\r\n+------------------------------------------+------------+------------+-----------+---------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------+---------+\r\n\r\n```\r\n\r\n### 4. What is your TiDB version? (Required)\r\n\r\n<!-- Paste the output of SELECT tidb_version() -->\r\nSince https://github.com/pingcap/tidb/pull/48264\r\n\r\n",
    "state": "open",
    "created_at": "2023-12-27T12:07:18Z",
    "updated_at": "2025-07-03T05:52:09Z",
    "closed_at": null,
    "labels": [
      "type/bug",
      "type/performance",
      "sig/execution",
      "type/regression",
      "severity/major",
      "affects-7.6",
      "affects-8.1",
      "affects-8.5"
    ],
    "comments_count": 7,
    "author": "Yui-Song",
    "assignees": [
      "xzhangxian1008"
    ],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "docker",
      "performance",
      "tikv"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": false,
    "engagement_score": 25
  },
  {
    "id": 1768590934,
    "number": 44893,
    "title": "Allow lightning to import base64 encoded csv dump files ",
    "body": "## Feature Request\r\nAllow lightning to decode base64 encoded csv dump files before ingesting in tidb \r\n**Is your feature request related to a problem? Please describe:**\r\n<!-- A clear and concise description of what the problem is. Ex. I'm always frustrated when [...] -->\r\n\r\n**Describe the feature you'd like:**\r\n<!-- A clear and concise description of what you want to happen. -->\r\n\r\n**Describe alternatives you've considered:**\r\n<!-- A clear and concise description of any alternative solutions or features you've considered. -->\r\n\r\n**Teachability, Documentation, Adoption, Migration Strategy:**\r\n<!-- If you can, explain some scenarios how users might use this, situations it would be helpful in. Any API designs, mockups, or diagrams are also helpful. -->\r\n",
    "state": "open",
    "created_at": "2023-06-21T22:19:19Z",
    "updated_at": "2025-07-03T05:44:29Z",
    "closed_at": null,
    "labels": [
      "type/feature-request",
      "component/lightning"
    ],
    "comments_count": 5,
    "author": "ankita25",
    "assignees": [],
    "milestone": null,
    "category": "migration",
    "tech_context": [
      "mysql"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": false,
    "engagement_score": 12
  },
  {
    "id": 3026956148,
    "number": 60925,
    "title": "Backfilling for adding index needs a metric to display the speed of writing kvs",
    "body": "## Enhancement\n\nAfter https://github.com/pingcap/tidb/pull/57145, users can set the speed limitation when writing to tikv. However, ddl lacks a metric like IMPORT INTO to display the speed. The metric in tikv panel can not reflect the speed in tidb side. So it is hard for users to decide the setting value.",
    "state": "closed",
    "created_at": "2025-04-29T03:52:48Z",
    "updated_at": "2025-07-03T03:29:47Z",
    "closed_at": "2025-05-06T03:44:34Z",
    "labels": [
      "type/enhancement",
      "component/ddl",
      "affects-7.5",
      "affects-8.1",
      "affects-8.5"
    ],
    "comments_count": 0,
    "author": "CbcWestwolf",
    "assignees": [],
    "milestone": null,
    "category": "enhancement",
    "tech_context": [
      "tikv"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 5
  },
  {
    "id": 599717510,
    "number": 16381,
    "title": "Cannot get latest version: module contains a go.mod file, so module path should be github.com/pingcap/tidb/v3",
    "body": "## Background\r\nThe `github.com/pingcap/tidb` uses [Go modules](https://github.com/golang/go/wiki/Modules) and the current release version is `v3`. And it\u2019s module path is `\"github.com/pingcap/tidb\"`, instead of `\"github.com/pingcap/tidb/v3\"`. It must comply with the specification of \"Releasing Modules for v2 or higher\" available in the Modules documentation. Quoting the specification:\r\n> A package that has opted in to modules _must_ include the major version in the import path to import any v2+ modules\r\n> To preserve import compatibility, the go command requires that modules with major version v2 or later use a module path with that major version as the final element. For example, version v2.0.0 of _example.com/m_ must instead use module path _example.com/m/v2_.\r\nhttps://github.com/golang/go/wiki/Modules#releasing-modules-v2-or-higher\r\n\r\n## Steps to Reproduce\r\nGO111MODULE=on, run `go get` targeting any version >= v2.1.0 of the `pingcap/tidb`:\r\n```\r\n$ go get github.com/pingcap/tidb@v3.0.12\r\ngo: finding github.com/pingcap/tidb v3.0.12\r\ngo: finding github.com/pingcap/tidb v3.0.12\r\ngo get github.com/pingcap/tidb@v3.0.12: github.com/pingcap/tidb@v3.0.12: invalid version: module contains a go.mod file, so major version must be compatible: should be v0 or v1, not v3\r\n```\r\nrun `go get github.com/pingcap/tidb`, the version will stuck in v2.0.11:\r\n```\r\n$go get github.com/pingcap/tidb\r\ngo: finding github.com/pingcap/tidb v2.0.11+incompatible\r\ngo: downloading github.com/pingcap/tidb v2.0.11+incompatible\r\ngo: extracting github.com/pingcap/tidb v2.0.11+incompatible\r\n```\r\nSO anyone using Go modules will not be able to easily use any newer version of `pingcap/tidb`.\r\n\r\n## Solution\r\n### 1. Kill the go.mod files, rolling back to GOPATH.\r\nThis would push them back to not being managed by Go modules (instead of incorrectly using Go modules).\r\nEnsure compatibility for downstream module-aware projects and module-unaware projects projects\r\n\r\nI see these dependencies in your go.mod file, which need modle awareness. So you'd better not use third-party tools(such as: Dep, glide, govendor\u2026).\r\n```\r\ngithub.com/Jeffail/gabs/v2 v2.5.1 \r\ngithub.com/pingcap/pd/v4 v4.0.0-rc.2.0.20200730093003-dc8c75cf7ca0 \r\n```\r\nYou also need to update the import path to:\r\n```\r\nimport github.com/Jeffail/gabs/\u2026\r\nimport github.com/pingcap/pd/\u2026\r\n```\r\n\r\n\r\n### 2. Fix module path to strictly follow SIV rules.\r\nPatch the `go.mod` file to declare the module path as `github.com/pingcap/tidb/v3` as [per the specs](https://github.com/golang/go/wiki/Modules#semantic-import-versioning). And adjust all internal imports.\r\nThe downstream projects might be negatively affected in their building if they are module-unaware (Go versions older than 1.9.7 and 1.10.3; Or use third-party dependency management tools, such as: Dep, glide,govendor\u2026).\r\n\r\n**[*]** You can see who will be affected here: [85 module-unaware users, i.e., GayStudio/openbilibili, GDWGH/mu-li-xian-bei, smallnest/soar]\r\nhttps://github.com/search?o=desc&q=%22github.com%2Fpingcap%2Ftidb%22+filename%3AGodeps.json+filename%3Avendor.conf+filename%3Avendor.json+filename%3Aglide.toml+filename%3AGodep.toml&s=indexed&type=Code\r\n\r\nIf you don't want to break the above repos. This method can provides better backwards-compatibility.\r\nRelease a v2 or higher module through the major subdirectory strategy: Create a new v3 `subdirectory` (github.com/pingcap/tidb/v3) and place a new go.mod file in that subdirectory. The `module path` must end with `/v3`. Copy or move the code into the v3 subdirectory. Update `import statements` within the module to also use `/v3` (import \"github.com/pingcap/tidb/v3/\u2026\"). Tag the release with `v3.x.y`.\r\n\r\n\r\n### 3.  Suggest your downstream module users use hash instead of a version tag.\r\nIf the standard rule of go modules conflicts with your development mode. Or not intended to be used as a library and does not make any guarantees about the API. So you can\u2019t comply with the specification of \"Releasing Modules for v2 or higher\" available in the Modules documentation. \r\nRegardless, since it's against one of the design choices of Go, it'll be a bit of a hack. Instead of `go get github.com/pingcap/tidb@version-tag`, module users need to use this following way to get the `pingcap/tidb`:\r\n   (1) Search for the `tag` you want (in browser)\r\n   (2) Get the `commit hash` for the `tag` you want\r\n   (3) Run `go get github.com/pingcap/tidb@commit-hash`\r\n   (4) Edit the go.mod file to put a comment about which version you actually used\r\nThis will make it difficult for module users to get and upgrade `pingcap/tidb`.\r\n\r\n**[*]** You can see who will be affected here: [341 module users, e.g., ushell/yearning, chaos-mesh/go-sqlancer, chaos-mesh/horoscope]\r\nhttps://github.com/search?q=pingcap%2Ftidb+filename%3Ago.mod&type=Code\r\n\r\n\r\n## Summary\r\nYou can make a choice to fix DM issues by balancing your own development schedules/mode against the affects on the downstream projects.\r\n\r\nFor this issue, `Solution 2` can maximize your benefits and with minimal impacts to your downstream projects the ecosystem. \r\n\r\n## References\r\n* https://github.com/golang/go/wiki/Modules#semantic-import-versioning\r\n* https://golang.org/cmd/go/#hdr-Module_compatibility_and_semantic_versioning\r\n* https://github.com/golang/go/wiki/Modules#releasing-modules-v2-or-higher\r\n",
    "state": "open",
    "created_at": "2020-04-14T16:56:05Z",
    "updated_at": "2025-07-03T02:34:27Z",
    "closed_at": null,
    "labels": [
      "type/enhancement",
      "wontfix"
    ],
    "comments_count": 14,
    "author": "KateGo520",
    "assignees": [],
    "milestone": null,
    "category": "enhancement",
    "tech_context": [
      "mysql",
      "backup",
      "pd"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": false,
    "engagement_score": 22
  },
  {
    "id": 3124470168,
    "number": 61565,
    "title": "internal SQL wrongly use get plan cost v1",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\nWhen you enable the flame graph, you will find that some of the internal SQL stacks have stacks that call ```get_plan_cost_v1```, which is clearly incorrect.\n\n![Image](https://github.com/user-attachments/assets/0f53b1e0-fb89-453b-9250-b835fcf8360b)\n\n<!-- a step by step guide for reproducing the bug. -->\n\n### 2. What did you expect to see? (Required)\n\n### 3. What did you see instead (Required)\n\n### 4. What is your TiDB version? (Required)\n\n<!-- Paste the output of SELECT tidb_version() -->\n\n",
    "state": "closed",
    "created_at": "2025-06-06T11:12:24Z",
    "updated_at": "2025-07-02T23:36:49Z",
    "closed_at": "2025-06-10T05:22:29Z",
    "labels": [
      "type/bug",
      "sig/planner",
      "severity/major",
      "affects-6.5",
      "affects-7.1",
      "affects-7.5",
      "affects-8.1",
      "report/customer",
      "affects-8.5"
    ],
    "comments_count": 0,
    "author": "hawkingrei",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "docker"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 9
  },
  {
    "id": 3178571136,
    "number": 62019,
    "title": "unexpected query result using aggregation",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n``` SQL\nuse test;\nCREATE TABLE `t910beff5` (\n  `col_40` tinyint unsigned DEFAULT '95',\n  `col_41` tinytext COLLATE gbk_bin NOT NULL\n) ENGINE=InnoDB DEFAULT CHARSET=gbk COLLATE=gbk_bin;\nINSERT INTO `t910beff5` VALUES(7,'CWHObI8-!amnYA'),(1,'g+!OHa@OTdsA2#JN'),(249,'cwx!P4xaX)U'),(118,'mlDJX^n+'),(0,'EOZ9*QUsH%qi)%'),(183,'9*Lzmwg%pxy'),(139,'!ME5dBDrOG5'),(127,'BNb8SajqZ'),(209,'IWS^j'),(68,'U9v99'),(187,'dE*Zzjz#0&'),(10,'iC'),(87,'jIgUfpWzE9#oQhn&#&'),(4,'BLmM2'),(153,'(BG(8nIFNyE$%i'),(51,'EDhm)%Fie~qReM');\n\nSELECT AVG(DISTINCT `t910beff5`.`col_40`) AS `r0` FROM `t910beff5` WHERE `t910beff5`.`col_41`>='D1$9+VTpEe)' OR `t910beff5`.`col_41` BETWEEN 'znRD*2pkmtm4' AND 'PBueg(&tWY%dzsT(_' GROUP BY `t910beff5`.`col_40`,`t910beff5`.`col_41` HAVING `t910beff5`.`col_41`='cwx!P4xaX)U';\n\n```\n\n<!-- a step by step guide for reproducing the bug. -->\n\n### 2. What did you expect to see? (Required)\nOne row\n### 3. What did you see instead (Required)\n```  SQL\nmysql> SELECT AVG(DISTINCT `t910beff5`.`col_40`) AS `r0` FROM `t910beff5` WHERE `t910beff5`.`col_41`>='D1$9+VTpEe)' OR `t910beff5`.`col_41` BETWEEN 'znRD*2pkmtm4' AND 'PBueg(&tWY%dzsT(_' GROUP BY `t910beff5`.`col_40`,`t910beff5`.`col_41` HAVING `t910beff5`.`col_41`='cwx!P4xaX)U';\nEmpty set (0.02 sec)\n\n```\n### 4. What is your TiDB version? (Required)\ne87b8a9566b9dc61be69ded626254dc48c736006\n<!-- Paste the output of SELECT tidb_version() -->\n\n",
    "state": "closed",
    "created_at": "2025-06-26T10:04:02Z",
    "updated_at": "2025-07-02T21:37:52Z",
    "closed_at": "2025-07-02T21:37:52Z",
    "labels": [
      "type/bug",
      "sig/planner",
      "severity/major",
      "fuzz/randomtest",
      "affects-8.5",
      "affects-9.0"
    ],
    "comments_count": 6,
    "author": "wjhuang2016",
    "assignees": [
      "hawkingrei"
    ],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "mysql"
    ],
    "error_patterns": [],
    "has_solution": true,
    "is_recent": true,
    "engagement_score": 21
  },
  {
    "id": 3194713301,
    "number": 62134,
    "title": "short-circuit in SELECT OR/AND clause",
    "body": "## Bug Report\n\nHi, TiDB developers, please consider such queries:\n```sql\nSELECT TRUE OR (SELECT COUNT(*) FROM t1)>1;\nSELECT FALSE AND (SELECT COUNT(*) FROM t1)>1;\n```\nFor the first query, there are two conditions in the `WHERE` clause, connected by `OR`, which means that if any one of the conditions is met, it is `TRUE`. Therefore, when we calculate two conditions, if we calculate one of the conditions to be `TRUE`, we can short-circuit the `OR` expressions, which can avoid unnecessary calculations. For the second query, similarly, if we calculate one of the conditions to be `FALSE`, we can short-circuit the `AND` expressions. However, TiDB does not short-circuit to optimize such queries. Especially, short-circuiting is necessary when the computation of the condition is expensive.\n\n### 1. Minimal reproduce step\n\n(1) Create table and insert data\n```sql\nCREATE TABLE t1(c1 INT8);\n\nCREATE TEMPORARY TABLE digits (d INT);\nINSERT INTO digits VALUES (0),(1),(2),(3),(4),(5),(6),(7),(8),(9);\n\n-- insert into t1 with 10 million rows\nINSERT INTO t1\nSELECT \n  d1.d + d2.d*10 + d3.d*100 + d4.d*1000 + d5.d*10000 + d6.d*100000 + d7.d*1000000 AS num\nFROM \n  digits d1, digits d2, digits d3, digits d4, digits d5, digits d6, digits d7\nWHERE \n  d1.d + d2.d*10 + d3.d*100 + d4.d*1000 + d5.d*10000 + d6.d*100000 + d7.d*1000000 <= 10000000;\n```\n(2) Execute query\n```sql\nSELECT TRUE OR (SELECT COUNT(c1) FROM t1)>1;\n+------------------------------------+\n| TRUE OR (SELECT COUNT(c1) FROM t1)>1 |\n+------------------------------------+\n|                                  1 |\n+------------------------------------+\n1 row in set (1.43 sec)\n\nSELECT TRUE;\n+------+\n| TRUE |\n+------+\n|    1 |\n+------+\n1 row in set (0.00 sec)\n\nSELECT FALSE AND (SELECT COUNT(c1) FROM t1)>1;\n+--------------------------------------+\n| FALSE AND (SELECT COUNT(c1) FROM t1)>1 |\n+--------------------------------------+\n|                                    0 |\n+--------------------------------------+\n1 row in set (1.43 sec)\n\nSELECT FALSE;\n+-------+\n| FALSE |\n+-------+\n|     0 |\n+-------+\n1 row in set (0.00 sec)\n```\nThe following case is more obvious. All of the four queries trigger `ERROR 8175 (HY000)`. Especially, their `EXPLAIN` statements perform actual execution.\n```sql\nSELECT TRUE OR (SELECT COUNT(*) FROM t1 a, t1 b)>1;\nSELECT FALSE AND (SELECT COUNT(*) FROM t1 a, t1 b)>1;\nEXPLAIN SELECT TRUE OR (SELECT COUNT(*) FROM t1 a, t1 b)>1;\nEXPLAIN SELECT TRUE OR (SELECT COUNT(*) FROM t1 a, t1 b)>1;\nERROR 8175 (HY000): Your query has been cancelled due to exceeding the allowed memory limit for a single SQL query. Please try narrowing your query scope or increase the tidb_mem_quota_query limit and try again.[conn=2378170378]\n```\n### 2. What did you expect to see? \n`SELECT OR/AND` clause could short-circuit, and `EXPLAIN` statements do not perform actual execution.\n```sql\nSELECT TRUE OR (SELECT COUNT(c1) FROM t1)>1;\n+------------------------------------+\n| TRUE OR (SELECT COUNT(c1) FROM t1)>1 |\n+------------------------------------+\n|                                  1 |\n+------------------------------------+\n1 row in set (0.00 sec)\n\nSELECT FALSE AND (SELECT COUNT(c1) FROM t1)>1;\n+--------------------------------------+\n| FALSE AND (SELECT COUNT(c1) FROM t1)>1 |\n+--------------------------------------+\n|                                    0 |\n+--------------------------------------+\n1 row in set (0.00 sec)\n```\n\n### 3. What is your TiDB version? (Required)\n| Release Version: v8.5.2\nEdition: Community\nGit Commit Hash: f43a13324440f92209e2a9f04c1bbe9cf763978d\nGit Branch: HEAD\nUTC Build Time: 2025-05-29 03:30:55\nGoVersion: go1.23.8\nRace Enabled: false\nCheck Table Before Drop: false\nStore: tikv |\n\n",
    "state": "open",
    "created_at": "2025-07-02T06:14:33Z",
    "updated_at": "2025-07-02T19:41:38Z",
    "closed_at": null,
    "labels": [
      "type/enhancement",
      "sig/planner",
      "severity/moderate"
    ],
    "comments_count": 0,
    "author": "jinhui-lai",
    "assignees": [
      "hawkingrei"
    ],
    "milestone": null,
    "category": "enhancement",
    "tech_context": [
      "backup",
      "tikv"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 6
  },
  {
    "id": 3003203159,
    "number": 60640,
    "title": "the y-axis format of Kv Request Duration in Resource Control grafana is wrong",
    "body": "## Bug Report\n\n<img width=\"720\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/ec502cb8-3c25-4285-b033-37c1ff0d0537\" />\n\n\u201cSuccessful KV Request Wait Duration\u201d is type of \"duration\".\n\n",
    "state": "closed",
    "created_at": "2025-04-17T18:41:00Z",
    "updated_at": "2025-07-02T17:40:54Z",
    "closed_at": "2025-04-28T06:49:36Z",
    "labels": [
      "type/bug",
      "severity/moderate",
      "affects-7.5",
      "affects-8.1",
      "affects-8.5"
    ],
    "comments_count": 0,
    "author": "glorv",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "docker",
      "monitoring"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 5
  },
  {
    "id": 3003203159,
    "number": 60640,
    "title": "the y-axis format of Kv Request Duration in Resource Control grafana is wrong",
    "body": "## Bug Report\n\n<img width=\"720\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/ec502cb8-3c25-4285-b033-37c1ff0d0537\" />\n\n\u201cSuccessful KV Request Wait Duration\u201d is type of \"duration\".\n\n",
    "state": "closed",
    "created_at": "2025-04-17T18:41:00Z",
    "updated_at": "2025-07-02T17:40:54Z",
    "closed_at": "2025-04-28T06:49:36Z",
    "labels": [
      "type/bug",
      "severity/moderate",
      "affects-7.5",
      "affects-8.1",
      "affects-8.5"
    ],
    "comments_count": 0,
    "author": "glorv",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "docker",
      "monitoring"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 5
  },
  {
    "id": 3191293223,
    "number": 62116,
    "title": "Predicate simplification cannot be performed in CTEs.",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\n```\nset @@session.tidb_stats_load_sync_wait=2000;\ncreate table t1 (a int, b  varchar(32));\ninsert into t1 values\n(4,'aaaa' ), (7,'bb'), (1,'ccc'), (4,'dd');\ninsert into t1 values\n(3,'eee'), (7,'bb'), (1,'fff'), (4,'ggg');\ncreate table t2 (c int);\ninsert into t2 values\n(2), (4), (5), (3);\n\nexplain format = 'brief'\nwith t as (select distinct a from t1 where b >= 'c')\nselect * from t as r1, t as r2 where r1.a=r2.a;\nid\testRows\ttask\taccess object\toperator info\nHashJoin\t2131.20\troot\t\tinner join, equal:[eq(mariadb_cte_nonrecursive.t1.a, mariadb_cte_nonrecursive.t1.a)]\n\u251c\u2500Selection(Build)\t2131.20\troot\t\tnot(isnull(mariadb_cte_nonrecursive.t1.a))\n\u2502 \u2514\u2500CTEFullScan\t2664.00\troot\tCTE:t AS r2\tdata:CTE_0\n\u2514\u2500Selection(Probe)\t2131.20\troot\t\tnot(isnull(mariadb_cte_nonrecursive.t1.a))\n  \u2514\u2500CTEFullScan\t2664.00\troot\tCTE:t AS r1\tdata:CTE_0\nCTE_0\t2664.00\troot\t\tNon-Recursive CTE\n\u2514\u2500HashAgg(Seed Part)\t2664.00\troot\t\tgroup by:mariadb_cte_nonrecursive.t1.a, funcs:firstrow(mariadb_cte_nonrecursive.t1.a)->mariadb_cte_nonrecursive.t1.a\n  \u2514\u2500TableReader\t2664.00\troot\t\tdata:HashAgg\n    \u2514\u2500HashAgg\t2664.00\tcop[tikv]\t\tgroup by:mariadb_cte_nonrecursive.t1.a, \n      \u2514\u2500Selection\t3330.00\tcop[tikv]\t\tge(mariadb_cte_nonrecursive.t1.b, \"c\"), or(not(isnull(mariadb_cte_nonrecursive.t1.a)), not(isnull(mariadb_cte_nonrecursive.t1.a)))\n        \u2514\u2500TableFullScan\t10000.00\tcop[tikv]\ttable:t1\tkeep order:false, stats:pseudo\n```\n<!-- a step by step guide for reproducing the bug. -->\n\n### 2. What did you expect to see? (Required)\n\n```or(not(isnull(mariadb_cte_nonrecursive.t1.a)), not(isnull(mariadb_cte_nonrecursive.t1.a)))```\n\nshould be simplified.\n### 3. What did you see instead (Required)\n\n\ncannot be simplified.\n### 4. What is your TiDB version? (Required)\n\n<!-- Paste the output of SELECT tidb_version() -->\n\n",
    "state": "closed",
    "created_at": "2025-07-01T08:14:38Z",
    "updated_at": "2025-07-02T16:13:08Z",
    "closed_at": "2025-07-01T13:05:42Z",
    "labels": [
      "type/bug",
      "sig/planner",
      "severity/major",
      "affects-7.5",
      "affects-8.1",
      "affects-8.5"
    ],
    "comments_count": 1,
    "author": "hawkingrei",
    "assignees": [
      "hawkingrei"
    ],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "mysql",
      "backup",
      "replication",
      "tikv"
    ],
    "error_patterns": [],
    "has_solution": true,
    "is_recent": true,
    "engagement_score": 11
  },
  {
    "id": 3162284578,
    "number": 61884,
    "title": "`initGlobalVariableIfNotExists` function forget close `rs`",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\n<!-- a step by step guide for reproducing the bug. -->\n\nhttps://github.com/pingcap/tidb/blob/c597cb5e0a290153916d52a5600c7ee4b30c634a/pkg/session/bootstrap.go#L1043-L1058\n\n### 2. What did you expect to see? (Required)\n\ncall `rs.Close` before return\n\n### 3. What did you see instead (Required)\n\nforget call it and caused some states of `s` to not be cleaned up.\n\nIf `mysql.GLOBAL_VARIABLES` has a clustered index, it will report an error log like \n\n```\n[2025/06/20 16:07:36.838 +08:00] [FATAL] [bootstrap.go:3591] [\"mustExecute error\"] [error=\"try to commit with invalid txnStartTS: 18446744073709551615\"] [stack=\"github.com/pingcap/tidb/pkg/session.mustExecute\\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin-arm64-w2tsl-build-binaries/source/tidb/pkg/session/bootstrap.go:3591\\ngithub.com/pingcap/tidb/pkg/session.initGlobalVariableIfNotExists\\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin-arm64-w2tsl-build-binaries/source/tidb/pkg/session/bootstrap.go:3327\\ngithub.com/pingcap/tidb/pkg/session.upgradeToVer209\\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin-arm64-w2tsl-build-binaries/source/tidb/pkg/session/bootstrap.go:3181\\ngithub.com/pingcap/tidb/pkg/session.upgrade\\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin-arm64-w2tsl-build-binaries/source/tidb/pkg/session/bootstrap.go:1556\\ngithub.com/pingcap/tidb/pkg/session.runInBootstrapSession\\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin-arm64-w2tsl-build-binaries/source/tidb/pkg/session/session.go:3732\\ngithub.com/pingcap/tidb/pkg/session.bootstrapSessionImpl\\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin-arm64-w2tsl-build-binaries/source/tidb/pkg/session/session.go:3458\\ngithub.com/pingcap/tidb/pkg/session.BootstrapSession\\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin-arm64-w2tsl-build-binaries/source/tidb/pkg/session/session.go:3404\\nmain.createStoreDDLOwnerMgrAndDomain\\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin-arm64-w2tsl-build-binaries/source/tidb/cmd/tidb-server/main.go:416\\nmain.main\\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin-arm64-w2tsl-build-binaries/source/tidb/cmd/tidb-server/main.go:320\\nruntime.main\\n\\t/Users/pingcap/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.23.6.darwin-arm64/src/runtime/proc.go:272\"] [stack=\"github.com/pingcap/tidb/pkg/session.mustExecute\\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin-arm64-w2tsl-build-binaries/source/tidb/pkg/session/bootstrap.go:3591\\ngithub.com/pingcap/tidb/pkg/session.initGlobalVariableIfNotExists\\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin-arm64-w2tsl-build-binaries/source/tidb/pkg/session/bootstrap.go:3327\\ngithub.com/pingcap/tidb/pkg/session.upgradeToVer209\\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin-arm64-w2tsl-build-binaries/source/tidb/pkg/session/bootstrap.go:3181\\ngithub.com/pingcap/tidb/pkg/session.upgrade\\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin-arm64-w2tsl-build-binaries/source/tidb/pkg/session/bootstrap.go:1556\\ngithub.com/pingcap/tidb/pkg/session.runInBootstrapSession\\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin-arm64-w2tsl-build-binaries/source/tidb/pkg/session/session.go:3732\\ngithub.com/pingcap/tidb/pkg/session.bootstrapSessionImpl\\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin-arm64-w2tsl-build-binaries/source/tidb/pkg/session/session.go:3458\\ngithub.com/pingcap/tidb/pkg/session.BootstrapSession\\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin-arm64-w2tsl-build-binaries/source/tidb/pkg/session/session.go:3404\\nmain.createStoreDDLOwnerMgrAndDomain\\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin-arm64-w2tsl-build-binaries/source/tidb/cmd/tidb-server/main.go:416\\nmain.main\\n\\t/Users/pingcap/workspace/bp-tidb-release-darwin-arm64-w2tsl-build-binaries/source/tidb/cmd/tidb-server/main.go:320\\nruntime.main\\n\\t/Users/pingcap/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.23.6.darwin-arm64/src/runtime/proc.go:272\"]\n```\n\n### 4. What is your TiDB version? (Required)\n\n<!-- Paste the output of SELECT tidb_version() -->\nv8.5.2, master\n",
    "state": "closed",
    "created_at": "2025-06-20T07:54:36Z",
    "updated_at": "2025-07-02T16:00:02Z",
    "closed_at": "2025-06-21T01:35:49Z",
    "labels": [
      "type/bug",
      "type/regression",
      "sig/sql-infra",
      "severity/major",
      "report/customer",
      "affects-8.5",
      "impact/upgrade"
    ],
    "comments_count": 8,
    "author": "Defined2014",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "mysql"
    ],
    "error_patterns": [],
    "has_solution": true,
    "is_recent": true,
    "engagement_score": 23
  },
  {
    "id": 3196239568,
    "number": 62159,
    "title": "Privilege check is mistakenly skipped for the plan cache point get special path",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\nconn1\n`mysql -h 127.0.0.1 -P 4000 -u root`\n```sql\nuse test;\nCREATE USER 'testuser'@'%';\nCREATE TABLE test.t1 (a INT, b INT, PRIMARY KEY(a));\nGRANT SELECT ON test.t1 TO 'testuser'@'%';\n```\n\nconn2\n`mysql -h 127.0.0.1 -P 4000 -u testuser`\n```sql\nuse test;\nPREPARE stmt1 FROM 'SELECT * FROM test.t1 WHERE a = 0';\nEXECUTE stmt1;\n```\n\nconn1\n```\nREVOKE SELECT ON test.t1 FROM 'testuser'@'%';\n```\n\nconn2\n```\nEXECUTE stmt1;\n```\n\n### 2. What did you expect to see? (Required)\n\n`ERROR 1142 (42000): SELECT command denied to user 'testuser'@'127.0.0.1' for table 't1'`\n\n### 3. What did you see instead (Required)\n\nSuccessfully executed.\n\n### 4. What is your TiDB version? (Required)\n\nFrom v4.0 until the latest nightly (pre v9.0)\n\n",
    "state": "open",
    "created_at": "2025-07-02T15:04:02Z",
    "updated_at": "2025-07-02T15:17:59Z",
    "closed_at": null,
    "labels": [
      "type/bug",
      "sig/planner",
      "severity/major",
      "affects-6.1",
      "affects-6.5",
      "affects-7.1",
      "affects-7.5",
      "affects-8.1",
      "affects-8.5"
    ],
    "comments_count": 0,
    "author": "time-and-fate",
    "assignees": [
      "time-and-fate"
    ],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "mysql"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 12
  },
  {
    "id": 3195105557,
    "number": 62142,
    "title": "lightning: service safe point is not cleared on exit",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\n<!-- a step by step guide for reproducing the bug. -->\n\nwith master, we can see the service safe point still exist after lightning exist, it will block GC for awhile, and it will expire after 10m, so it's not a serious issue\n```\n\u279c  lightning /Users/me/code/pingcap/tidb/bin/tidb-lightning-master --config test.toml\nVerbose debug logs will be written to lightning.log\n\ntidb lightning exit successfully\n\n\u279c  lightning etcdctl --endpoints localhost:2379 get --prefix \"\"|grep -a lightning\n/pd/7522392937985088901/gc/safe_point/service/lightning-c8a20fff-07bd-4744-bfa5-a12e529847c5\n{\"service_id\":\"lightning-c8a20fff-07bd-4744-bfa5-a12e529847c5\",\"expired_at\":1751444458,\"safe_point\":459130498717057084}\n```\n\n### 2. What did you expect to see? (Required)\nclear on exit\n### 3. What did you see instead (Required)\nnot\n### 4. What is your TiDB version? (Required)\nmaster\n<!-- Paste the output of SELECT tidb_version() -->\n\n",
    "state": "closed",
    "created_at": "2025-07-02T08:43:26Z",
    "updated_at": "2025-07-02T13:45:43Z",
    "closed_at": "2025-07-02T13:45:43Z",
    "labels": [
      "type/bug",
      "severity/minor",
      "component/lightning"
    ],
    "comments_count": 0,
    "author": "D3Hunter",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "pd",
      "cdc"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 3
  },
  {
    "id": 2746663389,
    "number": 58364,
    "title": "go tool trace is broken, \"failed to parse any useful part of the trace: misuse of region in goroutine\"",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\n<!-- a step by step guide for reproducing the bug. -->\n\nstart tidb, run some workload\n\nthen use the trace tool\n\n```\ncurl 'http://127.0.0.1:10080/debug/pprof/trace?seconds=3' > trace.out\ngo tool trace -http=:6062 trace.out \n2024/12/18 11:29:22 Preparing trace for viewer...\nfailed to parse any useful part of the trace: misuse of region in goroutine 387: region end {228 pdclient.tsoReqSend} when the inner-most active region start event is {0 pdclient.tsoReqSend}\n```\n\n### 2. What did you expect to see? (Required)\n\ngo tool trace works.\n\n### 3. What did you see instead (Required)\n\nIt's broken.\n\n> failed to parse any useful part of the trace: misuse of region in goroutine 387: region end {228 pdclient.tsoReqSend} when the inner-most active region start event is {0 pdclient.tsoReqSend}\n\n\n### 4. What is your TiDB version? (Required)\n\n<!-- Paste the output of SELECT tidb_version() -->\n\n",
    "state": "closed",
    "created_at": "2024-12-18T03:31:24Z",
    "updated_at": "2025-07-02T13:30:29Z",
    "closed_at": "2024-12-25T10:53:38Z",
    "labels": [
      "type/bug",
      "sig/sql-infra"
    ],
    "comments_count": 3,
    "author": "tiancaiamao",
    "assignees": [
      "tiancaiamao"
    ],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "backup",
      "pd"
    ],
    "error_patterns": [],
    "has_solution": true,
    "is_recent": false,
    "engagement_score": 11
  },
  {
    "id": 3194716060,
    "number": 62135,
    "title": "optimize performance of query with limit",
    "body": "## Enhancement\n\n\n### 1. Minimal reproduce step (Required)\n\n\n1. prepare data.\n\n```sql\ncreate table orders (user_name varchar(10) not null, item_id int not null, index (user_name));\ncreate table items  (id int auto_increment key, name varchar(100));\ninsert into orders values (\"user1\", rand()*10000);\ninsert into orders select \"user1\", rand()*10000 from orders;\ninsert into orders select \"user1\", rand()*10000 from orders;\ninsert into orders select \"user1\", rand()*10000 from orders;\ninsert into orders select \"user1\", rand()*10000 from orders;\ninsert into orders select \"user1\", rand()*10000 from orders;\ninsert into orders select \"user1\", rand()*10000 from orders;\ninsert into orders select \"user1\", rand()*10000 from orders;\ninsert into orders select \"user1\", rand()*10000 from orders;\ninsert into orders select \"user1\", rand()*10000 from orders;\ninsert into orders select \"user1\", rand()*10000 from orders;\ninsert into orders select \"user2\", rand()*10000 from orders;\ninsert into orders select \"user2\", rand()*10000 from orders limit 1024;\ninsert into orders select \"user2\", rand()*10000 from orders limit 2048;\ninsert into items (name) select uuid() from orders limit 2000;\ninsert into items (name) select uuid() from orders limit 2000;\ninsert into items (name) select uuid() from orders limit 2000;\ninsert into items (name) select uuid() from items  limit 4000;\nanalyze table orders,items;\n\n-- For the convenience of analysis, disable paging.\nset @@tidb_enable_paging=0;\n```\n\n2. Execute the following querys.\n\n```sql\ntest> explain analyze select /*+ INL_JOIN(orders, items) */ * from orders join items on orders.item_id = items.id where orders.user_name='user1' order by items.name desc limit 20;\n+---------------------------+---------+---------+-----------+---------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+----------+---------+\n| id                        | estRows | actRows | task      | access object | execution info                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | operator info                                                                                                                               | memory   | disk    |\n+---------------------------+---------+---------+-----------+---------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+----------+---------+\n| TopN_14                   | 20.00   | 20      | root      |               | time:14.6ms, open:40.1\u00b5s, close:2.96\u00b5s, loops:2, RU:15.69                                                                                                                                                                                                                                                                                                                                                                                                                                             | test.items.name:desc, offset:0, count:20                                                                                                    | 5.88 KB  | 0 Bytes |\n| \u2514\u2500IndexJoin_19            | 1024.00 | 1024    | root      |               | time:14.4ms, open:19.9\u00b5s, close:2.38\u00b5s, loops:3, inner:{total:25.6ms, concurrency:5, task:5, construct:739.8\u00b5s, fetch:24.6ms, build:281.8\u00b5s}, probe:349\u00b5s                                                                                                                                                                                                                                                                                                                                             | inner join, inner:TableReader_40, outer key:test.orders.item_id, inner key:test.items.id, equal cond:eq(test.orders.item_id, test.items.id) | 134.8 KB | N/A     |\n|   \u251c\u2500TableReader_35(Build) | 1024.00 | 1024    | root      |               | time:5.01ms, open:18.6\u00b5s, close:1.25\u00b5s, loops:8, cop_task: {num: 1, max: 4.94ms, proc_keys: 5120, tot_proc: 4.54ms, tot_wait: 32.2\u00b5s, copr_cache_hit_ratio: 0.00, build_task_duration: 4.54\u00b5s, max_distsql_concurrency: 1}, fetch_resp_duration: 4.96ms, rpc_info:{Cop:{num_rpc:1, total_time:4.93ms}}                                                                                                                                                                                                | data:Selection_34                                                                                                                           | 21.5 KB  | N/A     |\n|   \u2502 \u2514\u2500Selection_34        | 1024.00 | 1024    | cop[tikv] |               | tikv_task:{time:4ms, loops:10}, scan_detail: {total_process_keys: 5120, total_process_keys_size: 235458, total_keys: 5121, get_snapshot_time: 17.4\u00b5s, rocksdb: {delete_skipped_count: 4864, key_skipped_count: 9984, block: {}}}, time_detail: {total_process_time: 4.54ms, total_suspend_time: 14.9\u00b5s, total_wait_time: 32.2\u00b5s, total_kv_read_wall_time: 4ms, tikv_grpc_process_time: 17.7\u00b5s, tikv_grpc_wait_time: 36.2\u00b5s, tikv_wall_time: 4.69ms}                                                   | eq(test.orders.user_name, \"user1\")                                                                                                          | N/A      | N/A     |\n|   \u2502   \u2514\u2500TableFullScan_33  | 5120.00 | 5120    | cop[tikv] | table:orders  | tikv_task:{time:4ms, loops:10}                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | keep order:false                                                                                                                            | N/A      | N/A     |\n|   \u2514\u2500TableReader_40(Probe) | 1024.00 | 1003    | root      |               | total_time:23.7ms, total_open:0s, total_close:25.7\u00b5s, loops:10, cop_task: {num: 5, max: 8.08ms, min: 1.52ms, avg: 4.66ms, p95: 8.08ms, max_proc_keys: 495, p95_proc_keys: 495, tot_proc: 19.9ms, tot_wait: 348.1\u00b5s, copr_cache_hit_ratio: 0.00, build_task_duration: 170\u00b5s, max_distsql_concurrency: 1, max_extra_concurrency: 1}, fetch_resp_duration: 23.5ms, rpc_info:{Cop:{num_rpc:5, total_time:23.2ms}}                                                                                         | data:TableRangeScan_39                                                                                                                      | N/A      | N/A     |\n|     \u2514\u2500TableRangeScan_39   | 1024.00 | 1003    | cop[tikv] | table:items   | tikv_task:{proc max:7ms, min:1ms, avg: 4ms, p80:7ms, p95:7ms, iters:17, tasks:5}, scan_detail: {total_process_keys: 1003, total_process_keys_size: 72216, total_keys: 1034, get_snapshot_time: 249\u00b5s, rocksdb: {delete_skipped_count: 64, key_skipped_count: 128, block: {}}}, time_detail: {total_process_time: 19.9ms, total_suspend_time: 263.7\u00b5s, total_wait_time: 348.1\u00b5s, total_kv_read_wall_time: 20ms, tikv_grpc_process_time: 404.6\u00b5s, tikv_grpc_wait_time: 167.5\u00b5s, tikv_wall_time: 21.8ms} | range: decided by [test.orders.item_id], keep order:false                                                                                   | N/A      | N/A     |\n+---------------------------+---------+---------+-----------+---------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+----------+---------+\n\ntest> explain analyze select /*+ INL_JOIN(orders, items) */ * from orders join items on orders.item_id = items.id where orders.user_name='user1' order by items.name desc;\n+---------------------------+---------+---------+-----------+---------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+----------+---------+\n| id                        | estRows | actRows | task      | access object | execution info                                                                                                                                                                                                                                                                                                                                                                                                                                 | operator info                                                                                                                               | memory   | disk    |\n+---------------------------+---------+---------+-----------+---------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+----------+---------+\n| Sort_9                    | 1024.00 | 1024    | root      |               | time:13.4ms, open:46.4\u00b5s, close:4.75\u00b5s, loops:2, RU:5.06                                                                                                                                                                                                                                                                                                                                                                                       | test.items.name:desc                                                                                                                        | 103.2 KB | 0 Bytes |\n| \u2514\u2500IndexJoin_12            | 1024.00 | 1024    | root      |               | time:12.5ms, open:35.7\u00b5s, close:3.79\u00b5s, loops:2, inner:{total:11.5ms, concurrency:5, task:1, construct:403.7\u00b5s, fetch:10.9ms, build:172.6\u00b5s}, probe:225\u00b5s                                                                                                                                                                                                                                                                                      | inner join, inner:TableReader_33, outer key:test.orders.item_id, inner key:test.items.id, equal cond:eq(test.orders.item_id, test.items.id) | 175.1 KB | N/A     |\n|   \u251c\u2500TableReader_28(Build) | 1024.00 | 1024    | root      |               | time:639.5\u00b5s, open:34.1\u00b5s, close:1.79\u00b5s, loops:3, cop_task: {num: 1, max: 514.5\u00b5s, proc_keys: 0, tot_proc: 1.46\u00b5s, tot_wait: 64.9\u00b5s, copr_cache_hit_ratio: 1.00, build_task_duration: 6.71\u00b5s, max_distsql_concurrency: 1}, fetch_resp_duration: 552.3\u00b5s, rpc_info:{Cop:{num_rpc:1, total_time:499\u00b5s}}                                                                                                                                          | data:Selection_27                                                                                                                           | 21.4 KB  | N/A     |\n|   \u2502 \u2514\u2500Selection_27        | 1024.00 | 1024    | cop[tikv] |               | tikv_task:{time:6ms, loops:10}, scan_detail: {get_snapshot_time: 32\u00b5s, rocksdb: {block: {}}}, time_detail: {total_process_time: 1.46\u00b5s, total_wait_time: 64.9\u00b5s, tikv_grpc_process_time: 40\u00b5s, tikv_grpc_wait_time: 26.5\u00b5s, tikv_wall_time: 170.5\u00b5s}                                                                                                                                                                                           | eq(test.orders.user_name, \"user1\")                                                                                                          | N/A      | N/A     |\n|   \u2502   \u2514\u2500TableFullScan_26  | 5120.00 | 5120    | cop[tikv] | table:orders  | tikv_task:{time:5ms, loops:10}                                                                                                                                                                                                                                                                                                                                                                                                                 | keep order:false                                                                                                                            | N/A      | N/A     |\n|   \u2514\u2500TableReader_33(Probe) | 1024.00 | 973     | root      |               | time:10.6ms, open:0s, close:5.08\u00b5s, loops:2, cop_task: {num: 1, max: 10.6ms, proc_keys: 973, tot_proc: 9.11ms, tot_wait: 49.8\u00b5s, copr_cache_hit_ratio: 0.00, build_task_duration: 63.2\u00b5s, max_distsql_concurrency: 1}, fetch_resp_duration: 10.6ms, rpc_info:{Cop:{num_rpc:1, total_time:10.6ms}}                                                                                                                                              | data:TableRangeScan_32                                                                                                                      | N/A      | N/A     |\n|     \u2514\u2500TableRangeScan_32   | 1024.00 | 973     | cop[tikv] | table:items   | tikv_task:{time:9ms, loops:5}, scan_detail: {total_process_keys: 973, total_process_keys_size: 70056, total_keys: 1062, get_snapshot_time: 29.9\u00b5s, rocksdb: {delete_skipped_count: 187, key_skipped_count: 374, block: {}}}, time_detail: {total_process_time: 9.11ms, total_suspend_time: 336.9\u00b5s, total_wait_time: 49.8\u00b5s, total_kv_read_wall_time: 9ms, tikv_grpc_process_time: 269.6\u00b5s, tikv_grpc_wait_time: 62.2\u00b5s, tikv_wall_time: 10ms} | range: decided by [test.orders.item_id], keep order:false                                                                                   | N/A      | N/A     |\n+---------------------------+---------+---------+-----------+---------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+----------+---------+\n```\n\nComparing the execution plans of these two queries, the query with `limit 20` sends many more RPCs from the `TableReader_xx(Probe)` than the query without `limit`.\n\nThe query with `limit 20`:\n\n```sql\n...\n|   \u2514\u2500TableReader_40(Probe) ... | 1003    | root | ... total_time:23.7ms, loops:10, cop_task: {num: 5, ...\n...\n```\n\nThe query without `limit 20`:\n\n```sql\n...\n|   \u2514\u2500TableReader_33(Probe) ... | 973     | root | ... time:10.6ms, loops:2, cop_task: {num: 1, ...\n...\n```\n\n\n### Version\n\nnightly.\n\n```sql\ntest> select tidb_version();\n+-----------------------------------------------------------+\n| tidb_version()                                            |\n+-----------------------------------------------------------+\n| Release Version: v9.0.0-beta.2.pre-34-g1c612763c8         |\n| Edition: Community                                        |\n| Git Commit Hash: 1c612763c8d3cbaa042e37a244a9e02301542f45 |\n| Git Branch: HEAD                                          |\n| UTC Build Time: 2025-07-02 03:22:53                       |\n| GoVersion: go1.23.10                                      |\n| Race Enabled: false                                       |\n| Check Table Before Drop: false                            |\n| Store: tikv                                               |\n| Kernel Type: Classic                                      |\n+-----------------------------------------------------------+\n1 row in set\ntest> select * from information_schema.cluster_info;\n+------+-----------------+-----------------+---------------------------------+------------------------------------------+---------------------+---------------+-----------+\n| TYPE | INSTANCE        | STATUS_ADDRESS  | VERSION                         | GIT_HASH                                 | START_TIME          | UPTIME        | SERVER_ID |\n+------+-----------------+-----------------+---------------------------------+------------------------------------------+---------------------+---------------+-----------+\n| tidb | 127.0.0.1:4000  | 127.0.0.1:10080 | 9.0.0-beta.2.pre-34-g1c612763c8 | 1c612763c8d3cbaa042e37a244a9e02301542f45 | 2025-07-02 13:42:35 | 32m54.628324s | 1338      |\n| pd   | 127.0.0.1:2379  | 127.0.0.1:2379  | 9.0.0-beta.2.pre-3-g4f5e6c0f8   | 4f5e6c0f8a0cab198603bcbb86a44923565f0fdc | 2025-07-02 13:42:20 | 33m9.628331s  | 0         |\n| tikv | 127.0.0.1:20160 | 127.0.0.1:20180 | 9.0.0-beta.2                    | 2029ff019ce689acc113f3bd886b08f861da0fbf | 2025-07-02 13:42:25 | 33m4.628335s  | 0         |\n+------+-----------------+-----------------+---------------------------------+------------------------------------------+---------------------+---------------+-----------+\n```\n\n",
    "state": "open",
    "created_at": "2025-07-02T06:15:51Z",
    "updated_at": "2025-07-02T12:21:48Z",
    "closed_at": null,
    "labels": [
      "type/enhancement"
    ],
    "comments_count": 1,
    "author": "crazycs520",
    "assignees": [],
    "milestone": null,
    "category": "enhancement",
    "tech_context": [
      "backup",
      "performance",
      "tikv",
      "pd"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 3
  },
  {
    "id": 3019367803,
    "number": 60842,
    "title": "panic in the ddl/notifier.(*DDLNotifier).OnBecomeOwner",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\n\nhttps://do.pingcap.net/jenkins/blue/organizations/jenkins/pingcap%2Ftidb%2Fghpr_unit_test/detail/ghpr_unit_test/31460/pipeline#step-69-log-1516\n\n```\npanic: assert failed, error processing events: [tikv:9006]GC life time is shorter than transaction duration, transaction starts at 2025-04-25 08:27:30.532 +0000 UTC, GC safe point is 2025-04-25 08:27:30.534 +0000 UTC [recovered]\n\n\tpanic: assert failed, error processing events: [tikv:9006]GC life time is shorter than transaction duration, transaction starts at 2025-04-25 08:27:30.532 +0000 UTC, GC safe point is 2025-04-25 08:27:30.534 +0000 UTC\n\n\ngoroutine 27868 [running]:\n\ngithub.com/pingcap/tidb/pkg/ddl/notifier.(*DDLNotifier).OnBecomeOwner.func1({0x8e03ca0, 0xc00b044310})\n\n\tpkg/ddl/notifier/subscribe.go:340 +0x314\n\ngithub.com/pingcap/tidb/pkg/util.(*WaitGroupWrapper).RunWithRecover.func1.1()\n\n\tpkg/util/wait_group_wrapper.go:195 +0xa2\n\npanic({0x8e03ca0?, 0xc00b044310?})\n\n\tGOROOT/src/runtime/panic.go:791 +0x132\n\ngithub.com/pingcap/tidb/pkg/util/intest.doPanic({0x0, 0x0}, {0xc007dade78, 0x1, 0x1})\n\n\tpkg/util/intest/assert_common.go:58 +0x79\n\ngithub.com/pingcap/tidb/pkg/util/intest.doAssert(0x0, {0xc007dade78, 0x1, 0x1})\n\n\tpkg/util/intest/assert_common.go:30 +0x6e\n\ngithub.com/pingcap/tidb/pkg/util/intest.Assert(0x0, {0xc007dade78, 0x1, 0x1})\n\n\tpkg/util/intest/assert.go:25 +0x9e\n\ngithub.com/pingcap/tidb/pkg/ddl/notifier.(*DDLNotifier).start(0xc007c73020)\n\n\tpkg/ddl/notifier/subscribe.go:164 +0x553\n\ngithub.com/pingcap/tidb/pkg/util.(*WaitGroupWrapper).RunWithRecover.func1()\n\n\tpkg/util/wait_group_wrapper.go:202 +0xcf\n\ncreated by github.com/pingcap/tidb/pkg/util.(*WaitGroupWrapper).RunWithRecover in goroutine 28005\n\n\tpkg/util/wait_group_wrapper.go:191 +0x13d\n\npanic: runtime error: invalid memory address or nil pointer dereference\n\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x256df39]\n\n\ngoroutine 1 [running]:\n\ngithub.com/bazelbuild/rules_go/go/tools/bzltestutil.toXML({0x98922a8, 0x1c}, 0xc001dbd970)\n\n\texternal/io_bazel_rules_go/go/tools/bzltestutil/xml.go:191 +0x719\n\ngithub.com/bazelbuild/rules_go/go/tools/bzltestutil.json2xml({0xa469a20, 0xc002000810}, {0x98922a8, 0x1c})\n\n\texternal/io_bazel_rules_go/go/tools/bzltestutil/xml.go:165 +0x1657\n\ngithub.com/bazelbuild/rules_go/go/tools/bzltestutil.writeReport({{0xc002180000, 0x74533, 0x80000}, 0x0, 0x0}, {0x98922a8, 0x1c}, {0xc000086010, 0xbb})\n\n\texternal/io_bazel_rules_go/go/tools/bzltestutil/wrap.go:167 +0xeb\n\ngithub.com/bazelbuild/rules_go/go/tools/bzltestutil.Wrap({0x98922a8, 0x1c})\n\n\texternal/io_bazel_rules_go/go/tools/bzltestutil/wrap.go:155 +0xf65\n\nmain.main()\n\n\tbazel-out/k8-fastbuild/bin/pkg/ddl/tests/fail/fail_test_/testmain.go:103 +0x48\n\n--\n\nCoverage runner: Not collecting coverage for failed test.\n\n```\n<!-- a step by step guide for reproducing the bug. -->\n\n### 2. What did you expect to see? (Required)\n\n### 3. What did you see instead (Required)\n\n### 4. What is your TiDB version? (Required)\n\nhttps://github.com/pingcap/tidb/commit/5faa7496ef58bcee2b56ea9fd176d44363117815\n<!-- Paste the output of SELECT tidb_version() -->\n\n",
    "state": "open",
    "created_at": "2025-04-25T08:30:26Z",
    "updated_at": "2025-07-02T10:28:32Z",
    "closed_at": null,
    "labels": [
      "type/bug",
      "component/test",
      "severity/major",
      "component/ddl"
    ],
    "comments_count": 1,
    "author": "hawkingrei",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "tikv"
    ],
    "error_patterns": [
      "error:",
      "panic:"
    ],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 6
  },
  {
    "id": 3093237518,
    "number": 61350,
    "title": "incompatible with mysql in column-type-info when use cast()",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\ncreate table testfield (f0 int,f1 decimal(10,2),f2 bigint,f3 datetime,f4 float,f5 double,primary key (f0));\ninsert into testfield values (1,1.1,1,'20250527',1.1,1.1);\ninsert into testfield values (2,2.2,2,'20250527',2.2,2.2);\n\nTiDB nightly:\nmysql> select cast(f0 as char),cast(f1 as char),cast(f2 as char),cast(f3 as char),cast(f4 as char),cast(f5 as char) from testfield;\nField   1:  `cast(f0 as char)`\nCatalog:    `def`\nDatabase:   ``\nTable:      ``\nOrg_table:  ``\nType:       VAR_STRING\nCollation:  utf8mb4_bin (46)\nLength:     44\nMax_length: 1\nDecimals:   31\nFlags:      \n\nField   2:  `cast(f1 as char)`\nCatalog:    `def`\nDatabase:   ``\nTable:      ``\nOrg_table:  ``\nType:       VAR_STRING\nCollation:  utf8mb4_bin (46)\n**Length:     5**\nMax_length: 4\nDecimals:   31\nFlags:      \n\nField   3:  `cast(f2 as char)`\nCatalog:    `def`\nDatabase:   ``\nTable:      ``\nOrg_table:  ``\nType:       VAR_STRING\nCollation:  utf8mb4_bin (46)\nLength:     80\nMax_length: 1\nDecimals:   31\nFlags:      \n\nField   4:  `cast(f3 as char)`\nCatalog:    `def`\nDatabase:   ``\nTable:      ``\nOrg_table:  ``\nType:       VAR_STRING\nCollation:  utf8mb4_bin (46)\n**Length:     5**\nMax_length: 19\nDecimals:   31\nFlags:      \n\nField   5:  `cast(f4 as char)`\nCatalog:    `def`\nDatabase:   ``\nTable:      ``\nOrg_table:  ``\nType:       VAR_STRING\nCollation:  utf8mb4_bin (46)\n**Length:     5**\nMax_length: 3\nDecimals:   31\nFlags:      \n\nField   6:  `cast(f5 as char)`\nCatalog:    `def`\nDatabase:   ``\nTable:      ``\nOrg_table:  ``\nType:       VAR_STRING\nCollation:  utf8mb4_bin (46)\n**Length:     5**\nMax_length: 3\nDecimals:   31\nFlags:      \n\n\n+------------------+------------------+------------------+---------------------+------------------+------------------+\n| cast(f0 as char) | cast(f1 as char) | cast(f2 as char) | cast(f3 as char)    | cast(f4 as char) | cast(f5 as char) |\n+------------------+------------------+------------------+---------------------+------------------+------------------+\n| 1                | 1.10             | 1                | 2025-05-27 00:00:00 | 1.1              | 1.1              |\n| 2                | 2.20             | 2                | 2025-05-27 00:00:00 | 2.2              | 2.2              |\n+------------------+------------------+------------------+---------------------+------------------+------------------+\n2 rows in set (0.00 sec)\n\nMySQL 8.4.4:\n[tidb@k8s-master ~]$ mysql --column-type-info  -u root -p123123 -D test\nmysql: [Warning] Using a password on the command line interface can be insecure.\nReading table information for completion of table and column names\nYou can turn off this feature to get a quicker startup with -A\n\nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 10\nServer version: 8.4.4 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2025, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> select cast(f0 as char),cast(f1 as char),cast(f2 as char),cast(f3 as char),cast(f4 as char),cast(f5 as char) from testfield;\nField   1:  `cast(f0 as char)`\nCatalog:    `def`\nDatabase:   ``\nTable:      ``\nOrg_table:  ``\nType:       VAR_STRING\nCollation:  utf8mb4_0900_ai_ci (255)\nLength:     44\nMax_length: 1\nDecimals:   31\nFlags:      \n\nField   2:  `cast(f1 as char)`\nCatalog:    `def`\nDatabase:   ``\nTable:      ``\nOrg_table:  ``\nType:       VAR_STRING\nCollation:  utf8mb4_0900_ai_ci (255)\n**Length:     48**\nMax_length: 4\nDecimals:   31\nFlags:      \n\nField   3:  `cast(f2 as char)`\nCatalog:    `def`\nDatabase:   ``\nTable:      ``\nOrg_table:  ``\nType:       VAR_STRING\nCollation:  utf8mb4_0900_ai_ci (255)\nLength:     80\nMax_length: 1\nDecimals:   31\nFlags:      \n\nField   4:  `cast(f3 as char)`\nCatalog:    `def`\nDatabase:   ``\nTable:      ``\nOrg_table:  ``\nType:       VAR_STRING\nCollation:  utf8mb4_0900_ai_ci (255)\n**Length:     76**\nMax_length: 19\nDecimals:   31\nFlags:      \n\nField   5:  `cast(f4 as char)`\nCatalog:    `def`\nDatabase:   ``\nTable:      ``\nOrg_table:  ``\nType:       VAR_STRING\nCollation:  utf8mb4_0900_ai_ci (255)\n**Length:     48**\nMax_length: 3\nDecimals:   31\nFlags:      \n\nField   6:  `cast(f5 as char)`\nCatalog:    `def`\nDatabase:   ``\nTable:      ``\nOrg_table:  ``\nType:       VAR_STRING\nCollation:  utf8mb4_0900_ai_ci (255)\n**Length:     88**\nMax_length: 3\nDecimals:   31\nFlags:      \n\n\n+------------------+------------------+------------------+---------------------+------------------+------------------+\n| cast(f0 as char) | cast(f1 as char) | cast(f2 as char) | cast(f3 as char)    | cast(f4 as char) | cast(f5 as char) |\n+------------------+------------------+------------------+---------------------+------------------+------------------+\n| 1                | 1.10             | 1                | 2025-05-27 00:00:00 | 1.1              | 1.1              |\n| 2                | 2.20             | 2                | 2025-05-27 00:00:00 | 2.2              | 2.2              |\n+------------------+------------------+------------------+---------------------+------------------+------------------+\n2 rows in set (0.00 sec)\n\nmysql> \n\n### 2. What did you expect to see? (Required)\n\nCompatible with MySQL when use cast(XXX as varchar), include datetime\\float\\double\\decimal\n\n### 3. What did you see instead (Required)\nthe values of length in column-type-info incompatible with MySQL when use cast(xxx as varchar)\n\n### 4. What is your TiDB version? (Required)\n+--------------------------------------------+\n| version()                                  |\n+--------------------------------------------+\n| 8.0.11-TiDB-v9.0.0-beta.1.pre-803-g7702f73 |\n+--------------------------------------------+\n1 row in set (0.01 sec)\n\n",
    "state": "open",
    "created_at": "2025-05-27T09:15:46Z",
    "updated_at": "2025-07-02T10:04:44Z",
    "closed_at": null,
    "labels": [
      "type/bug",
      "type/compatibility",
      "sig/sql-infra",
      "severity/moderate",
      "may-affects-6.1",
      "may-affects-7.1",
      "may-affects-7.5",
      "may-affects-8.1",
      "affects-8.5"
    ],
    "comments_count": 5,
    "author": "lc17123",
    "assignees": [
      "YangKeao"
    ],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "kubernetes",
      "mysql"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 22
  },
  {
    "id": 3048311725,
    "number": 61026,
    "title": "DDL reorg workers send read requests that contain suffix `0x01`",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\n```sql\nset global tidb_ddl_enable_fast_reorg = off;\nset global tidb_enable_dist_task = off;\ncreate table t (a int);\ninsert into t values (1);\nalter table t add index idx(a);\n```\n\n<!-- a step by step guide for reproducing the bug. -->\n\n### 2. What did you expect to see? (Required)\n\nhttps://github.com/pingcap/tidb/blob/c1576410ac18755b2abb4faed51015199a82e671/pkg/ddl/backfilling.go#L1140\n\nThe `upperbound` should be `t\\x80\\x00\\x00\\x00\\x00\\x00\\x00t_r\\x80\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x00` (the suffix is `0x00`).\n\n### 3. What did you see instead (Required)\n\n`t\\x80\\x00\\x00\\x00\\x00\\x00\\x00t_r\\x80\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x01` (the suffix is `0x01`).\n\n### 4. What is your TiDB version? (Required)\n\n<!-- Paste the output of SELECT tidb_version() -->\nc1576410ac",
    "state": "open",
    "created_at": "2025-05-08T09:02:24Z",
    "updated_at": "2025-07-02T09:24:15Z",
    "closed_at": null,
    "labels": [
      "component/ddl"
    ],
    "comments_count": 2,
    "author": "tangenta",
    "assignees": [],
    "milestone": null,
    "category": "other",
    "tech_context": [],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 5
  },
  {
    "id": 3195138220,
    "number": 62144,
    "title": "Reserve a range of table ID for enterprise edition",
    "body": "## Enhancement\n\nhttps://github.com/pingcap/tidb/blob/a900a31a9d1e4b277b42b77e9fac2a6d8b83ffc4/pkg/infoschema/tables.go#L346-L353\n\nwe found git conflict with cherry-pick codes from open-source TiDB. It's better to reserve a range to avoid more confilct in future",
    "state": "open",
    "created_at": "2025-07-02T08:54:19Z",
    "updated_at": "2025-07-02T09:06:45Z",
    "closed_at": null,
    "labels": [
      "type/enhancement"
    ],
    "comments_count": 1,
    "author": "lance6716",
    "assignees": [],
    "milestone": null,
    "category": "enhancement",
    "tech_context": [],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 3
  },
  {
    "id": 3062856224,
    "number": 61116,
    "title": "next-gen: ddl function is not available after native br restore was executed several times",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n1. restore sysbench_32_7000w to keyspace_a with 8.5.1 br\n2. cse backup cluster data\n3. cse restore --keyspace-name keyspace_a --target-keyspace-name keyspace_b\n4. drop sysbench_32_7000w of keyspace_a and keyspace_b\ncse restore --keyspace-name keyspace_a --target-keyspace-name keyspace_b or cse restore --keyspace-name keyspace_a --target-keyspace-name keyspace_a\n6. restore error\n2025-05-13T14:33:21+00:00] Restore keyspace keyspace_a->keyspace_b error:  PdError(Other(\"[components/pd_client/src/[util.rs:615](http://util.rs:615/)]: request retry exceeds limit\"))\n7. after a period of time, minio could not access normally, and tikv repeatedly panicked (2025/05/13 22:45:00 +08:00)\n8. restart minio and minio recovery to normal\uff0ctikv also recovery to normal\n9. The cluster cannot be used normally and ddl is stuck \n\n### 2. What did you expect to see? (Required)\nddl function is available\n\n### 3. What did you see instead (Required)\nddl function is not available after native br restore was executed several times with some tidb error\n`[2025/05/14 03:18:11.666 +00:00] [ERROR] [misc.go:117] [\"panic in the recoverable goroutine\"] [keyspaceName=keyspace_a] [label=domain] [funcInfo=handleTasksLoop] [r=\"runtime error: invalid memory address or nil pointer dereference\"] [stack=\"[github.com/pingcap/tidb/pkg/util.Recover\\n\\t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/util/misc.go:121\\nruntime.gopanic\\n\\t/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.23.8.linux-amd64/src/runtime/panic.go:791\\ngithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).Exec.func1\\n\\t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/executor/adapter.go:496\\nruntime.gopanic\\n\\t/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.23.8.linux-amd64/src/runtime/panic.go:791\\nruntime.panicmem\\n\\t/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.23.8.linux-amd64/src/runtime/panic.go:262\\nruntime.sigpanic\\n\\t/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.23.8.linux-amd64/src/runtime/signal_unix.go:917\\ngithub.com/pingcap/tidb/pkg/executor.buildNoRangeIndexLookUpReader\\n\\t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/executor/builder.go:4206\\ngithub.com/pingcap/tidb/pkg/executor.(*executorBuilder).buildIndexLookUpReader\\n\\t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/executor/builder.go:4222\\ngithub.com/pingcap/tidb/pkg/executor.(*executorBuilder).build\\n\\t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/executor/builder.go:297\\ngithub.com/pingcap/tidb/pkg/executor.(*executorBuilder).buildHashAgg\\n\\t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/executor/builder.go:1927\\ngithub.com/pingcap/tidb/pkg/executor.(*executorBuilder).build\\n\\t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/executor/builder.go:275\\ngithub.com/pingcap/tidb/pkg/executor.(*executorBuilder).buildProjection\\n\\t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/executor/builder.go:2099\\ngithub.com/pingcap/tidb/pkg/executor.(*executorBuilder).build\\n\\t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/executor/builder.go:279\\ngithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).buildExecutor\\n\\t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/executor/adapter.go:1230\\ngithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).Exec\\n\\t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/executor/adapter.go:571\\ngithub.com/pingcap/tidb/pkg/session.runStmt\\n\\t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/session/session.go:2305\\ngithub.com/pingcap/tidb/pkg/session.(*session).ExecuteStmt\\n\\t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/session/session.go:2167\\ngithub.com/pingcap/tidb/pkg/session.(*session).ExecuteInternal\\n\\t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/session/session.go:1540\\ngithub.com/pingcap/tidb/pkg/util/sqlexec.ExecSQL\\n\\t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/util/sqlexec/restricted_sql_executor.go:256\\ngithub.com/pingcap/tidb/pkg/disttask/framework/storage.(*TaskManager).GetTaskExecInfoByExecID.func1\\n\\t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/disttask/framework/storage/task_table.go:321\\ngithub.com/pingcap/tidb/pkg/disttask/framework/storage.(*TaskManager).WithNewSession\\n\\t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/disttask/framework/storage/task_table.go:172\\ngithub.com/pingcap/tidb/pkg/disttask/framework/storage.(*TaskManager).GetTaskExecInfoByExecID\\n\\t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/disttask/framework/storage/task_table.go:317\\ngithub.com/pingcap/tidb/pkg/disttask/framework/taskexecutor.(*Manager).handleTasks\\n\\t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/disttask/framework/taskexecutor/manager.go:172\\ngithub.com/pingcap/tidb/pkg/disttask/framework/taskexecutor.(*Manager).handleTasksLoop\\n\\t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/disttask/framework/taskexecutor/manager.go:151\\ngithub.com/pingcap/tidb/pkg/util.(*WaitGroupWrapper).Run.func1\\n\\t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/util/wait_group_wrapper.go:167](http://github.com/pingcap/tidb/pkg/util.Recover/n/t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/util/misc.go:121/nruntime.gopanic/n/t/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.23.8.linux-amd64/src/runtime/panic.go:791/ngithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).Exec.func1/n/t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/executor/adapter.go:496/nruntime.gopanic/n/t/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.23.8.linux-amd64/src/runtime/panic.go:791/nruntime.panicmem/n/t/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.23.8.linux-amd64/src/runtime/panic.go:262/nruntime.sigpanic/n/t/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.23.8.linux-amd64/src/runtime/signal_unix.go:917/ngithub.com/pingcap/tidb/pkg/executor.buildNoRangeIndexLookUpReader/n/t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/executor/builder.go:4206/ngithub.com/pingcap/tidb/pkg/executor.(*executorBuilder).buildIndexLookUpReader/n/t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/executor/builder.go:4222/ngithub.com/pingcap/tidb/pkg/executor.(*executorBuilder).build/n/t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/executor/builder.go:297/ngithub.com/pingcap/tidb/pkg/executor.(*executorBuilder).buildHashAgg/n/t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/executor/builder.go:1927/ngithub.com/pingcap/tidb/pkg/executor.(*executorBuilder).build/n/t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/executor/builder.go:275/ngithub.com/pingcap/tidb/pkg/executor.(*executorBuilder).buildProjection/n/t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/executor/builder.go:2099/ngithub.com/pingcap/tidb/pkg/executor.(*executorBuilder).build/n/t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/executor/builder.go:279/ngithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).buildExecutor/n/t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/executor/adapter.go:1230/ngithub.com/pingcap/tidb/pkg/executor.(*ExecStmt).Exec/n/t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/executor/adapter.go:571/ngithub.com/pingcap/tidb/pkg/session.runStmt/n/t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/session/session.go:2305/ngithub.com/pingcap/tidb/pkg/session.(*session).ExecuteStmt/n/t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/session/session.go:2167/ngithub.com/pingcap/tidb/pkg/session.(*session).ExecuteInternal/n/t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/session/session.go:1540/ngithub.com/pingcap/tidb/pkg/util/sqlexec.ExecSQL/n/t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/util/sqlexec/restricted_sql_executor.go:256/ngithub.com/pingcap/tidb/pkg/disttask/framework/storage.(*TaskManager).GetTaskExecInfoByExecID.func1/n/t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/disttask/framework/storage/task_table.go:321/ngithub.com/pingcap/tidb/pkg/disttask/framework/storage.(*TaskManager).WithNewSession/n/t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/disttask/framework/storage/task_table.go:172/ngithub.com/pingcap/tidb/pkg/disttask/framework/storage.(*TaskManager).GetTaskExecInfoByExecID/n/t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/disttask/framework/storage/task_table.go:317/ngithub.com/pingcap/tidb/pkg/disttask/framework/taskexecutor.(*Manager).handleTasks/n/t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/disttask/framework/taskexecutor/manager.go:172/ngithub.com/pingcap/tidb/pkg/disttask/framework/taskexecutor.(*Manager).handleTasksLoop/n/t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/disttask/framework/taskexecutor/manager.go:151/ngithub.com/pingcap/tidb/pkg/util.(*WaitGroupWrapper).Run.func1/n/t/home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tidb/pkg/util/wait_group_wrapper.go:167)\"]`\n\n### 4. What is your TiDB version? (Required)\n./tidb-server -V\n Release Version: v9.0.0-next-gen\nEdition: Community\nGit Commit Hash: ad7da11f3f1c0e773cca0c7231a00be060ed6edc\nGit Branch: heads/refs/tags/v9.0.0-next-gen\nUTC Build Time: 2025-05-07 08:49:36\nGoVersion: go1.23.8\nRace Enabled: false\nCheck Table Before Drop: false\nStore: unistore\nKernel Type: Next Generation\n\n",
    "state": "closed",
    "created_at": "2025-05-14T11:54:43Z",
    "updated_at": "2025-07-02T08:11:08Z",
    "closed_at": "2025-07-02T08:11:08Z",
    "labels": [
      "type/bug",
      "severity/major",
      "feature/developing",
      "may-affects-6.1",
      "may-affects-6.5",
      "may-affects-7.1",
      "component/ddl",
      "may-affects-7.5",
      "may-affects-8.1",
      "may-affects-8.5"
    ],
    "comments_count": 2,
    "author": "Lily2025",
    "assignees": [
      "Benjamin2037"
    ],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "backup",
      "tikv",
      "pd"
    ],
    "error_patterns": [
      "error:"
    ],
    "has_solution": true,
    "is_recent": true,
    "engagement_score": 17
  },
  {
    "id": 3119940372,
    "number": 61510,
    "title": "br: add more metrics to trace the memory usage during restoring",
    "body": "## Enhancement\nAs title, we may encounter OOM when doing `restore point` and there are too many metadata files.",
    "state": "closed",
    "created_at": "2025-06-05T05:50:49Z",
    "updated_at": "2025-07-02T07:54:15Z",
    "closed_at": "2025-07-02T07:54:15Z",
    "labels": [
      "type/enhancement"
    ],
    "comments_count": 0,
    "author": "YuJuncen",
    "assignees": [],
    "milestone": null,
    "category": "enhancement",
    "tech_context": [
      "monitoring",
      "backup"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 1
  },
  {
    "id": 2883559848,
    "number": 59810,
    "title": "Cancel the DDL cause incorrect column name",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\nRun the following DDL, and cancel it before execution finished.\n```\nALTER TABLE test.a CHANGE column1 column1 VARCHAR(255)\n```\n\nTiCDC receive column name like `_Col$_xxx`, this is unexpected. TiCDC only handle DDL job which state is `Done`\n\n\n<!-- a step by step guide for reproducing the bug. -->\n\n### 2. What did you expect to see? (Required)\n\nThe column name should be correct, such as column1\n\n### 3. What did you see instead (Required)\n\nTiCDC receive column name like `_Col$_xxx`, this is unexpected.\n\n### 4. What is your TiDB version? (Required)\n\nv7.5.1\n\n<!-- Paste the output of SELECT tidb_version() -->\n\n",
    "state": "closed",
    "created_at": "2025-02-27T06:24:35Z",
    "updated_at": "2025-07-02T07:50:56Z",
    "closed_at": "2025-07-02T07:50:56Z",
    "labels": [
      "type/bug",
      "severity/critical",
      "may-affects-6.1",
      "may-affects-6.5",
      "may-affects-7.1",
      "component/ddl",
      "may-affects-7.5",
      "may-affects-8.1",
      "impact/inconsistency",
      "may-affects-8.5",
      "affects-9.0"
    ],
    "comments_count": 2,
    "author": "3AceShowHand",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "cdc"
    ],
    "error_patterns": [],
    "has_solution": true,
    "is_recent": false,
    "engagement_score": 15
  },
  {
    "id": 3120460105,
    "number": 61525,
    "title": "inject tikv failure, pitr has inconsistent results",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n1. start pitr with table filter\n2. inject tikv pod failure 10min. duiring this failure, pitr would fail\n3. restart pitr\n4. pitr could success but data was inconsistent.\n\nbackup log has these operations\uff1a\n\n1. create table `index_Data2_v2`\n2. drop table `index_Data2`\n3. rename table `index_Data2_v2` to `index_Data2`\n\n<!-- a step by step guide for reproducing the bug. -->\n\n### 2. What did you expect to see? (Required)\nno table `index_Data2_v2` \n\n### 3. What did you see instead (Required)\ntable `index_Data2_v2`  in restore mode\n\n![Image](https://github.com/user-attachments/assets/fdb06389-eec1-48eb-b5d1-971cb8a057be)\n\n### 4. What is your TiDB version? (Required)\n\n<!-- Paste the output of SELECT tidb_version() -->\n\nRelease Version: v9.0.0-beta.1.pre-869-g2bd1417\nEdition: Community\nGit Commit Hash: 2bd14176d4aa185f2b6f88cb506b4b8cc754a18d\nGit Branch: HEAD\nUTC Build Time: 2025-06-04 07:10:25\nGoVersion: go1.23.9\nRace Enabled: false\nCheck Table Before Drop: false\nStore: tikv\nKernel Type: Classic",
    "state": "closed",
    "created_at": "2025-06-05T09:16:40Z",
    "updated_at": "2025-07-02T07:50:24Z",
    "closed_at": "2025-07-02T07:48:47Z",
    "labels": [
      "type/bug",
      "severity/major",
      "component/br",
      "feature/developing",
      "affects-8.5"
    ],
    "comments_count": 9,
    "author": "apollodafoni",
    "assignees": [
      "Leavrth"
    ],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "kubernetes",
      "docker",
      "backup",
      "tikv"
    ],
    "error_patterns": [],
    "has_solution": true,
    "is_recent": true,
    "engagement_score": 26
  },
  {
    "id": 3159575095,
    "number": 61841,
    "title": "After the table is repaired, it still remains in the repair list.",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\n<!-- a step by step guide for reproducing the bug. -->\n1. create a cluster with 3 tidb, 3 tikv\n2. use br do 'pitr table filter'\n3. kill br process, and let the table in restore mode\n4. use `admin repair table ` recover rable\n\n### 2. What did you expect to see? (Required)\n1. After the table is repaired, it removed from repair list.\n\n### 3. What did you see instead (Required)\n1. After the table is repaired, it still remains in the repair list.\n\n![Image](https://github.com/user-attachments/assets/0775b7df-85c9-4e9c-97cb-8eeaf2cbea0e)\n\n2. One of the tidb repairs also had an error\n\n![Image](https://github.com/user-attachments/assets/49660073-1bbe-4e3b-ab1d-a24e596922ae)\n\n### 4. What is your TiDB version? (Required)\n\n<!-- Paste the output of SELECT tidb_version() -->\nRelease Version: v8.5.0-20250618-76bdb5d\nEdition: Community\nGit Commit Hash: 76bdb5d24ca4d4526940dff398994c6728ba70e5\nGit Branch: heads/refs/tags/v8.5.0-20250618-76bdb5d\nUTC Build Time: 2025-06-18 07:07:08\nGoVersion: go1.23.3\nRace Enabled: false\nCheck Table Before Drop: false\nStore: tikv\n",
    "state": "closed",
    "created_at": "2025-06-19T09:10:03Z",
    "updated_at": "2025-07-02T07:47:38Z",
    "closed_at": "2025-07-02T07:47:38Z",
    "labels": [
      "type/bug",
      "severity/major",
      "may-affects-6.5",
      "may-affects-7.1",
      "component/ddl",
      "may-affects-7.5",
      "may-affects-8.1",
      "may-affects-8.5"
    ],
    "comments_count": 8,
    "author": "apollodafoni",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "docker",
      "backup",
      "tikv"
    ],
    "error_patterns": [],
    "has_solution": true,
    "is_recent": true,
    "engagement_score": 24
  },
  {
    "id": 3112282550,
    "number": 61454,
    "title": "Pessimistic locks are left after the session gets killed",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\n<!-- a step by step guide for reproducing the bug. -->\n\n- start a transaction and lock a key\n  ```sql\n  create table t (id int primary key, c int);\n  insert into t values (1, 1), (2, 2), (3, 3);\n  begin;\n  select * from t where id = 1 for update;\n  ```\n- kill the above session by `kill <id>`\n- query the mvcc info of the key\n  ```sh\n  curl 127.0.0.1:10080/mvcc/key/test/t/1\n  ```\n\n### 2. What did you expect to see? (Required)\n\nthe pessimistic lock should be rollbacked.\n\n### 3. What did you see instead (Required)\n\nthe pessimistic lock was left because `rollbackPessimisticLocks` failed due to the [kill flag](https://github.com/tikv/client-go/blob/e84f1a780fa63c25b76b8813eee4d587904b8221/txnkv/transaction/2pc.go#L1074).\n```\n$ curl 127.0.0.1:10080/mvcc/key/test/t/1\n{\n \"key\": \"7480000000000000705F728000000000000001\",\n \"region_id\": 22,\n \"value\": {\n  \"info\": {\n   \"lock\": {\n    \"type\": 5,\n    \"start_ts\": 458469322054434817,\n    \"primary\": \"dIAAAAAAAABwX3KAAAAAAAAAAQ==\",\n    \"last_change_ts\": 458469321360015362,\n    \"versions_to_last_change\": 1\n   },\n   \"writes\": [\n    {\n     \"start_ts\": 458469321360015361,\n     \"commit_ts\": 458469321360015362,\n     \"short_value\": \"gAABAAAAAgEACg==\"\n    }\n   ]\n  }\n }\n}\n```\n\n### 4. What is your TiDB version? (Required)\n\n<!-- Paste the output of SELECT tidb_version() -->\n\nmaster",
    "state": "open",
    "created_at": "2025-06-03T03:46:28Z",
    "updated_at": "2025-07-02T07:15:47Z",
    "closed_at": null,
    "labels": [
      "type/bug",
      "sig/transaction",
      "severity/moderate",
      "affects-7.1",
      "affects-7.5",
      "affects-8.1",
      "affects-8.5",
      "affects-9.0"
    ],
    "comments_count": 2,
    "author": "zyguan",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "tikv",
      "pd"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 12
  },
  {
    "id": 2995457313,
    "number": 60574,
    "title": "release: v7.5.7",
    "body": "**Disclaimer**\nThe dates published in this issue are for planning purposes only. It is intended solely to help you plan your projects. A date that exists in the future should not be considered a firm release date as the release and timing of releases are subject to change at any time and are at PingCAP's sole discretion.\n\n**Candidate SHA:**\nTBD\n\nWorking Tags: TBD\n\n**Check the diff in the current version:**\nSee the difference from the commit perspective:\nTBD\n\n\n**Release process checklist**\n\n- [x] 0. Announce the release plan.\n \n- [ ] 1. Code freeze and RC build: Jul. 24, 2025(PDT, GMT-7)\n\n- [ ] 2. Qualifying the release.\n\n- [ ] 3. Docs preparing for release.\n\n- [ ] 4. The release qualified.\n\n- [ ] 5. Docs are ready for release.\n\n**Release date: Aug. 7, 2025(CST & PDT)**\n\nDo not proceed below until the release date.\n\n- [ ] 6. Publish TiDB Release\n\n> - [ ] fill in Candidate SHA above\n> \n> - [ ] fill in the release tag\n\n- [ ] 7. Update docs\n\n- [ ] 8. Update the official website",
    "state": "open",
    "created_at": "2025-04-15T07:33:26Z",
    "updated_at": "2025-07-02T06:46:08Z",
    "closed_at": null,
    "labels": [],
    "comments_count": 0,
    "author": "EmmaDuDu",
    "assignees": [],
    "milestone": null,
    "category": "other",
    "tech_context": [
      "pd"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 0
  },
  {
    "id": 3152156792,
    "number": 61769,
    "title": "release: v8.5.3",
    "body": "**Disclaimer**\nThe dates published in this issue are for planning purposes only. It is intended solely to help you plan your projects. A date that exists in the future should not be considered a firm release date as the release and timing of releases are subject to change at any time and are at PingCAP's sole discretion.\n\n**Working Tags:**\nTBD\n\n**Check the diff in the current version:**\nSee the difference from the commit perspective:\nTBD\n\n\n**Release process checklist**\n\n- [x] 0. Announce the release plan.\n \n- [ ] 1. Code freeze and RC build:Jul. 14, 2025(PDT, GMT-7) \n\n- [ ] 2. Qualifying the release.\n\n- [ ] 3. Docs preparing for release.\n\n- [ ] 4. The release qualified.\n\n- [ ] 5. Docs are ready for release.\n\n**Release date: Jul. 24, 2025(CST & PDT)**\n\nDo not proceed below until the release date.\n\n- [ ] 6. Publish TiDB Release\n \n> - [ ] fill in the release tag\n\n- [ ] 7. Update docs\n\n- [ ] 8. Update the official website",
    "state": "open",
    "created_at": "2025-06-17T05:53:30Z",
    "updated_at": "2025-07-02T06:46:03Z",
    "closed_at": null,
    "labels": [],
    "comments_count": 0,
    "author": "EmmaDuDu",
    "assignees": [],
    "milestone": null,
    "category": "other",
    "tech_context": [
      "pd"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 0
  },
  {
    "id": 2984596147,
    "number": 60472,
    "title": "Tracking Issue for Upgrade",
    "body": "## Tasks:\n- [x] 8.5.3\n\n- [x] 8.5.2\n    - [x] https://github.com/pingcap/tidb/issues/61884\n    - [x] https://github.com/tikv/tikv/issues/18503\n- [x] 8.5.1\n    - [x] https://github.com/pingcap/tidb/issues/59926\n    - [x] https://github.com/pingcap/tidb/issues/59827\n    - [x] https://github.com/tikv/tikv/issues/18196\n    - [x] https://github.com/pingcap/tidb/issues/58368\n    - [x] https://github.com/tikv/tikv/issues/18233\n    - [x] https://github.com/pingcap/tidb/issues/59947\n    - [x] https://github.com/tikv/tikv/issues/18384\n    - [x] https://github.com/pingcap/tidb/issues/60627\n- [x] 8.5.0\n    - [x] https://github.com/pingcap/tidb/issues/58843\n- [x] 7.5.6\n    - [x] https://github.com/pingcap/tidb/issues/51464\n\n",
    "state": "open",
    "created_at": "2025-04-10T06:25:39Z",
    "updated_at": "2025-07-02T06:43:32Z",
    "closed_at": null,
    "labels": [],
    "comments_count": 0,
    "author": "seiya-annie",
    "assignees": [],
    "milestone": null,
    "category": "other",
    "tech_context": [
      "tikv"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 0
  },
  {
    "id": 2778376752,
    "number": 58843,
    "title": "modify column keeps writing temp column to tableinfo during upgrade from 8.1 -> 8.5, when there are multiple owners",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\n<!-- a step by step guide for reproducing the bug. -->\n- during upgrade, trigger this issue https://github.com/pingcap/tidb/issues/54689 on the older node `A`\n- during the upgrade there is a `ALTER TABLE mysql.tidb_runaway_queries MODIFY COLUMN `plan_digest` varchar(64) DEFAULT '';` submitted by the 8.5 node which will force to be owner, and the job is using v1 args, but it contains 8 args, below is the code of 8.5.0\nhttps://github.com/pingcap/tidb/blob/244062f826f75494525e3ac319d0e8ad794b0a43/pkg/meta/model/job_args.go#L1690-L1694\n- if the job is run on `A`, it will append args, but A only uses the first 8, the appended args is useless.\n  - if the job is created by older version, the job will only have 5 args initially, will append args will work, below is the code of 8.1.0\nhttps://github.com/pingcap/tidb/blob/945d07c5d5c7a1ae212f6013adfb187f2de24b23/pkg/ddl/ddl_api.go#L6027\n- so `modifyInfo.changingCol` is nil all the time, and it's initialized and inserted into the tableinfo every time(code of 8.1.0):\nhttps://github.com/pingcap/tidb/blob/945d07c5d5c7a1ae212f6013adfb187f2de24b23/pkg/ddl/column.go#L570-L571\n- as node `A` keeps running the job, we got a tableinfo like this:\n```json\n{\n  \"id\": 432102,\n  \"name\": {\n   \"O\": \"tidb_runaway_queries\",\n   \"L\": \"tidb_runaway_queries\"\n  },\n  \"charset\": \"utf8mb4\",\n  \"collate\": \"utf8mb4_bin\",\n  \"cols\": [\n..... other columns\n  {\n    \"id\": 3546,\n    \"name\": {\n     \"O\": \"_Col$_plan_digest_3536\",\n     \"L\": \"_col$_plan_digest_3536\"\n    },\n    \"offset\": 3545,\n.....\n}\n```\n### 2. What did you expect to see? (Required)\n\n### 3. What did you see instead (Required)\n\n### 4. What is your TiDB version? (Required)\nsee title\n<!-- Paste the output of SELECT tidb_version() -->\n\n",
    "state": "closed",
    "created_at": "2025-01-09T17:24:21Z",
    "updated_at": "2025-07-02T06:42:44Z",
    "closed_at": "2025-01-10T06:43:51Z",
    "labels": [
      "type/bug",
      "severity/major",
      "component/ddl",
      "report/customer",
      "affects-8.5",
      "impact/upgrade"
    ],
    "comments_count": 3,
    "author": "D3Hunter",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "mysql"
    ],
    "error_patterns": [],
    "has_solution": true,
    "is_recent": false,
    "engagement_score": 12
  },
  {
    "id": 3194360328,
    "number": 62130,
    "title": "replace __MACOSX/s/._issue_61093.json? [y]es, [n]o, [A]ll, [N]one, [r]ename:",
    "body": "## Enhancement\n\n```\nTIDB_TEST_STORE_NAME=tikv TIKV_PATH=127.0.0.1:2379 ./run-tests.sh -s ../../bin/tidb-server -r all\nextracting statistics: s\nreplace __MACOSX/s/._issue_61093.json? [y]es, [n]o, [A]ll, [N]one, [r]ename: \n```\n\nwhat's going on with this __MACOSX trash file???\n\n",
    "state": "closed",
    "created_at": "2025-07-02T03:05:09Z",
    "updated_at": "2025-07-02T06:30:34Z",
    "closed_at": "2025-07-02T06:30:34Z",
    "labels": [
      "type/enhancement"
    ],
    "comments_count": 1,
    "author": "tiancaiamao",
    "assignees": [],
    "milestone": null,
    "category": "enhancement",
    "tech_context": [
      "tikv"
    ],
    "error_patterns": [],
    "has_solution": true,
    "is_recent": true,
    "engagement_score": 3
  },
  {
    "id": 3044563901,
    "number": 60986,
    "title": "TiDB panicked when quering the region status with a non-existed table ID",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\n```\nMySQL [information_schema]>    SELECT\n    ->      tikv.address,\n    ->      peer.region_id,\n    ->      peer.store_id,\n    ->      peer.is_leader\n    ->    FROM\n    ->      TIKV_STORE_STATUS tikv,\n    ->      TIKV_REGION_PEERS peer,\n    ->      (SELECT region_id FROM TIKV_REGION_STATUS WHERE table_id = 111) region\n    ->    WHERE\n    ->      region.region_id = peer.region_id\n    ->      AND peer.store_id = tikv.store_id;\nERROR 1105 (HY000): runtime error: invalid memory address or nil pointer dereference\nMySQL [information_schema]> SELECT TABLE_NAME \n    -> FROM information_schema.TABLES \n    -> WHERE TIDB_TABLE_ID = 111;\nEmpty set (0.001 sec)\n```\n\n```\n[2025/05/05 13:25:11.927 +00:00] [INFO] [conn.go:1184] [\"command dispatched failed\"] [conn=104857614] [session_alias=] [connInfo=\"id:104857614, addr:10.148.0.5:40686 status:10, collation:utf8_general_ci, user:root\"] [command=Query] [status=\"inTxn:0, autocommit:1\"] [sql=\"SELECT      tikv.address,      peer.region_id,      peer.store_id,      peer.is_leader    FROM      TIKV_STORE_STATUS tikv,      TIKV_REGION_PEERS peer,      (SELECT region_id FROM TIKV_REGION_STATUS WHERE table_id = 113) region    WHERE      region.region_id = peer.region_id      AND peer.store_id = tikv.store_id\"] [txn_mode=PESSIMISTIC] [timestamp=0] [err=\"runtime error: invalid memory address or nil pointer dereference\\ngithub.com/pingcap/errors.AddStack\\n\\t/root/go/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20240318064555-6bd07397691f/errors.go:178\\ngithub.com/pingcap/errors.Trace\\n\\t/root/go/pkg/mod/github.com/pingcap/errors@v0.11.5-0.20240318064555-6bd07397691f/juju_adaptor.go:15\\ngithub.com/pingcap/tidb/pkg/util.GetRecoverError\\n\\t/workspace/source/tidb/pkg/util/util.go:288\\ngithub.com/pingcap/tidb/pkg/executor/internal/exec.Next.func1\\n\\t/workspace/source/tidb/pkg/executor/internal/exec/executor.go:440\\nruntime.gopanic\\n\\t/usr/local/go/src/runtime/panic.go:785\\nruntime.panicmem\\n\\t/usr/local/go/src/runtime/panic.go:262\\nruntime.sigpanic\\n\\t/usr/local/go/src/runtime/signal_unix.go:917\\ngithub.com/pingcap/tidb/pkg/store/helper.(*Helper).GetRegionsTableInfo\\n\\t/workspace/source/tidb/pkg/store/helper/helper.go:684\\ngithub.com/pingcap/tidb/pkg/executor.(*memtableRetriever).setDataForTiKVRegionStatus\\n\\t/workspace/source/tidb/pkg/executor/infoschema_reader.go:2017\\ngithub.com/pingcap/tidb/pkg/executor.(*memtableRetriever).retrieve\\n\\t/workspace/source/tidb/pkg/executor/infoschema_reader.go:183\\ngithub.com/pingcap/tidb/pkg/executor.(*MemTableReaderExec).Next\\n\\t/workspace/source/tidb/pkg/executor/memtable_reader.go:136\\ngithub.com/pingcap/tidb/pkg/executor/internal/exec.Next\\n\\t/workspace/source/tidb/pkg/executor/internal/exec/executor.go:456\\ngithub.com/pingcap/tidb/pkg/executor.(*SelectionExec).Next\\n\\t/workspace/source/tidb/pkg/executor/select.go:721\\ngithub.com/pingcap/tidb/pkg/executor/internal/exec.Next\\n\\t/workspace/source/tidb/pkg/executor/internal/exec/executor.go:456\\ngithub.com/pingcap/tidb/pkg/executor/join.(*probeSideTupleFetcherBase).fetchProbeSideChunks\\n\\t/workspace/source/tidb/pkg/executor/join/hash_join_base.go:172\\ngithub.com/pingcap/tidb/pkg/executor/join.(*HashJoinV1Exec).fetchAndProbeHashTable.func1\\n\\t/workspace/source/tidb/pkg/executor/join/hash_join_v1.go:217\\ngithub.com/pingcap/tidb/pkg/util.(*WaitGroupWrapper).RunWithRecover.func1\\n\\t/workspace/source/tidb/pkg/util/wait_group_wrapper.go:189\\nruntime.goexit\\n\\t/usr/local/go/src/runtime/asm_amd64.s:1700\"]\n```\n\n<!-- a step by step guide for reproducing the bug. -->\n\n### 2. What did you expect to see? (Required)\n\nNo error, empty result.\n\n### 3. What did you see instead (Required)\n\nERROR 1105 (HY000): runtime error: invalid memory address or nil pointer dereference\n\n### 4. What is your TiDB version? (Required)\n\nv8.5.1\n\n<!-- Paste the output of SELECT tidb_version() -->\n\n",
    "state": "closed",
    "created_at": "2025-05-07T03:27:26Z",
    "updated_at": "2025-07-02T06:14:46Z",
    "closed_at": "2025-05-07T06:23:32Z",
    "labels": [
      "type/bug",
      "sig/sql-infra",
      "report/customer",
      "affects-8.5"
    ],
    "comments_count": 1,
    "author": "jackysp",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "mysql",
      "tikv"
    ],
    "error_patterns": [
      "error:"
    ],
    "has_solution": true,
    "is_recent": true,
    "engagement_score": 6
  },
  {
    "id": 3047682238,
    "number": 61007,
    "title": "Using the same log file for different log types can cause some problems",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\nuse same log files\n\n### 2. What did you expect to see? (Required)\n\nThe logs are normal.\n\n### 3. What did you see instead (Required)\n\n![Image](https://github.com/user-attachments/assets/0f2df709-e9e1-4994-9bca-fc254a15c4ea)\n\nOut of order, rotate may also cause problems\n\n### 4. What is your TiDB version? (Required)\n\n<!-- Paste the output of SELECT tidb_version() -->\nmaster\n",
    "state": "closed",
    "created_at": "2025-05-08T03:16:08Z",
    "updated_at": "2025-07-02T06:14:18Z",
    "closed_at": "2025-05-08T07:51:33Z",
    "labels": [
      "type/bug",
      "sig/sql-infra",
      "severity/major",
      "affects-8.1",
      "affects-8.5"
    ],
    "comments_count": 0,
    "author": "Defined2014",
    "assignees": [
      "Defined2014"
    ],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "docker"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 8
  },
  {
    "id": 3075357824,
    "number": 61191,
    "title": "remove foreign key table from tableInfoResident after new foreign key index on infoschema v2",
    "body": "## Enhancement\n",
    "state": "closed",
    "created_at": "2025-05-20T01:25:51Z",
    "updated_at": "2025-07-02T06:14:09Z",
    "closed_at": "2025-05-22T08:16:56Z",
    "labels": [
      "type/enhancement",
      "component/ddl",
      "affects-8.5"
    ],
    "comments_count": 0,
    "author": "River2000i",
    "assignees": [],
    "milestone": null,
    "category": "enhancement",
    "tech_context": [],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 3
  },
  {
    "id": 3159373093,
    "number": 61835,
    "title": "bug: vector type parser string maybe wrong",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\n```cli\ncreate table t(a vector(4));\n-- parser as [1,2,3,4.4]\ninsert into t values(\"[1,2,3,4.4]ddddddddddddfasfa\");\n````\n\n### 2. What did you expect to see? (Required)\n\n\nERROR 1105 (HY000): Invalid vector text: [1,2,3,4.4]ddddddddddddfasfa\n\n### 3. What did you see instead (Required)\n\nsucceed insert as [1,2,3,4.4]\n\n### 4. What is your TiDB version? (Required)\n\nhttps://github.com/pingcap/tidb/commit/56ba961c7076da1677e1f471356e4651dca3051e\n<!-- Paste the output of SELECT tidb_version() -->\n\n",
    "state": "closed",
    "created_at": "2025-06-19T08:00:53Z",
    "updated_at": "2025-07-02T06:13:40Z",
    "closed_at": "2025-06-19T16:47:37Z",
    "labels": [
      "type/bug",
      "severity/minor",
      "sig/vector",
      "affects-8.5",
      "affects-9.0"
    ],
    "comments_count": 0,
    "author": "yihong0618",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": true,
    "engagement_score": 5
  },
  {
    "id": 2639779226,
    "number": 57191,
    "title": "routine leak in TestRejectUnsupportedTables",
    "body": "## Bug Report\r\n\r\nPlease answer these questions before submitting your issue. Thanks!\r\n\r\n### 1. Minimal reproduce step (Required)\r\njust run it, it happens every time. this sleep is introduced in https://github.com/tikv/client-go/pull/1458/files#diff-8600ed94f5c2740e41ca557dd1d00840f7fd0e3fcd2743d4dbbf5f1e9cc0376eR511, and has been updated in tidb in https://github.com/pingcap/tidb/pull/56305 for more than a month, I am not sure why CI cannot find it for such a long time, and suddenly it appears in this pr https://github.com/pingcap/tidb/pull/57179\r\n```\r\n--- PASS: TestRejectUnsupportedTables (4.40s)\r\nPASS\r\ngoleak: Errors on successful test run: found unexpected goroutines:\r\n[Goroutine 1156 in state sleep, with time.Sleep on top of the stack:\r\ntime.Sleep(0x12a05f200)\r\n\t/usr/local/go/src/runtime/time.go:315 +0xc8\r\ngithub.com/tikv/client-go/v2/txnkv/transaction.(*twoPhaseCommitter).resolveFlushedLocks.func1()\r\n\t/Users/jujiajia/go/pkg/mod/github.com/tikv/client-go/v2@v2.0.8-0.20240925070302-58f3322fc39a/txnkv/transaction/pipelined_flush.go:511 +0xdf8\r\ncreated by github.com/tikv/client-go/v2/txnkv/transaction.(*twoPhaseCommitter).resolveFlushedLocks in goroutine 63\r\n\t/Users/jujiajia/go/pkg/mod/github.com/tikv/client-go/v2@v2.0.8-0.20240925070302-58f3322fc39a/txnkv/transaction/pipelined_flush.go:489 +0xcf4\r\n Goroutine 1110 in state sleep, with time.Sleep on top of the stack:\r\ntime.Sleep(0x12a05f200)\r\n\t/usr/local/go/src/runtime/time.go:315 +0xc8\r\ngithub.com/tikv/client-go/v2/txnkv/transaction.(*twoPhaseCommitter).resolveFlushedLocks.func1()\r\n\t/Users/jujiajia/go/pkg/mod/github.com/tikv/client-go/v2@v2.0.8-0.20240925070302-58f3322fc39a/txnkv/transaction/pipelined_flush.go:511 +0xdf8\r\ncreated by github.com/tikv/client-go/v2/txnkv/transaction.(*twoPhaseCommitter).resolveFlushedLocks in goroutine 63\r\n\t/Users/jujiajia/go/pkg/mod/github.com/tikv/client-go/v2@v2.0.8-0.20240925070302-58f3322fc39a/txnkv/transaction/pipelined_flush.go:489 +0xcf4\r\n]\r\n```\r\n<!-- a step by step guide for reproducing the bug. -->\r\n\r\n### 2. What did you expect to see? (Required)\r\n\r\n### 3. What did you see instead (Required)\r\n\r\n### 4. What is your TiDB version? (Required)\r\nmaster\r\n<!-- Paste the output of SELECT tidb_version() -->\r\n\r\n",
    "state": "closed",
    "created_at": "2024-11-07T03:42:51Z",
    "updated_at": "2025-07-02T06:12:10Z",
    "closed_at": "2024-11-07T09:51:27Z",
    "labels": [
      "type/bug",
      "sig/transaction",
      "severity/major",
      "may-affects-5.4",
      "may-affects-6.1",
      "may-affects-6.5",
      "may-affects-7.1",
      "may-affects-7.5",
      "may-affects-8.1",
      "impact/leak",
      "affects-8.5"
    ],
    "comments_count": 1,
    "author": "D3Hunter",
    "assignees": [],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "tikv",
      "pd"
    ],
    "error_patterns": [],
    "has_solution": true,
    "is_recent": false,
    "engagement_score": 13
  },
  {
    "id": 2965838018,
    "number": 60375,
    "title": "import into merge stage is extremely slow for large datasets due to suboptimal resource usage",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\n1. datesize 8T with about 48 billion rows\n2. DXF is enabled\n3. import into xxx from s3:xxx\n\n### 2. What did you expect to see? (Required)\nThe merge phase should be optimized to make full use of all available TiDB resources\n### 3. What did you see instead (Required)\nOnly 2 subtasks were allocated, and while one finishes the merge step quickly, the other takes nearly 2 hours.\n[next-step=merge-sort] [subtask-count=2]\n![Image](https://github.com/user-attachments/assets/002f8b55-075f-4cea-9e48-420521ada1ff)\n![Image](https://github.com/user-attachments/assets/9f237b57-0af0-468a-a3e5-a273b581267a)\n\n### 4. What is your TiDB version? (Required)\n\n<!-- Paste the output of SELECT tidb_version() -->\n\nv8.5.1",
    "state": "closed",
    "created_at": "2025-04-02T09:46:16Z",
    "updated_at": "2025-07-02T06:11:32Z",
    "closed_at": "2025-05-24T04:21:08Z",
    "labels": [
      "type/bug",
      "severity/major",
      "component/import",
      "component/ddl",
      "affects-8.5"
    ],
    "comments_count": 0,
    "author": "shaoxiqian",
    "assignees": [
      "tangenta"
    ],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "docker",
      "cloud",
      "performance"
    ],
    "error_patterns": [],
    "has_solution": false,
    "is_recent": false,
    "engagement_score": 8
  },
  {
    "id": 2948815569,
    "number": 60271,
    "title": "In the batchPointGet operation, the internal backoff information is not correctly displayed in the execution Info",
    "body": "## Bug Report\n\nPlease answer these questions before submitting your issue. Thanks!\n\n### 1. Minimal reproduce step (Required)\n\n<!-- a step by step guide for reproducing the bug. -->\nMock backoff info to all BatchPointGet operations. Update client-go code like \n```go\nfunc (s *KVSnapshot) BatchGet(ctx context.Context, keys [][]byte) (map[string][]byte, error) {\n...\n\tbo.Backoff(retry.BoPDRPC, errors.New(\"1111\"))\n\terr := s.batchGetKeysByRegions(bo, keys, func(k, v []byte) {\n...\n}\n\nfunc (s *KVSnapshot) batchGetKeysByRegions(bo *retry.Backoffer, keys [][]byte, collectF func(k, v []byte)) error {\n...\n\tfor i, batch1 := range batches {\n\t\tbatch := batch1\n\t\terrInfo := \"xxx\"\n\t\tboInfo := retry.BoRegionMiss\n\t\tif i == 1 {\n\t\t\terrInfo = \"yyy\"\n\t\t\tboInfo = retry.BoTxnLockFast\n\t\t}\n\t\tgo func() {\n\t\t\tbackoffer, cancel := bo.Fork()\n\t\t\tdefer cancel()\n\t\t\terr := backoffer.Backoff(boInfo, errors.New(errInfo))\n\t\t\tlogutil.BgLogger().Warn(\"backoff errors -------------------------------------------------\" + errInfo)\n\t\t\tif err != nil {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tch <- s.batchGetSingleRegion(backoffer, batch, collectF)\n\t\t}()\n\t}\n...\n}\n```\nOriginal code:\nhttps://github.com/tikv/client-go/blob/d4383a9a681116b265290818569ae3a7b59db5dd/txnkv/txnsnapshot/snapshot.go#L240-L241\n```go\nfunc (s *KVSnapshot) BatchGet(ctx context.Context, keys [][]byte) (map[string][]byte, error) {\n...\n\terr := s.batchGetKeysByRegions(bo, keys, func(k, v []byte) {\n...\n}\n```\nhttps://github.com/tikv/client-go/blob/d4383a9a681116b265290818569ae3a7b59db5dd/txnkv/txnsnapshot/snapshot.go#L357-L364\n```go\n\tfor _, batch1 := range batches {\n\t\tbatch := batch1\n\t\tgo func() {\n\t\t\tbackoffer, cancel := bo.Fork()\n\t\t\tdefer cancel()\n\t\t\tch <- s.batchGetSingleRegion(backoffer, batch, collectF)\n\t\t}()\n\t}\n```\n\n```sql\ncreate table t(id int, user int, primary key(id));\nSPLIT TABLE t BETWEEN (0) AND (1000000000) REGIONS 16;\ninsert into t values(312500000,312500000),(562500000,562500000),(1,1),(100000000,100000000);\nexplain analyze select * from t where id in(1, 100000000, 562500000);\n```\n\n\n### 2. What did you expect to see? (Required)\n```sql\n+-------------------+---------+---------+------+---------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------+--------+------+\n| id                | estRows | actRows | task | access object | execution info                                                                                                                                                                                                                                                                    | operator info                                                | memory | disk |\n+-------------------+---------+---------+------+---------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------+--------+------+\n| Batch_Point_Get_1 | 3.00    | 3       | root | table:t       | time:371.2ms, loops:2, RU:1.426785, BatchGet:{num_rpc:3, total_time:3.23ms},pdRPC_backoff:{num:1, total_time:364ms}, tikv_wall_time: 1.22ms, scan_detail: {total_process_keys: 3, total_process_keys_size: 117, total_keys: 3, get_snapshot_time: 268.4\u00b5s, rocksdb: {block: {}}}  | handle:[1 100000000 562500000], keep order:false, desc:false | N/A    | N/A  |\n+-------------------+---------+---------+------+---------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------+--------+------+\n1 row in set (0.37 sec)\n```\n\n### 3. What did you see instead (Required)\nThere should be multiple backoff messages instead of being overridden by the outermost backoff message.\n\n### 4. What is your TiDB version? (Required)\n\n<!-- Paste the output of SELECT tidb_version() -->\nv7.5.5\n",
    "state": "closed",
    "created_at": "2025-03-26T08:49:40Z",
    "updated_at": "2025-07-02T06:08:50Z",
    "closed_at": "2025-04-23T02:34:32Z",
    "labels": [
      "type/bug",
      "component/metrics",
      "sig/execution",
      "severity/major",
      "component/tikv-client",
      "affects-6.1",
      "affects-6.5",
      "affects-7.1",
      "affects-7.5",
      "affects-8.1",
      "report/customer",
      "affects-8.5"
    ],
    "comments_count": 5,
    "author": "zimulala",
    "assignees": [
      "yibin87"
    ],
    "milestone": null,
    "category": "bug",
    "tech_context": [
      "tikv",
      "pd"
    ],
    "error_patterns": [],
    "has_solution": true,
    "is_recent": false,
    "engagement_score": 25
  }
]